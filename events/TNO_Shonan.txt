 #############################################
## Shonan Events - Written by Butteryicarus(lol)  ###
##############################################

add_namespace = sho
add_namespace = SHOUS
add_namespace = SHOJAP

country_event = { #Intro
	id = sho.0
	immediate = {log = "[GetDateText]: [Root.GetName]: event sho.0"}
	title = sho.0.t
	desc = sho.0.desc
	picture = GFX_report_event_generic_military_parade

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = sho.0.a
		hidden_effect = {
			JAP = {
				country_event = {
					id = sho.1
					days = 5
				}
			}
			USA = {
				country_event = {
					id = sho.2
					days = 5
				}
			}
		}
	}
}


country_event = { #Japan can intervene
	id = sho.1
	immediate = {log = "[GetDateText]: [Root.GetName]: event sho.1"}
	title = sho.1.t
	desc = sho.1.desc
	picture = GFX_news_event_malaya_soldiers

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = sho.1.a
		custom_effect_tooltip = JAP_can_send_aid_malaya
		hidden_effect = {
			set_country_flag = JAP_aid_SHO
			set_temp_variable = { target = SHO }
			TNO_increase_volunteer_cap_1 = yes
			custom_effect_tooltip = TNO_increase_volunteers_SHO_1
		}
		TNO_fopo_add_malaysia_civil_war_tab = yes
	}
}

country_event = { #US introduction event, can send some aid
	id = sho.2
	immediate = {log = "[GetDateText]: [Root.GetName]: event sho.2"}
	title = sho.2.t
	desc = sho.2.desc
	picture = GFX_news_event_malaya_docking_port

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = sho.2.a
		custom_effect_tooltip = USA_can_send_aid_malaya
		set_country_flag = USA_aid_MLY
		TNO_fopo_add_malaysia_civil_war_tab = yes
		hidden_effect = {
			USA = {
				country_event = {
					id = SHOUS.5
					days = 7
				}
				country_event = {
					id = SHOUS.6
					days = 14
				}
			}
		}
	}
}

country_event = { #US can now send volunteers
	id = sho.3
	immediate = {log = "[GetDateText]: [Root.GetName]: event sho.3"}
	title = sho.3.t
	desc = sho.3.desc
	picture = GFX_news_event_malaya_docking_port

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = sho.3.a
		custom_effect_tooltip = USA_can_send_aid_malaya_troops
		hidden_effect = {
			MLY = {
				add_equipment_to_stockpile = {
					type = convoy_1
					amount = 25
					producer = USA
				}
			}
			USA = {
				set_temp_variable = { target = MLY }
				TNO_increase_volunteer_cap_1 = yes
				custom_effect_tooltip = "TNO_increase_volunteers_MLY_1"
				if = {
					limit = {
						is_ai = yes
					}
					MLY = {
						add_equipment_to_stockpile = {
							type = infantry_equipment
							amount = 300
							producer = USA
						}
						add_equipment_to_stockpile = {
							type = anti_tank_equipment
							amount = 200
							producer = USA
						}
						add_equipment_to_stockpile = {
							type = artillery_equipment
							amount = 150
							producer = USA
						}
						add_equipment_to_stockpile = {
							type = transport_helicopter_equipment_1
							amount = 60
							producer = USA
						}
					}
				}
			}
		}
	}
}

country_event = { #Yay the Americans won
	id = sho.4
	immediate = {log = "[GetDateText]: [Root.GetName]: event sho.4"}
	title = sho.4.t
	desc = sho.4.desc
	picture = GFX_report_event_nixon_happy

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = sho.4.a
		USA = { set_country_flag = TNO_CIA_MLY_Operations_Can_Begin }
		TNO_fopo_remove_malaysia_civil_war_tab = yes
		custom_effect_tooltip = TNO_USA_CIA_unlocked_tt
		custom_effect_tooltip = USA_add_RD_popularity_low
		hidden_effect = {
			USA = {
				every_owned_state = { #Small unity boost
					limit = { can_have_elections_in_state = yes }
					add_to_variable = { RD_bonus_popularity = 0.05 }
				}
				country_event = {
					id = SHOUS.7
					hours = 24
				}
				set_temp_variable = { Victory_ID = 25 }
				set_temp_variable = { Victory_Outcome = 4 }
				set_temp_variable = { Victory_Points = 75 }
				Cold_War_GUI_ManipulateVictory = yes
			}
		}
	}
}

country_event = { #Nay the Americans lost
	id = sho.41
	immediate = {log = "[GetDateText]: [Root.GetName]: event sho.41"}
	title = sho.41.t
	desc = sho.41.desc
	picture = GFX_report_event_nixon_sad

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = sho.41.a
		TNO_fopo_remove_malaysia_civil_war_tab = yes
		add_political_power = -75
		hidden_effect = {
			USA = {
				every_owned_state = { #Small unity boost
					limit = { can_have_elections_in_state = yes }
					add_to_variable = { RD_bonus_popularity = -0.05 }
				}
				set_temp_variable = { Victory_ID = 25 }
				set_temp_variable = { Victory_Outcome = 2 }
				set_temp_variable = { Victory_Points = -75 }
				Cold_War_GUI_ManipulateVictory = yes
			}
		}
		custom_effect_tooltip = USA_RD_popularity_decrease_low
	}
}

country_event = { #Yay the Japanese won
	id = sho.5
	immediate = {log = "[GetDateText]: [Root.GetName]: event sho.5"}
	title = sho.5.t
	desc = sho.5.desc
	picture = GFX_news_event_malaya_collab_1

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = sho.5.a
		SHO = {
			hidden_effect = { add_ideas = Sphere_Fully_Dependent }
			#econ_join_sphere_JAP = yes
			#add_ideas = {
			#	SHO_Lingering_Resistance
			#	SHO_Counting_Days
			#}
		}
		JAP = {
			add_to_faction = SHO
		}
		MLY = {
			remove_ideas = {
				MLY_Dismal_Infrastructure
				MLY_The_UMAJF
				MLY_driven_to_the_countryside
				MLY_operation_nassau
			}
		}
		TNO_fopo_remove_malaysia_civil_war_tab = yes
		JAP = {
			country_event = {
				id = SHOJAP.5
			}
			JAP_PA_support_increase_med = yes
			set_temp_variable = { Victory_ID = 25 }
			set_temp_variable = { Victory_Outcome = 4 }
			set_temp_variable = { Victory_Points = 75 }
			Cold_War_GUI_ManipulateVictory = yes
		}
		if = { # Partial Japan victory check here
			limit = {
				MLY = {
					exists = yes
				}
			}
		}
		else = { # Total Japan victory check here

		}
	}
}

country_event = { #Nay the Japanese lost
	id = sho.51
	immediate = {log = "[GetDateText]: [Root.GetName]: event sho.51"}
	title = sho.51.t
	desc = sho.51.desc
	picture = GFX_news_event_malaya_collab_1

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = sho.51.a
		TNO_fopo_remove_malaysia_civil_war_tab = yes
		add_political_power = -75
		JAP_PA_support_decrease_med = yes

		set_temp_variable = { Victory_ID = 25 }
		set_temp_variable = { Victory_Outcome = 2 }
		set_temp_variable = { Victory_Points = -75 }
		Cold_War_GUI_ManipulateVictory = yes

		add_to_faction = SHO
		SHO = {
			hidden_effect = { add_ideas = Sphere_Fully_Dependent }
			#econ_join_sphere_JAP = yes
			if = { # Partial Japanese loss check here
				limit = {
					NOT = {
						has_country_leader = { character = SHO_Takeo_Kurosawa ruling_only = yes }
					}
				}
				hidden_effect = {
					every_owned_state = {
						add_core_of = JHR
					}
					JHR = {
						annex_country = {
							target = SHO
							transfer_troops = yes
						}
						econ_join_sphere_JAP = yes
						add_ideas = Sphere_Fully_Dependent
						JAP = { add_to_faction = JHR }
					}
				}
			}
			else_if = { # Total Japanese loss check here
				limit = {
					has_country_leader = { character = SHO_Takeo_Kurosawa ruling_only = yes }
				}
				#add_ideas = {
				#	SHO_Southern_Thorn
				#	SHO_Naval_Fortress
				#}
			}
		}
		
	}
}

country_event = { #Ahmad wins the election!
	id = sho.8
	immediate = {log = "[GetDateText]: [Root.GetName]: event sho.41"}
	title = sho.8.t
	desc = sho.8.desc
	picture = GFX_news_event_malaya_communists

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = sho.8.a
		set_politics = { ruling_party = socialist }
		promote_character = MLY_Ahmad_Boestamam
		set_popularities = {
			communist = 20
			socialist = 40
			conservative_democracy = 30
			authoritarian_democracy = 10
		}
		set_party_name = {
			ideology = conservative_democracy
			long_name = MLY_conservative_democracy_party_long_AW
			name = MLY_conservative_democracy_party_AW
		}
		set_party_name = {
			ideology = authoritarian_democracy
			long_name = MLY_authoritarian_democracy_party_long_AW
			name = MLY_authoritarian_democracy_party_AW
		}
		set_party_name = {
			ideology = communist
			long_name = MLY_communist_party_long_PKM
			name = MLY_communist_party_PKM
		}
		set_party_name = {
			ideology = socialist
			long_name = MLY_social_democracy_party_long_PKM
			name = MLY_social_democracy_party_PKM
		}
		set_party_name = {
			ideology = social_democracy
			long_name = MLY_social_democracy_party_long_PKM
			name = MLY_social_democracy_party_PKM
		}
		set_party_name = {
			ideology = despotism
			long_name = MLY_despotism_party_long_PKM
			name = MLY_despotism_party_PKM
		}
		#remove_ideas = {
		#	MLY_Fading_Front
		#	MLY_Provisional_Constitution
		#}
		MLY = {
			#add_ideas = {
			#	MLY_The_Unionist_Experiment
			#	MLY_Ashen_Pillars_of_Agongs
			#	MLY_Undermanned_Civil_Service
			#}
		}
		USA = {
			country_event = {
				id = SHOUS.1
				days = 1
			}
		}
		news_event = {
			id = WORLD.18114
			days = 1
		}
		set_cosmetic_tag = MLY_free

	}
}

country_event = { #Razak wins the election!
	id = sho.9
	immediate = {log = "[GetDateText]: [Root.GetName]: event sho.41"}
	title = sho.9.t
	desc = sho.9.desc
	picture = GFX_news_event_malaya_razak_meets_jfk

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = sho.9.a
		set_politics = { ruling_party = conservative_democracy }
		promote_character = MLY_Tun_Abdul_Razak
		set_popularities = {
			communist = 10
			socialist = 30
			conservative_democracy = 40
			authoritarian_democracy = 20
		}
		set_party_name = {
			ideology = conservative_democracy
			long_name = MLY_conservative_democracy_party_long_AW
			name = MLY_conservative_democracy_party_AW
		}
		set_party_name = {
			ideology = authoritarian_democracy
			long_name = MLY_authoritarian_democracy_party_long_AW
			name = MLY_authoritarian_democracy_party_AW
		}
		set_party_name = {
			ideology = communist
			long_name = MLY_communist_party_long_PKM
			name = MLY_communist_party_PKM
		}
		set_party_name = {
			ideology = socialist
			long_name = MLY_social_democracy_party_long_PKM
			name = MLY_social_democracy_party_PKM
		}
		set_party_name = {
			ideology = social_democracy
			long_name = MLY_social_democracy_party_long_PKM
			name = MLY_social_democracy_party_PKM
		}
		set_party_name = {
			ideology = despotism
			long_name = MLY_despotism_party_long_PKM
			name = MLY_despotism_party_PKM
		}
		#remove_ideas = {
		#	MLY_Fading_Front
		#	MLY_Provisional_Constitution
		#}
		#add_ideas = {
		#	MLY_Orang_Kita
		#	MLY_Question_of_Privilege
		#	MLY_Light_Of_Democracy
		#}
		USA = {
			country_event = {
				id = SHOUS.2
				days = 1
			}
		}
		news_event = {
			id = WORLD.18115
			days = 1
		}
		set_cosmetic_tag = MLY_free
		custom_effect_tooltip = razak_victory_tt
	}
}

country_event = { #Burnahuddin Al-Helmy wins!
	id = sho.10
	immediate = {log = "[GetDateText]: [Root.GetName]: event sho.41"}
	title = sho.10.t
	desc = sho.10.desc
	picture = GFX_news_event_malaya_collab_2

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = sho.10.a
		set_party_name = {
			ideology = socialist
			name = SHO_socialist_party_2
			long_name = SHO_socialist_party_2_long
		}
		set_party_name = {
			ideology = communist
			name = SHO_communist_party_2
			long_name = SHO_communist_party_2_long
		}
		set_party_name = {
			ideology = conservative_democracy
			name = SHO_conservative_democracy_party_2
			long_name = SHO_conservative_democracy_party_2_long
		}
		set_party_name = {
			ideology = authoritarian_democracy
			name = SHO_authoritarian_democracy_party_2
			long_name = SHO_authoritarian_democracy_party_2_long
		}
		set_party_name = {
			ideology = despotism
			name = SHO_despotism_party_2
			long_name = SHO_despotism_party_2_long
		}
		set_party_name = {
			ideology = fascism
			name = SHO_fascism_party_2
			long_name = SHO_fascism_party_2_long
		}
		set_party_name = {
			ideology = ultranationalism
			name = SHO_ultranationalism_party_2
			long_name = SHO_ultranationalism_party_2_long
		}
		set_politics = { ruling_party = socialist }
		promote_character = SHO_Burnahuddin_Al_Helmy
		set_popularities = {
			communist = 6
			socialist = 26
			conservative_democracy = 21
			authoritarian_democracy = 17
			despotism = 13
			fascism = 10
			ultranationalism = 7
		}
		#add_ideas = {
		#	SHO_Heightened_Ethnic_Tension
		#	SHO_Reforging_Indonesian_Ties
		#	SHO_The_Heartland
		#}
		remove_ideas = {
			SHO_Dai-nijyugo
			SHO_minority
			SHO_Zaibatsu
			SHO_Marai_Giyugun_Auxiliaries
		}
		JAP = {
			country_event = {
				id = SHOJAP.1
				days = 1
			}
		}
		news_event = {
			id = WORLD.18116
			days = 1
		}

	}
}

country_event = { #Dato Onn Jaafar wins!
	id = sho.11
	immediate = {log = "[GetDateText]: [Root.GetName]: event sho.41"}
	title = sho.11.t
	desc = sho.11.desc
	picture = GFX_news_event_malaya_onn_jaafar

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = sho.11.a
		set_politics = { ruling_party = conservative_democracy }
		set_party_name = {
			ideology = socialist
			name = SHO_socialist_party_2
			long_name = SHO_socialist_party_2_long
		}
		set_party_name = {
			ideology = communist
			name = SHO_communist_party_2
			long_name = SHO_communist_party_2_long
		}
		set_party_name = {
			ideology = conservative_democracy
			name = SHO_conservative_democracy_party_2
			long_name = SHO_conservative_democracy_party_2_long
		}
		set_party_name = {
			ideology = authoritarian_democracy
			name = SHO_authoritarian_democracy_party_2
			long_name = SHO_authoritarian_democracy_party_2_long
		}
		set_party_name = {
			ideology = despotism
			name = SHO_despotism_party_2
			long_name = SHO_despotism_party_2_long
		}
		set_party_name = {
			ideology = fascism
			name = SHO_fascism_party_2
			long_name = SHO_fascism_party_2_long
		}
		set_party_name = {
			ideology = ultranationalism
			name = SHO_ultranationalism_party_2
			long_name = SHO_ultranationalism_party_2_long
		}
		promote_character = MLY_Dato_Onn_Jaafar
		set_popularities = {
			communist = 6
			socialist = 21
			conservative_democracy = 26
			authoritarian_democracy = 17
			despotism = 13
			fascism = 10
			ultranationalism = 7
		}
		JAP = {
			country_event = {
				id = SHOJAP.2
				days = 1
			}
		}
		remove_ideas = {
			SHO_Dai-nijyugo
			SHO_minority
			SHO_Zaibatsu
			SHO_Marai_Giyugun_Auxiliaries
		}
		#add_ideas = {
		#	SHO_A_Broken_Party
		#	SHO_An_Ailing_Leader
		#	SHO_The_Defenders_of_Malaya
		#}
		news_event = {
			id = WORLD.18117
			days = 1
		}

		hidden_effect = {
			country_event = {
				id = sho.12
				days = 270
			}
		}
	}
}

country_event = { #Jaafar is kill long live Albar
	id = sho.12
	immediate = {log = "[GetDateText]: [Root.GetName]: event sho.41"}
	title = sho.12.t
	desc = sho.12.desc
	picture = GFX_news_event_malaya_port

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = sho.12.a
		kill_country_leader = yes
		set_politics = { ruling_party = authoritarian_democracy }
		promote_character = SHO_Syed_Jaafar_Albar
		remove_ideas = {
			SHO_Dai-nijyugo
			SHO_minority
			SHO_Zaibatsu
			SHO_Marai_Giyugun_Auxiliaries
		}
		set_popularities = {
			communist = 6
			socialist = 21
			conservative_democracy = 17
			authoritarian_democracy = 26
			despotism = 13
			fascism = 10
			ultranationalism = 7
		}
		#add_ideas = {
		#	SHO_Reeling_the_party_in
		#	SHO_Firebrand_Agenda
		#	SHO_Greater_Ambitions
		#}
		JAP = {
			country_event = {
				id = SHOJAP.3
				days = 1
			}
		}
		news_event = {
			id = WORLD.18118
			days = 1
		}

	}
}

country_event = { #Malaya ceasefire - Askar Wataniah sweeps over existing nationalistic parties.
	id = sho.13
	immediate = {log = "[GetDateText]: [Root.GetName]: event sho.41"}
	title = sho.13.t
	desc = sho.13.desc
	picture = GFX_news_event_malaya_collab_1

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = sho.13.a
		set_politics = { ruling_party = despotism }
		promote_character = MLY_Yeop_Mahidin
		set_popularities = {
			communist = 10
			authoritarian_democracy = 20
			despotism = 70
		}
		remove_ideas = {
			MLY_Dismal_Infrastructure
			MLY_The_UMAJF
			MLY_driven_to_the_countryside
			MLY_operation_nassau
		}
		set_party_name = {
			ideology = communist
			long_name = MLY_communist_party_long_PKM
			name = MLY_communist_party_PKM
		}
		set_party_name = {
			ideology = socialist
			long_name = MLY_socialist_party_long_PKM
			name = MLY_socialist_party_PKM
		}
		set_party_name = {
			ideology = social_democracy
			long_name = MLY_social_democracy_party_long_PKM
			name = MLY_social_democracy_party_PKM
		}
		set_party_name = {
			ideology = despotism
			long_name = MLY_despotism_party_long_PKM
			name = MLY_despotism_party_PKM
		}
		#add_ideas = {
		#	MLY_Wataniah_Junta
		#	MLY_Fragile_Administration
		#	MLY_An_Unfixable_Schism
		#}
		USA = {
			country_event = {
				id = SHOUS.3
				days = 1
			}
			every_owned_state = {
				limit = { can_have_elections_in_state = yes }
				add_to_variable = { NPP_Y_bonus_popularity = 0.002 }
			}
		}
		country_event = {
			id = sho.131
			days = 360
		}
		news_event = {
			id = WORLD.18119
			days = 1
		}
		drop_cosmetic_tag = yes
		set_cosmetic_tag = MLY_AW

	}
}

country_event = { #Malaya ceasefire - End of military rule
	id = sho.131
	immediate = {log = "[GetDateText]: [Root.GetName]: event sho.41"}
	title = sho.131.t
	desc = sho.131.desc
	picture = GFX_news_event_malaya_collab_1

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = sho.131.a
		set_politics = { ruling_party = authoritarian_democracy }
		promote_character = MLY_Tun_Hussein_Onn
		set_popularities = {
			conservative_democracy = 40
			authoritarian_democracy = 20
			socialist = 30
			despotism = 10
		}
		#remove_ideas = {
		#	MLY_Wataniah_Junta
		#	MLY_Fragile_Administration
		#	MLY_An_Unfixable_Schism
		#}
		set_party_name = {
			ideology = conservative_democracy
			long_name = MLY_conservative_democracy_party_long_AW
			name = MLY_conservative_democracy_party_AW
		}
		set_party_name = {
			ideology = authoritarian_democracy
			long_name = MLY_authoritarian_democracy_party_long_AW
			name = MLY_authoritarian_democracy_party_AW
		}
		news_event = {
			id = WORLD.18211
			days = 1
		}
		drop_cosmetic_tag = yes
		set_cosmetic_tag = MLY_AW

	}
}

country_event = { #Malaya ceasefire - The Chairman stays.
	id = sho.14
	immediate = {log = "[GetDateText]: [Root.GetName]: event sho.41"}
	title = sho.14.t
	desc = sho.14.desc
	picture = GFX_report_event_generic_military_parade

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = sho.14.a
		hidden_effect = {
			remove_country_leader_role = {
				character = MLY_chin_peng
				ideology = communist_bukharinism_subtype
			  }
			add_country_leader_role = {
				character  = MLY_chin_peng
				promote_leader = yes
				country_leader={
					desc="POLITICS_CHIN_PENG_POSTWAR"
					ideology=communist_bukharinism_subtype
					expire="1989.1.1.1"
				}
			}
			set_popularities = {
				communist = 70
				socialist = 20
				despotism = 10
			}
			remove_ideas = {
				MLY_Dismal_Infrastructure
				MLY_The_UMAJF
				MLY_driven_to_the_countryside
				MLY_operation_nassau
			}
			country_event = {
				id = sho.141
				days = 360
			}
			set_party_name = {
				ideology = communist
				long_name = MLY_communist_party_long_PKM
				name = MLY_communist_party_PKM
			}
			set_party_name = {
				ideology = socialist
				long_name = MLY_socialist_party_long_PKM
				name = MLY_socialist_party_PKM
			}
			set_party_name = {
				ideology = social_democracy
				long_name = MLY_social_democracy_party_long_PKM
				name = MLY_social_democracy_party_PKM
			}
			set_party_name = {
				ideology = despotism
				long_name = MLY_despotism_party_long_PKM
				name = MLY_despotism_party_PKM
			}
		}
		set_politics = { ruling_party = communist }
		set_cosmetic_tag = MLY_PKM
		USA = {
			country_event = {
				id = SHOUS.4
				days = 1
			}
			every_owned_state = {
				limit = { can_have_elections_in_state = yes }
				add_to_variable = { NPP_L_bonus_popularity = 0.002 }
			}
		}
		#add_ideas = {
		#	MLY_The_UMAJF_Again
		#	MLY_Fortress_Malaya
		#	MLY_Revolutionary_Emergency_Decrees
		#}
		news_event = {
			id = WORLD.18120
			days = 1
		}

	}
}

country_event = { #Chin Peng turns popular front
	id = sho.141
	immediate = {log = "[GetDateText]: [Root.GetName]: event sho.141"}
	title = sho.141.t
	desc = sho.141.desc
	picture = GFX_report_event_generic_military_parade

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = sho.14.a
		hidden_effect = {
			set_cosmetic_tag = MLY_BRM
			promote_character = MLY_chin_peng
			MLY_chin_peng = {
				promote_character = {
					ideology = socialist_revolutionary_frontism_subtype
				}
			}
			
			set_party_name = {
				ideology = communist
				long_name = MLY_communist_party_long_BRM
				name = MLY_communist_party_BRM
			}
			set_party_name = {
				ideology = socialist
				long_name = MLY_socialist_party_long_BRM
				name = MLY_socialist_party_BRM
			}
			set_party_name = {
				ideology = social_democracy
				long_name = MLY_social_democracy_party_long_BRM
				name = MLY_social_democracy_party_BRM
			}
			set_popularities = {
				communist = 30
				socialist = 50
				social_democracy = 20
			}
			
			#remove_ideas = {
			#	MLY_The_UMAJF_Again
			#	MLY_Fortress_Malaya
			#	MLY_Revolutionary_Emergency_Decrees
			#}

		}
		news_event = {
			id = WORLD.18210
			days = 1
		}
		set_politics = { ruling_party = socialist }

	}
}

country_event = { #Malaya ceasefire - Syed Jaafar Albar takes helm.
	id = sho.15
	immediate = {log = "[GetDateText]: [Root.GetName]: event sho.41"}
	title = sho.15.t
	desc = sho.15.desc
	picture = GFX_news_event_malaya_port

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = sho.15.a
		set_politics = { ruling_party = authoritarian_democracy }
		promote_character = SHO_Syed_Jaafar_Albar
		set_popularities = {
			communist = 6
			socialist = 21
			conservative_democracy = 17
			authoritarian_democracy = 26
			despotism = 13
			fascism = 10
			ultranationalism = 7
		}
		#add_ideas = {
		#	SHO_Reeling_the_party_in
		#	SHO_Firebrand_Agenda
		#	SHO_Greater_Ambitions
		#}
		JAP = {
			country_event = {
				id = SHOJAP.4
				days = 1
			}
		}
		news_event = {
			id = WORLD.18121
			days = 1
		}

	}
}

country_event = { #Johor rejoins Malaya
	id = sho.30
	immediate = {log = "[GetDateText]: [Root.GetName]: event sho.30"}
	title = sho.30.t
	desc = sho.30.desc
	picture = GFX_news_event_malaya_port

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = sho.30.a
		MLY = {
			add_state_core = 806
			annex_country = {
				target = JHR
				transfer_troops = no
			}

		}
		SHO = {
			transfer_state = 751
			set_politics = {
				ruling_party = despotism
			}
			set_party_name = {
				ideology = despotism
				long_name = SHO_despotism_party_long_SG
				name = SHO_despotism_party_SG
			}
			set_party_name = {
				ideology = ultranationalism
				long_name = SHO_ultranationalism_party_long_SG
				name = SHO_ultranationalism_party_SG
			}
			set_popularities = {
				despotism = 80
				ultranationalism = 20
			}
			promote_character = SHO_yamamoto_moichiro
			set_cosmetic_tag = SHO_Singapore
		}
		news_event = {
			id = WORLD.18230
			days = 1
		}

	}
}

country_event = { # You held the capital for 60 days, you've won
	id = sho.16
	immediate = { log = "[GetDateText]: [Root.GetName]: event sho.16" }
	title = sho.16.t
	desc = sho.16.desc
	picture = GFX_news_event_malaya_port

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = sho.16.a
		MLY = {
			annex_country = {
				target = SHO
				transfer_troops = no
			}
			save_global_event_target_as = winning_country
		}
		SHO = {
			transfer_state = 751
			set_politics = {
				ruling_party = despotism
			}
			set_party_name = {
				ideology = despotism
				long_name = SHO_despotism_party_long_SG
				name = SHO_despotism_party_SG
			}
			set_party_name = {
				ideology = ultranationalism
				long_name = SHO_ultranationalism_party_long_SG
				name = SHO_ultranationalism_party_SG
			}
			set_popularities = {
				despotism = 80
				ultranationalism = 20
			}
			promote_character = SHO_Takeo_Kurosawa
			set_cosmetic_tag = SHO_Singapore
			save_global_event_target_as = losing_country
		}
		set_global_flag = war_won
		set_global_flag = show_peace_popup_alert
		add_to_variable = { global.peace_popup_dirty = 1 }
		USA = {
			country_event = { id = sho.4 days = 2 }
		}
		JAP = {
			country_event = { id = sho.51 }
		}
		SHO_war_end_effect = yes
	}
}

country_event = { # Yasuda Crisis popped, check time
	id = sho.17
	title = sho.17.t
	desc = sho.17.desc
	immediate = { log = "[GetDateText]: [Root.GetName]: event sho.17" }
	picture = GFX_news_event_malaya_port

	is_triggered_only = yes
	fire_only_once = yes
	trigger = {
		has_global_flag = MLY_WAR_HAPPENING
		JAP = {
			has_country_flag = JAP_Economic_Wars
		}
	}
	option = {
		name = sho.17.a
		hidden_effect = {
			if = { # Total USA victory
				limit = {
					SHO = {
						all_owned_state = {
							OR = {
								is_fully_controlled_by = MLY
								state = 751
							}
						}
					}
				}
				MLY = {
					annex_country = {
						target = SHO
						transfer_troops = no
					}
					save_global_event_target_as = winning_country
				}
				SHO = {
					transfer_state = 751
					set_politics = {
						ruling_party = despotism
					}
					set_party_name = {
						ideology = despotism
						long_name = SHO_despotism_party_long_SG
						name = SHO_despotism_party_SG
					}
					set_party_name = {
						ideology = ultranationalism
						long_name = SHO_ultranationalism_party_long_SG
						name = SHO_ultranationalism_party_SG
					}
					set_popularities = {
						despotism = 80
						ultranationalism = 20
					}
					promote_character = SHO_Takeo_Kurosawa
					set_cosmetic_tag = SHO_Singapore
					save_global_event_target_as = losing_country
				}
				set_global_flag = war_won
				set_global_flag = show_peace_popup_alert
				add_to_variable = { global.peace_popup_dirty = 1 }
				USA = {
					country_event = { id = sho.4 days = 2 }
				}
				JAP = {
					country_event = { id = sho.51 }
				}
			}
			else_if = { # Partial US victory, partial Japanese loss
				limit = {
					MLY = {
						num_of_controlled_states > 4
					}
				}
				MLY = {
					white_peace = SHO
					transfer_state = 336
					transfer_state = 1453
					transfer_state = 1454
					transfer_state = 805
					transfer_state = 804
				}
				SHO = {
					set_country_flag = SHO_loosing_ceasefire
				}
				USA = {
					country_event = { id = sho.4 days = 2 }
					every_owned_state = {
						limit = { can_have_elections_in_state = yes }
						if = {
							limit = {
								OR = {
									check_variable = { nationality = 82 } #New England
									check_variable = { nationality = 85 } #Steel Belt
								}
							}
							add_to_variable = { NPP_C_bonus_popularity = 0.01 }
						}
						else = {
							add_to_variable = { NPP_C_bonus_popularity = 0.006 }
						}
					}
					every_owned_state = {
						limit = { can_have_elections_in_state = yes }
						if = {
							limit = {
								OR = {
									check_variable = { nationality = 83 } #Dixie
									check_variable = { nationality = 84 } #African American
									check_variable = { nationality = 86 } #Southwestern
								}
							}
							add_to_variable = { NPP_FR_bonus_popularity = 0.01 }
						}
						else = {
							add_to_variable = { NPP_FR_bonus_popularity = 0.006 }
						}
					}
				}
				JAP = {
					country_event = { id = sho.51 days = 2 }
				}
			}
			else = { # Partial US loss, partial Japanese victory
				SHO = {
					white_peace = MLY
				}
				MLY = {
					random_list = {
						50 = {
							country_event = {
								id = sho.13
							}
						}
						50 = {
							country_event = {
								id = sho.14
							}
						}
					}
					set_country_flag = MLY_loosing_ceasefire
				}
				USA = {
					country_event = { id = sho.41 days = 2 }
						every_owned_state = {
							limit = { can_have_elections_in_state = yes }
							if = {
								limit = {
									OR = {
										check_variable = { nationality = 82 } #New England
										check_variable = { nationality = 85 } #Steel Belt
									}
								}
								add_to_variable = { NPP_L_bonus_popularity = 0.005 }
							}
							else = {
								add_to_variable = { NPP_L_bonus_popularity = 0.003 }
							}
						}
						every_owned_state = {
							limit = { can_have_elections_in_state = yes }
							if = {
								limit = {
									OR = {
										check_variable = { nationality = 83 } #Dixie
										check_variable = { nationality = 84 } #African American
										check_variable = { nationality = 86 } #Southwestern
									}
								}
								add_to_variable = { NPP_Y_bonus_popularity = 0.005 }
							}
							else = {
								add_to_variable = { NPP_Y_bonus_popularity = 0.003 }
							}
						}
				}
				JAP = {
					country_event = { id = sho.5 days = 2 }
				}
			}
		}
		SHO_war_end_effect = yes
		custom_effect_tooltip = SHO_war_comes_to_an_end
	}
}

country_event = { # Boestamam won. Partial Domino Operations it is.
	id = SHOUS.1
	immediate = {log = "[GetDateText]: [Root.GetName]: event SHOUSA.1"}
	title = SHOUS.1.t
	desc = SHOUS.1.desc
	picture = GFX_report_event_generic_military_parade

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = SHOUS.1.a
		custom_effect_tooltip = USA_NPP_C_popularity_grows_low
		add_political_power = 50
		hidden_effect = {
			every_owned_state = {
				limit = {
					OR = {
						check_variable = { nationality = 82 } #New England
						check_variable = { nationality = 85 } #Steel Belt
						check_variable = { nationality = 88 } #Pacific
					}
				}
				add_to_variable = { NPP_C_bonus_popularity = 0.03 }
			}
		}
	}
}

country_event = { # US reaction to Tun Abdul Razak being elected
	id = SHOUS.2
	immediate = {log = "[GetDateText]: [Root.GetName]: event SHOUSA.1"}
	title = SHOUS.2.t
	desc = SHOUS.2.desc
	picture = GFX_news_event_malaya_razak_meets_jfk

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = SHOUS.2.a
		add_political_power = 50
		MLY = {
			econ_join_sphere_USA = yes
			add_ideas = OFN_Observer
			set_cosmetic_tag = MLY_OFN_Aligned
		}
		if = {
			limit = { USA_RD_ruling_party = yes }
			custom_effect_tooltip = USA_add_RD_popularity_low
			hidden_effect = {
				every_owned_state = {
					limit = { can_have_elections_in_state = yes }
					add_to_variable = { RD_popularity = 00.02 }
				}
			}
		}
		else = {
			custom_effect_tooltip = USA_add_NPP_popularity_low
			hidden_effect = {
				every_owned_state = {
					limit = { can_have_elections_in_state = yes }
					add_to_variable = { NPP_popularity = 00.02 }
				}
			}
		}
	}
}

country_event = { # US reaction to Wataniah winning the struggle.
	id = SHOUS.3
	immediate = {log = "[GetDateText]: [Root.GetName]: event SHOUSA.1"}
	title = SHOUS.3.t
	desc = SHOUS.3.desc
	picture = GFX_news_event_malaya_collab_1

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = SHOUS.3.a
		add_political_power = 50
		MLY = {
			econ_join_sphere_USA = yes
		}
		if = {
			limit = { USA_RD_ruling_party = yes }
			custom_effect_tooltip = USA_add_RD_popularity_low
			hidden_effect = {
				every_owned_state = {
					limit = { can_have_elections_in_state = yes }
					add_to_variable = { RD_popularity = 00.02 }
				}
			}
		}
		else = {
			custom_effect_tooltip = USA_add_NPP_popularity_low
			hidden_effect = {
				every_owned_state = {
					limit = { can_have_elections_in_state = yes }
					add_to_variable = { NPP_popularity = 00.02 }
				}
			}
		}
	}
}

country_event = { # US reaction to Chin Peng staying.
	id = SHOUS.4
	immediate = {log = "[GetDateText]: [Root.GetName]: event SHOUSA.1"}
	title = SHOUS.4.t
	desc = SHOUS.4.desc
	picture = GFX_news_event_malaya_communists

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = SHOUS.4.a
		add_political_power = 50
	}
}

country_event = { # Japan reaction to Al winning
	id = SHOJAP.1
	immediate = {log = "[GetDateText]: [Root.GetName]: event SHOJAPA.1"}
	title = SHOJAP.1.t
	desc = SHOJAP.1.desc
	picture = GFX_news_event_malaya_collab_1

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = SHOJAP.1.a
	}
}
country_event = { # Japan reaction to Dato Onn Jaafar winning
	id = SHOJAP.2
	immediate = {log = "[GetDateText]: [Root.GetName]: event SHOJAPA.1"}
	title = SHOJAP.2.t
	desc = SHOJAP.2.desc
	picture = GFX_news_event_malaya_onn_jaafar

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = SHOJAP.2.a
		add_political_power = 50
		custom_effect_tooltip = jaafar_victory_tt
	}
}
country_event = { # Japan reaction to Jaafar dying, Jaafar takes over
	id = SHOJAP.3
	immediate = {log = "[GetDateText]: [Root.GetName]: event SHOJAPA.1"}
	title = SHOJAP.3.t
	desc = SHOJAP.3.desc
	picture = GFX_news_event_malaya_railway

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = SHOJAP.3.a
		add_political_power = 50
	}
}
country_event = { # Japan reaction to Jaafar taking after ceasefire
	id = SHOJAP.4
	immediate = {log = "[GetDateText]: [Root.GetName]: event SHOJAPA.1"}
	title = SHOJAP.4.t
	desc = SHOJAP.4.desc
	picture = GFX_news_event_malaya_collab_2

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = SHOJAP.4.a
	}
}

country_event = { # Pan Asianism stays, now to make sure Dato Onn Jaafar wins
	id = SHOJAP.5
	immediate = {log = "[GetDateText]: [Root.GetName]: event SHOJAPA.1"}
	title = SHOJAP.5.t
	desc = SHOJAP.5.desc
	picture = GFX_news_event_malaya_collab_2

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = SHOJAP.5.a
		#set_variable = { Indonesia_Stability = 50 }
		#set_variable = { Phillipines_Stability = 10 }
		#set_variable = { NorBor_Stability = 70 }
		#set_variable = { Malayan_Stability = 20 }
		#custom_effect_tooltip = TNO_SHO_operations_tt
		#add_political_power = 50
		#TNO_fopo_add_malayan_reconstruction_tab = yes
		#SHO = {
			#set_country_flag = SHO_Rebuilding_Operation
		#}
		hidden_effect = {
			news_event = WORLD.18126
		}

	}

}

country_event = { # Phillipines Operations
	id = SHOJAP.6
	immediate = {log = "[GetDateText]: [Root.GetName]: event SHOJAPA.1"}
	title = SHOJAP.6.t
	desc = SHOJAP.6.desc
	picture = GFX_news_event_malaya_collab_2

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = SHOJAP.6.a
		add_political_power = 50
	}

}

country_event = { # Indonesia Operations
	id = SHOJAP.7
	immediate = {log = "[GetDateText]: [Root.GetName]: event SHOJAPA.1"}
	title = SHOJAP.7.t
	desc = SHOJAP.7.desc
	picture = GFX_news_event_malaya_collab_2

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = SHOJAP.7.a
		add_political_power = 50
	}

}

country_event = { # Time to rebuild Malaya from the ground up
	id = SHOJAP.8
	immediate = {log = "[GetDateText]: [Root.GetName]: event SHOJAPA.1"}
	title = SHOJAP.8.t
	desc = SHOJAP.8.desc
	picture = GFX_news_event_malaya_collab_2

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = SHOJAP.8.a
		add_political_power = 50
	}
}

country_event = { # rip japan
	id = SHOJAP.9
	immediate = {log = "[GetDateText]: [Root.GetName]: event SHOJAPA.9"}
	title = SHOJAP.9.t
	desc = SHOJAP.9.desc
	picture = GFX_news_event_malaya_collab_2

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = SHOJAP.9.a
	}
}

country_event = {
	id = SHOUS.5
	immediate = { log = "[GetDateText]: [Root.GetName]: event SHOUS.5" }
	title = SHOUS.5.t
	desc = SHOUS.5.desc
	picture = GFX_news_event_malaya_razak_meets_jfk

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = SHOUS.5.a
		add_political_power = 15
		custom_effect_tooltip = razak_victory_tt
	}
}

country_event = {
	id = SHOUS.6
	immediate = { log = "[GetDateText]: [Root.GetName]: event SHOUS.5" }
	title = SHOUS.6.t
	desc = SHOUS.6.desc
	picture = GFX_news_event_malaya_communists

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = SHOUS.6.a
		add_political_power = 15
		custom_effect_tooltip = Boestamam_victory_tt
	}
}

country_event = {
	id = SHOUS.7
	immediate = { log = "[GetDateText]: [Root.GetName]: event SHOUS.5" }
	title = SHOUS.7.t
	desc = SHOUS.7.desc
	picture = GFX_news_event_malaya_burning_building

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = SHOUS.7.a
		add_political_power = 15
		hidden_effect = {
			news_event = WORLD.18112
		}
	}
}

country_event = {
	id = SHOUS.8
	immediate = { log = "[GetDateText]: [Root.GetName]: event SHOUS.5" }
	title = SHOUS.8.t
	desc = SHOUS.8.desc
	picture = GFX_news_event_malaya_burning_building

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = SHOUS.8.a
		add_political_power = 15
		hidden_effect = {
			news_event = WORLD.18112
		}
	}
}

country_event = {
	id = SHOUS.9
	immediate = { log = "[GetDateText]: [Root.GetName]: event SHOUS.5" }
	title = SHOUS.9.t
	desc = SHOUS.9.desc
	picture = GFX_report_event_generic_military_parade

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = SHOUS.9.a
		add_political_power = 15
		hidden_effect = {
			news_event = WORLD.18112
		}
	}
}

country_event = {
	id = SHOUS.10
	immediate = { log = "[GetDateText]: [Root.GetName]: event SHOUS.5" }
	title = SHOUS.10.t
	desc = SHOUS.10.desc
	picture = GFX_report_event_generic_military_parade

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = SHOUS.10.a
		add_political_power = 15
	}
}

##################### MECHANICAL CHECKS ########################################

country_event = {
	id = sho.18
	immediate = {log = "[GetDateText]: [Root.GetName]: event sho.18"}
	is_triggered_only = yes
	trigger = {
		has_global_flag = MLY_WAR_HAPPENING
		NOT = {
			check_variable = { MLY_check_already_happened = 1 }
		}
	}
	hidden = yes

	option = {
		if = {
			limit = {
				MLY = {
					OR = {
						controls_state = 336
						controls_state = 751
					}
				}
			}
			USA = {
				country_event = {
					id = sho.3
					hours = 1
				}
			}
			set_variable = { MLY_check_already_happened = 1 }
		}
		else = {
			country_event = {
				id = sho.18
				days = 1
			}
		}
	}
}

country_event = { #Event that runs the winner
	id = sho.19
	immediate = {log = "[GetDateText]: [Root.GetName]: event sho.19"}
	title = sho.19.t
	desc = sho.19.desc
	picture = GFX_report_event_generic_military_parade
	fire_only_once = yes
	is_triggered_only = yes
	
	option = {
		name = sho.19.a #Razak or Ahmad
		MLY = {
			drop_cosmetic_tag = yes
			random_list = {
				35 = {
					country_event = sho.9
					
					modifier = {
						factor = 0
						has_game_rule = { rule = MLY_PATH option =  MLY_PATH_SOCIALISM }
					}
				
				}
				65 = {
					country_event = sho.8
					
					modifier = {
						factor = 0
						has_game_rule = { rule = MLY_PATH option =  MLY_PATH_CONSERVATISM }
					}					
					
					modifier = {
						add = -20
						check_variable = { USA.TNO_razak_election_weight > 0 }
						has_game_rule = { rule = MLY_PATH option = DEFAULT }
					}
					modifier = {
						add = -20
						check_variable = { USA.TNO_razak_election_weight > 1 }
						has_game_rule = { rule = MLY_PATH option = DEFAULT }
					}
					modifier = {
						add = -25
						check_variable = { USA.TNO_razak_election_weight > 2 }
						has_game_rule = { rule = MLY_PATH option = DEFAULT }
					}
				}
			}
		}
	}
}

country_event = { #Event that runs the winner
	id = sho.20
	immediate = {log = "[GetDateText]: [Root.GetName]: event sho.20"}
	title = sho.20.t
	desc = sho.20.desc
	picture = GFX_report_event_generic_military_parade
	fire_only_once = yes
	is_triggered_only = yes
	
	option = {
		name = sho.20.a
		SHO = {
			drop_cosmetic_tag = yes
			if = {
				limit = {
					MLY = {
						has_country_flag = MLY_loosing_ceasefire
					}
				}
				country_event = sho.15
			}
			else = {
				random_list = {
					50 = {
						country_event = sho.10
						modifier = {
							factor = 0
							has_country_flag = SHO_Onn_will_win #Postponed to ST
						}
						modifier = {
							factor = 0
					        has_game_rule = { rule = SHO_PATH option =  SHO_PATH_CD }
 					    }
					}   
					50 = {
						country_event = sho.11
						modifier = {
						    factor = 0
							has_game_rule = { rule = SHO_PATH option =  SHO_PATH_SOCIALISM }
					}   }
				}
			}
			set_country_flag = SHO_elections_ran
		}
	}
}

country_event = { #Johor skeleton reunification
	id = sho.21
	immediate = {log = "[GetDateText]: [Root.GetName]: event sho.21"}
	title = sho.21.t
	desc = sho.21.desc
	picture = GFX_report_event_generic_military_parade
	fire_only_once = yes
	is_triggered_only = yes

	trigger = { country_exists = JHR }
	
	option = {
		name = sho.21.a
		JHR = {
			random_list = {
				40 = { # Johor rejoins
					JAP = {
						country_event = {
							id = SHOJAP.9
							days = 3
						}
					}
					country_event = {
						id = sho.30
						days = 14
					}
				}
				60 = { # lol oil crisis happens
					set_country_flag = JHR_remains
					hidden_effect = {
						country_event = {
							id = sho.30
							days = 334
						}
					}
				}
			}
		}
	}
}

country_event = { #Johor skeleton reunification in oil crisis
	id = sho.22
	immediate = {log = "[GetDateText]: [Root.GetName]: event sho.21"}
	title = sho.22.t
	desc = sho.22.desc
	picture = GFX_report_event_generic_military_parade
	fire_only_once = yes
	is_triggered_only = yes
	
	option = {
		name = sho.22.a
		if = {
			limit = {
				JHR = {
					exists = yes
					has_country_flag = JHR_remains
				}
			}
			JHR = {
				JAP = {
					country_event = {
						id = SHOJAP.9
						days = 3
					}
				}
				country_event = {
					id = sho.30
					days = 14
				}
			}
		}
	}
}

############################ CHECKS END HERE ##################################

