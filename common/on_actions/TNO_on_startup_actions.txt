###VARIABLE DEFINITIONS

on_actions = {
	on_startup = {
		effect = {
			ZZZ = {
				country_event = economy.0

				# Set up month counter for economy graph
				set_variable = { econ_graph_month = 25 }

				#Alex's inflation cycling
				set_variable = { xcycling = 0 }
				set_variable = { ycycling = 0.125 }

				ESPIONAGE_initialize_variables = yes

				set_variable = { month_counter = 1 }
				set_variable = { global.TNO_World_Tension = 0 }
			}
			
			## Cold War GUI Stuff
			# Starting superpowers
			set_global_flag = skip_super_sorting
			ZZZ = { econ_recompile_all_spheres = yes }
			USA = {
				set_superpower = yes
				add_dynamic_modifier = { modifier = superpower_jap_usa_tension_modifier }
				add_dynamic_modifier = { modifier = superpower_ger_usa_tension_modifier }
			}
			JAP = {
				set_superpower = yes
				add_dynamic_modifier = { modifier = superpower_jap_usa_tension_modifier }
				add_dynamic_modifier = { modifier = superpower_ger_jap_tension_modifier }
			}
			GER = {
				set_superpower = yes
				add_dynamic_modifier = { modifier = superpower_ger_usa_tension_modifier }
				add_dynamic_modifier = { modifier = superpower_ger_jap_tension_modifier }
			}
			ZZZ = { Cold_War_GUI_Sort_Superpowers = yes }
			clr_global_flag = skip_super_sorting

			var:global.TNO_Superpowers^0 = {
				add_to_variable = { TNO_Cold_War_GUI_Rankings_Tab_Superpower_Entries_Array_Frame = 1 }
				save_global_event_target_as = Cold_War_GUI_Selected_Superpower
			}
			
			# Sea Zone setup
			GER = {
				add_to_array = { CW_SeaZone_Status = 0 } # 0; East Pacific
				add_to_array = { CW_SeaZone_Status = 0 } # 1; West Pacific
				add_to_array = { CW_SeaZone_Status = 1 } # 2; South Atlantic
				add_to_array = { CW_SeaZone_Status = 1 } # 3; North Atlantic
				add_to_array = { CW_SeaZone_Status = 1 } # 4; North Sea
				add_to_array = { CW_SeaZone_Status = 0 } # 5; Mediterranean
				add_to_array = { CW_SeaZone_Status = 1 } # 6; Indian Ocean
				Cold_War_GUI_PowerProjection_CalculateBonuses = yes

				# This only exists because scripted loc is a fuck
				add_to_array = { global.PowerProjection_Tags = THIS.id }
				add_to_array = { global.PowerProjection_X = 277 }
				add_to_array = { global.PowerProjection_Y = 48 }
			}
			USA = {
				add_to_array = { CW_SeaZone_Status = 1 } # 0; East Pacific
				add_to_array = { CW_SeaZone_Status = 0 } # 1; West Pacific
				add_to_array = { CW_SeaZone_Status = 1 } # 2; South Atlantic
				add_to_array = { CW_SeaZone_Status = 1 } # 3; North Atlantic
				add_to_array = { CW_SeaZone_Status = 0 } # 4; North Sea
				add_to_array = { CW_SeaZone_Status = 0 } # 5; Mediterranean
				add_to_array = { CW_SeaZone_Status = 1 } # 6; Indian Ocean
				Cold_War_GUI_PowerProjection_CalculateBonuses = yes

				# This only exists because scripted loc is a fuck
				add_to_array = { global.PowerProjection_Tags = THIS.id }
				add_to_array = { global.PowerProjection_X = 9 }
				add_to_array = { global.PowerProjection_Y = 8 }
			}
			JAP = {
				add_to_array = { CW_SeaZone_Status = 1 } # 0; East Pacific
				add_to_array = { CW_SeaZone_Status = 1 } # 1; West Pacific
				add_to_array = { CW_SeaZone_Status = 0 } # 2; South Atlantic
				add_to_array = { CW_SeaZone_Status = 0 } # 3; North Atlantic
				add_to_array = { CW_SeaZone_Status = 0 } # 4; North Sea
				add_to_array = { CW_SeaZone_Status = 0 } # 5; Mediterranean
				add_to_array = { CW_SeaZone_Status = 1 } # 6; Indian Ocean
				Cold_War_GUI_PowerProjection_CalculateBonuses = yes

				# This only exists because scripted loc is a fuck
				add_to_array = { global.PowerProjection_Tags = THIS.id }
				add_to_array = { global.PowerProjection_X = 447 }
				add_to_array = { global.PowerProjection_Y = 49 }
			}
			ITA = {
				add_to_array = { CW_SeaZone_Status = 0 } # 0; East Pacific
				add_to_array = { CW_SeaZone_Status = 0 } # 1; West Pacific
				add_to_array = { CW_SeaZone_Status = 0 } # 2; South Atlantic
				add_to_array = { CW_SeaZone_Status = 0 } # 3; North Atlantic
				add_to_array = { CW_SeaZone_Status = 0 } # 4; North Sea
				add_to_array = { CW_SeaZone_Status = 1 } # 5; Mediterranean
				add_to_array = { CW_SeaZone_Status = 0 } # 6; Indian Ocean

				# This only exists because scripted loc is a fuck
				add_to_array = { global.PowerProjection_Tags = THIS.id }
				add_to_array = { global.PowerProjection_X = 277 }
				add_to_array = { global.PowerProjection_Y = 63 }
			}
			every_country = { set_variable = { Cold_War_GUI_SeaZone_SelectedSuperpower = var:global.TNO_Superpowers^0 } }
			
			# Hawaiian Missile Crisis victory section for the Cold War GUI
			USA = {
				set_temp_variable = { Victory_ID = 1 }
				Cold_War_GUI_AddVictory = yes
			}
			JAP = {
				set_temp_variable = { Victory_ID = 1 }
				Cold_War_GUI_AddVictory = yes
			}

			# Starting nuclear stockpiles for each of the three superpowers
			USA = {
				set_variable = { nuclear_stockpile = 12382 }
				set_variable = { nuclear_stockpile_k = nuclear_stockpile }
				divide_variable = { nuclear_stockpile_k = 1000 }
				set_variable = { nuclear_global_coverage = 0.33 }
				calculate_strike_capability = yes
			}
			GER = {
				set_variable = { nuclear_stockpile = 20102 }
				set_variable = { nuclear_stockpile_k = nuclear_stockpile }
				divide_variable = { nuclear_stockpile_k = 1000 }
				set_variable = { nuclear_global_coverage = 0.33 }
				calculate_strike_capability = yes
			}
			JAP = {
				set_variable = { nuclear_stockpile = 8147 }
				set_variable = { nuclear_stockpile_k = nuclear_stockpile }
				divide_variable = { nuclear_stockpile_k = 1000 }
				set_variable = { nuclear_global_coverage = 0.33 }
				calculate_strike_capability = yes
			}

			#every_country = {
			#	if = {
			#		limit = { check_variable = { modifier@research_speed_factor < 0 } }
			#		adjust_research_modifier = yes
			#	}
			#	if = {
			#		limit = { check_variable = { modifier@industrial_capacity_factory < 0 } }
			#		adjust_factory_output_modifier = yes
			#	}
			#	if = {
			#		limit = { check_variable = { modifier@industrial_capacity_dockyard < 0 } }
			#		adjust_dockyard_output_modifier = yes
			#	}
			#	if = {
			#		limit = { check_variable = { modifier@production_speed_buildings_factor < 0 } }
			#		adjust_construction_speed_modifier = yes
			#	}
			#	if = {
			#		limit = { check_variable = { modifier@production_factory_max_efficiency_factor < 0.05 } }
			#		adjust_efficiency_cap_modifier = yes
			#	}
			#}

			ARG = {
				country_event = { id = ARG.148 days = 178 }
			}

			#PAR = {
			#	country_event = { id = PAR_scripted.8 days = 1800 }
			#}

			ELS = {
				country_event = { id = ELS_scripted.1 days = 256 }
				country_event = { id = ELS_scripted.2 days = 1850 }
				country_event = { id = ELS_scripted.8 days = 3660 }
			}

			HON = {
				country_event = { id = HON_scripted.1 days = 1983 }
			}

			GUA = {
				country_event = { id = GUA_scripted.1 days = 438 }
			}

			MCW = {
				MCW_dynamic_modifiers_setup = yes
			}
			# Faction embargoes
			set_global_flag = ofn_cps_embargo
			set_global_flag = ofn_pakt_embargo
			set_global_flag = pakt_cps_embargo

			for_each_scope_loop = {
				array = USA.faction_members
				for_each_scope_loop = {
					array = GER.faction_members
					set_variable = { trade_opinion_embargo@PREV = 1 }
					set_variable = { PREV.trade_opinion_embargo@THIS = 1 }
				}
				for_each_scope_loop = {
					array = JAP.faction_members
					set_variable = { trade_opinion_embargo@PREV = 1 }
					set_variable = { PREV.trade_opinion_embargo@THIS = 1 }
				}
			}
			for_each_scope_loop = {
				array = GER.faction_members
				for_each_scope_loop = {
					array = JAP.faction_members
					set_variable = { trade_opinion_embargo@PREV = 1 }
					set_variable = { PREV.trade_opinion_embargo@THIS = 1 }
				}
				for_each_scope_loop = {
					array = ITA.faction_members
					set_variable = { trade_opinion_embargo@PREV = 1 }
					set_variable = { PREV.trade_opinion_embargo@THIS = 1 }
				}
			}

			#EVENTS
			###WORLD EVENTS
			every_country = {
				news_event = { # TOKYO OLYMPICS
					id = WORLD.581
					days = 1027
				}		
			}

			BRG = {
				country_event = {
					id = BRG_Debug.2
					days = 1
				}
			}

			# Tension Tab Setup
			ZZZ = {
				TNO_tension_setup = yes
				TNO_calc_tension_dynmod_effects = yes
			}

			USA = {
				country_event = { # WIF not doing great
					id = wif_crisis.4
					days = 440
					random_days = 3
				}
				country_event = { # WIF crisis
					id = wif_crisis.1
					days = 520
					random_days = 3
				}
				country_event = { # Potential Trinidad BPR
					id = wif_crisis.24
					days = 2800
					random_days = 3
				}

				country_event = { # Runt WIF Collapse
					id = wif_crisis.37
					days = 3300
					random_days = 10
				}


				country_event = { #introduction event to proxies
					id = USA.49
					days = 15
				}
				country_event = { #introduction event to diplo crises
					id = USA.50 
					days = 20
				}
				add_dynamic_modifier = { modifier = USA_military_advisors_dynmod }
				add_dynamic_modifier = { modifier = USA_technician_aid_dynmod }
				add_dynamic_modifier = { modifier = USA_sabotage_effort_dynmod }
			}
			
			JAP = {
				country_event = { #introduction event to proxies 
					id = USA.49
					days = 15
				}
				country_event = { #introduction event to diplo crises
					id = USA.50
					days = 20
				}
				add_dynamic_modifier = { modifier = JAP_military_advisors_dynmod }
				add_dynamic_modifier = { modifier = JAP_technician_aid_dynmod }
				add_dynamic_modifier = { modifier = JAP_sabotage_effort_dynmod }
			}
			
			GER = {
				country_event = { #intro event to proxies
					id = USA.49
					days = 50
				}
				country_event = { #introduction event to diplo crises
					id = USA.50
					days = 20
				}
				add_dynamic_modifier = { modifier = GER_military_advisors_dynmod }
				add_dynamic_modifier = { modifier = GER_technician_aid_dynmod }
				add_dynamic_modifier = { modifier = GER_sabotage_effort_dynmod }
			}

			#Dummy Events
			UZB = {
				#country_event = { id = release_dummy.1 days = 321 random = 240 }
			}

			#IND = {
			#	country_event = { id = release_dummy.11 days = 792 random = 50 }
			#	# country_event = { id = release_dummy.22 days = 1245 random = 150 }
			#}

			#AZH = {
			#	country_event = { id = release_dummy.26 days = 803 }
			#}

			ZZZ = {
				# NOVELS IN 6 YEARS
				random_list = {
					1 = {
						every_country = {
							country_event = { id = novel.1 days = 2191 }
						}
					}
					1 = {
						every_country = {
							country_event = { id = novel.2 days = 2191 }
						}
					}
					1 = {
						every_country = {
							country_event = { id = novel.3 days = 2191 }
						}
					}
					1 = {
						every_country = {
							country_event = { id = novel.4 days = 2191 }
						}
					}
					1 = {
						every_country = {
							country_event = { id = novel.5 days = 2191 }
						}
					}
				}
				# NOVELS IN 12 YEARS
				random_list = {
					1 = {
						every_country = {
							country_event = { id = novel.10 days = 4383 }
						}
					}
					1 = {
						every_country = {
							country_event = { id = novel.11 days = 4383 }
						}
					}
					1 = {
						every_country = {
							country_event = { id = novel.12 days = 4383 }
						}
					}
					1 = {
						every_country = {
							country_event = { id = novel.13 days = 4383 }
						}
					}
				}
			}
			# Finland
			FIN = {
				diplomatic_relation = {
					country = ONG
					relation = guarantee
					active = yes
				}
				add_political_power = 69
			}

			# Brazil
			BRA = {
				country_event = { id = brazil.20 days = 4 }	  # Lott
				country_event = { id = brazil.65 days = 5 }	#CIA event on parties
				country_event = { id = brazil.21 days = 22 }	 # Japanese Tourists
				country_event = { id = brazil.22 days = 40 random = 8 }	 # de Barros
				country_event = { id = brazil.23 days = 48 random = 8 }	 # Goulart
				country_event = { id = brazil.24 days = 78 random = 8 }	 # Lacerda
			
				country_event = { id = brazil.282 days = 116 random = 8 }	 # Kubitschek Intro event
				country_event = { id = brazil.25 days = 145 random = 8 }	# Quadros Visits China
				country_event = { id = brazil.415 days = 158 random = 8 }	# Panda Diplomacy
				country_event = { id = brazil.328 days = 170 random = 5 }	 # Kubitschek Followup event
				country_event = { id = brazil.421 days = 190 random = 5 }	#Brizola and Goulart meet
				country_event = { id = brazil.26 days = 196 random = 15 }   # Communist party splits
				country_event = { id = brazil.329 days = 223 random = 10 }   # Kubitschek talks to Brazilian Historians
			
				country_event = { id = brazil.422 days = 253 random = 5 }	#Adhemar campaigning in Guanabara
				country_event = { id = brazil.27 days = 258 random = 15 }   # Salgado
				country_event = { id = brazil.424 days = 275 random = 2 }	#Petrobras meeting with Lott
				country_event = { id = brazil.423 days = 282 random = 2 }	#Andrade confirmation
				country_event = { id = brazil.330 days = 323 random = 2 }	#Lacerda hunting spider event time
			
				country_event = { id = brazil.425 days = 350 random = 3 }	#Wilson talking with German agent
				country_event = { id = brazil.426 days = 374 random = 4 }	#Lacerda clears the slums
				country_event = { id = brazil.427 days = 401 random = 3 }	#Papers, please
				country_event = { id = brazil.428 days = 431 random = 3 }	#Homeless man murdered
				country_event = { id = brazil.331 days = 456 random = 3 }	#Followup to Homeless man murdered event
				country_event = { id = brazil.261 days = 463 random = 3 }	#Edna Lott elected
				country_event = { id = brazil.253 days = 481 random = 2 }	#Start of strikes
			
				country_event = { id = brazil.429 days = 529 random = 4 }	#Corruption on trans-amazonian railway
				country_event = { id = brazil.432 days = 552 random = 2 }	#11th parallel massacre
				country_event = { id = brazil.262 days = 589 random = 3 }	#Right-wing PSD meeting
			
				country_event = { id = brazil.263 days = 656 random = 4 }	#Hitler's Death reaction
				country_event = { id = brazil.265 days = 677 random = 3 }	#Adhemar vibing, what will he do
				#country_event = { id = brazil.267 days = 677 random = 3 }	#Followup to Petrobras
				country_event = { id = brazil.33 days = 764 random = 3 }	# Quadros' Scheme Begins
				#country_event = { id = brazil.266 days = 993 random = 3 }	#Followup to Papers Please
				
				country_event = { id = brazil.11 days = 1010 random = 4 }	# Ancora dies and Frota rises
				#country_event = { id = brazil.269 days = 1039 random = 3 }	#Followup to sushi getting popular
				country_event = { id = brazil.270 days = 1211 random = 3 }	#Rede Globo
				country_event = { id = brazil.12 days = 1455 random = 4 }	# Denys retires and Figueiredo rises
				
				country_event = { id = brazil.17 days = 31 }	# Begin '62 elections
				country_event = { id = brazil.18 days = 280 }	# End '62 elections
			
				country_event = { id = brazil.237 days = 1091 }	# Begin '65 presidential election candidate selection
				country_event = { id = brazil.231 days = 1378 }	# End '65 presidential elections
			
				country_event = { id = brazil.323 days = 1430 }
				country_event = { id = brazil.324 days = 1460 }
			}

			# Panama
			PAN = {
				country_event = { id = PAN.7 days = 855 }	# PP wins 1964 election
			}

			# Malaya

			ZZZ = {
				country_event = { id = sho.21 days = 2920 } # Johor reunification
			}
			
			# Chile
			CHL = {
				random_list = {
					20 = {
						CHL_elect_zepeda = yes
					}
					20 = {
						CHL_elect_philippi = yes
					}
					15 = {
						CHL_elect_prat = yes
					}
					30 = {
						CHL_elect_frei = yes
					}
					15 = {
						CHL_elect_allende = yes
					}
				}
				add_political_power = 69
			}
			# Central Asia set up
			USA = {
				#country_event = { id = CA_US.1 days = 600 }
			}
			TRK = {
				set_country_flag = IS_CA_NATION
				country_event = { id = central_asia.1 days = 1040 }
				country_event = { id = central_asia.100 days = 2555  }
			}
			KYR = {
				set_country_flag = IS_CA_NATION
				country_event = { id = central_asia.2 days = 860 }
			}
			KRK = {
				set_country_flag = IS_CA_NATION
				country_event = { id = central_asia.4 days = 580 }
			}
			UZB = {
				set_country_flag = IS_CA_NATION
				country_event = { id = central_asia.5 days = 710 }
			}
			TAJ = {
				set_country_flag = IS_CA_NATION
				country_event = { id = central_asia.9 days = 1000 }
			}

			#Paradox broke equipment_bonus modifiers for starting ideas
			#Solution: Add then through on_action
			FRA = {
				remove_ideas = FRA_the_treaty_of_vichi
				add_ideas = FRA_the_treaty_of_vichi
			}
			ENG = {
				remove_ideas = ENG_Across_The_Channel
				add_ideas = ENG_Across_The_Channel
			}
			WAL = {
				set_variable = { wal_coal_income = 0.25 }
				add_dynamic_modifier = { modifier = WAL_Welsh_coal_income }
				remove_ideas = WAL_welsh_coal_income_idea_dummy
				add_ideas = WAL_welsh_coal_income_idea
			}

			ZZZ = {
				country_event = { id = MADAGASKAR.2 days = 295 }
			}

			#Fixing synth rubber tech bug; effect can only applied when research is completed
			#This on action 're-researches' the techs in question to properly grant the effect
			#Fires 1 week into the game so people don't see RUBBER PROCESSING at game start
			every_country = {
				limit = { has_tech = rubber_processing }
				country_event = { id = misc.1 days = 7 }
			}
			every_country = {
				limit = { has_tech = improved_rubber_processing }
				country_event = { id = misc.2 days = 7 }
			}
			every_country = {
				limit = { has_tech = advanced_rubber_processing }
				country_event = { id = misc.3 days = 7 }
			}
			every_country = {
				limit = { has_tech = modern_rubber_processing }
				country_event = { id = misc.4 days = 7 }
			}
			every_country = {
				limit = {
					TNO_has_content = yes
					NOT = { is_russian_nation = yes }
					NOT = { tag = TDF }
					NOT = { tag = CHL }
				}
				random_owned_controlled_state = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = thermoelectric_plant
						level = 1
						instant_build = yes
					}
				}
			}
			SPH = { set_capital = 1456 }
			UPH = { set_capital = 625 }
		}
	}
}