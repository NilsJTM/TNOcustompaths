@NEW_PRESIDENT_BASELINE_POL_POWER = 250 #Amount a new president's starting PP begins at
@NEW_PRESIDENT_MINIMUM_POL_POWER = 250 #Minimum amount a new president's starting PP can be
@NEW_PRESIDENT_MAXIMUM_POL_POWER = 600 #Maxium amount a new president's starting PP can be
@NEW_PRESIDENT_EV_TO_PP_MULT = 0.5 #Amount EV margin is multiplied by before adding to PP
@REELECTION_EV_TO_PP_MULT = 0.5 #Amount the EV margin is multiplied by in a reelected president's PP boost

@MAXIMUM_UNITY = 30
@MINIMUM_UNITY = 0.001

#Doc was here

##TODO PP tooltip

USA_on_new_president_election = {
	set_temp_variable = { pol_power_to_set = @NEW_PRESIDENT_BASELINE_POL_POWER }
	set_temp_variable = { EV_margin = NPP_electoral_votes }
	subtract_from_temp_variable = { EV_margin = RD_electoral_votes }
	if = {
		limit = {
			check_variable = { EV_margin < 0 }
		}
		multiply_temp_variable = { EV_margin = -1 }
	}
	divide_temp_variable = { EV_margin = 10 }
	round_temp_variable = EV_margin
	multiply_temp_variable = { EV_margin = 10 }
	multiply_temp_variable = { EV_margin = @NEW_PRESIDENT_EV_TO_PP_MULT }
	add_to_temp_variable = { pol_power_to_set = EV_margin }
	set_variable = { bill_id = 0 }
	if = {
		limit = {
			check_variable = { pol_power_to_set < @NEW_PRESIDENT_MINIMUM_POL_POWER }
		}
		set_temp_variable = { pol_power_to_set = @NEW_PRESIDENT_MINIMUM_POL_POWER }
	}
	if = {
		limit = {
			check_variable = { political_power < pol_power_to_set }
		}
		set_political_power = var:pol_power_to_set
	}
	else_if = {
		limit = {
			check_variable = { political_power > @NEW_PRESIDENT_MAXIMUM_POL_POWER }
		}
		set_political_power = @NEW_PRESIDENT_MAXIMUM_POL_POWER
	}

	set_variable = { USA_campaigning_multiplier = USA_campaigning_efficiency_reset_point }
}

USA_on_president_reelection = {
	set_temp_variable = { EV_margin = NPP_electoral_votes }
	subtract_from_temp_variable = { EV_margin = RD_electoral_votes }
	if = {
		limit = {
			check_variable = { EV_margin < 0 }
		}
		multiply_temp_variable = { EV_margin = -1 }
	}
	divide_temp_variable = { EV_margin = 10 }
	round_temp_variable = EV_margin
	multiply_temp_variable = { EV_margin = 10 }
	multiply_temp_variable = { EV_margin = @REELECTION_EV_TO_PP_MULT }
	add_political_power = var:EV_margin
}

USA_get_total_congress_votes = {
	set_temp_variable = { total_votes_temp = 0 }
	#Democrats
	if = {
		limit = { has_government = social_conservative }
		add_to_temp_variable = { total_votes_temp = RD_D_senators }
		if = {
			limit = { has_country_flag = USA_RD_United }
			add_to_temp_variable = { total_votes_temp = RD_R_senators }
		}
		if = {
			limit = { has_country_flag = USA_D_Center_United }
			add_to_temp_variable = { total_votes_temp = NPP_C_senators }
		}
		if = {
			limit = { has_country_flag = USA_D_Right_United }
			add_to_temp_variable = { total_votes_temp = NPP_FR_senators }
		}
	}
	#Republicans
	if = {
		limit = { has_government = social_liberal }
		add_to_temp_variable = { total_votes_temp = RD_R_senators }
		if = {
			limit = { has_country_flag = USA_RD_United }
			add_to_temp_variable = { total_votes_temp = RD_D_senators }
		}
		if = {
			limit = { has_country_flag = USA_R_Center_United }
			add_to_temp_variable = { total_votes_temp = NPP_C_senators }
		}
		if = {
			limit = { has_country_flag = USA_R_Right_United }
			add_to_temp_variable = { total_votes_temp = NPP_FR_senators }
		}
	}
	#NPP-Center
	if = {
		limit = { has_government = social_democrat }
		add_to_temp_variable = { total_votes_temp = NPP_C_senators }
		if = {
			limit = { has_country_flag = USA_Left_Center_United }
			add_to_temp_variable = { total_votes_temp = NPP_L_senators }
		}
		if = {
			limit = { has_country_flag = USA_R_Center_United }
			add_to_temp_variable = { total_votes_temp = RD_R_senators }
		}
		if = {
			limit = { has_country_flag = USA_D_Center_United }
			add_to_temp_variable = { total_votes_temp = RD_D_senators }
		}
	}
	#NPP-Left
	if = {
		limit = { has_government = communist }
		add_to_temp_variable = { total_votes_temp = NPP_L_senators }
		if = {
			limit = { has_country_flag = USA_Left_Center_United }
			add_to_temp_variable = { total_votes_temp = NPP_C_senators }
		}
	}
	#NPP-Right
	if = {
		limit = { has_government = authoritarian_democrat }
		add_to_temp_variable = { total_votes_temp = NPP_FR_senators }
		if = {
			limit = { has_country_flag = USA_Right_Yockey_United }
			add_to_temp_variable = { total_votes_temp = NPP_R_senators }
		}
		if = {
			limit = { has_country_flag = USA_R_Right_United }
			add_to_temp_variable = { total_votes_temp = RD_R_senators }
		}
		if = {
			limit = { has_country_flag = USA_D_Right_United }
			add_to_temp_variable = { total_votes_temp = RD_D_senators }
		}
	}
	#Yockeys
	if = {
		limit = { has_government = national_socialism }
		add_to_temp_variable = { total_votes_temp = NPP_R_senators }
		if = {
			limit = { has_country_flag = USA_Right_Yockey_United }
			add_to_temp_variable = { total_votes_temp = NPP_FR_senators }
		}
	}
	set_variable = { total_congress_votes = total_votes_temp }
}

#Things that need to be done in the backend to pass legislation
USA_pass_legislation = {
	set_variable = { temporary_congress_votes_next_bill = 0 }
	if = {
		limit = { has_country_flag = USA_64_R_RD }
		set_variable = { temporary_congress_votes = 0 }
	}
	#clr_country_flag =  executive order
	clr_country_flag = USA_RFK_FR_temp_vote #From RFK decision
}

#Fired every presidency
#USA_cycle_presidency = {
#	remove_ideas = {
#		USA_RD_army_bonus
#		USA_NPP_army_bonus
#	}
#}
#
#### Remove Military Ideas ###
#
##Ideas need to be removed every 6 years, starting from 1940
##Fired 1970
#USA_remove_1964_military_ideas = {
#	remove_ideas = {
#		USA_64_RD_army_bonus
#		USA_64_NPP_army_bonus
#		USA_64_RD_navy_bonus
#		USA_64_NPP_navy_bonus
#		USA_64_RD_air_bonus
#		USA_64_NPP_air_bonus
#	}
#}
#
##Fired 1974
#USA_remove_1968_military_ideas = {
#
#}
#
##Fired 1978
#USA_remove_1972_military_deas = {
#
#}
#########################################
#####		SUPREME COURT 			#####
recalculate_supreme_court = {
	set_variable = { US_supreme_court = 0}
	set_variable = { US_sc_lcount = 0}
	set_variable = { US_sc_ccount = 0}
	add_to_variable = { US_supreme_court = US_judge1 }
	add_to_variable = { US_supreme_court = US_judge2 }
	add_to_variable = { US_supreme_court = US_judge3 }
	add_to_variable = { US_supreme_court = US_judge4 }
	add_to_variable = { US_supreme_court = US_judge5 }
	add_to_variable = { US_supreme_court = US_judge6 }
	add_to_variable = { US_supreme_court = US_judge7 }
	add_to_variable = { US_supreme_court = US_judge8 }
	add_to_variable = { US_supreme_court = US_judge9 }
	add_to_variable = { US_supreme_court = US_judge10 }
	add_to_variable = { US_supreme_court = US_judge11 }
	add_to_variable = { US_supreme_court = US_judge12 }
	add_to_variable = { US_supreme_court = US_judge13 }
	add_to_variable = { US_supreme_court = US_judge14 }
	add_to_variable = { US_supreme_court = US_judge15 }
	log = "[GetDateText]: [Root.GetName]: Supreme court value = [?US_supreme_court]"

	if = {
		limit = { check_variable = { US_judge1 = 1}}
		add_to_variable = { US_sc_ccount = 1}
		else = { add_to_variable = { US_sc_lcount = 1}}
	}
	if = {
		limit = { check_variable = { US_judge2 = 1}}
		add_to_variable = { US_sc_ccount = 1}
		else = { add_to_variable = { US_sc_lcount = 1}}
	}
	if = {
		limit = { check_variable = { US_judge3 = 1}}
		add_to_variable = { US_sc_ccount = 1}
		else = { add_to_variable = { US_sc_lcount = 1}}
	}
	if = {
		limit = { check_variable = { US_judge4 = 1}}
		add_to_variable = { US_sc_ccount = 1}
		else = { add_to_variable = { US_sc_lcount = 1}}
	}
	if = {
		limit = { check_variable = { US_judge5 = 1}}
		add_to_variable = { US_sc_ccount = 1}
		else = { add_to_variable = { US_sc_lcount = 1}}
	}
	if = {
		limit = { check_variable = { US_judge6 = 1}}
		add_to_variable = { US_sc_ccount = 1}
		else = { add_to_variable = { US_sc_lcount = 1}}
	}
	if = {
		limit = { check_variable = { US_judge7 = 1}}
		add_to_variable = { US_sc_ccount = 1}
		else = { add_to_variable = { US_sc_lcount = 1}}
	}
	if = {
		limit = { check_variable = { US_judge8 = 1}}
		add_to_variable = { US_sc_ccount = 1}
		else = { add_to_variable = { US_sc_lcount = 1}}
	}
	if = {
		limit = {
			AND = {
				check_variable = { US_judge9 = 1 }
				check_variable = { US_judge_count > 8 }
			}
		}
		add_to_variable = { US_sc_ccount = 1}
		else = { add_to_variable = { US_sc_lcount = 1}}
	}
	if = {
		limit = {
			AND = {
				check_variable = { US_judge10 = 1 }
				check_variable = { US_judge_count > 9 }
			}
		}
		add_to_variable = { US_sc_ccount = 1 }
	}
	else_if = {
		limit = {
			check_variable = { US_judge_count > 9 }
		}
		add_to_variable = { US_sc_lcount = 1 }
	}
	if = {
		limit = {
			AND = {
				check_variable = { US_judge11 = 1 }
				check_variable = { US_judge_count > 10 }
			}
		}
		add_to_variable = { US_sc_ccount = 1 }
	}
	else_if = {
		limit = {
			check_variable = { US_judge_count > 10 }
		}
		add_to_variable = { US_sc_lcount = 1 }
	}
	if = {
		limit = {
			AND = {
				check_variable = { US_judge12 = 1 }
				check_variable = { US_judge_count > 11 }
			}
		}
		add_to_variable = { US_sc_ccount = 1 }
	}
	else_if = {
		limit = {
			check_variable = { US_judge_count > 11 }
		}
		add_to_variable = { US_sc_lcount = 1 }
	}
	if = {
		limit = {
			AND = {
				check_variable = { US_judge13 = 1 }
				check_variable = { US_judge_count > 12 }
			}
		}
		add_to_variable = { US_sc_ccount = 1 }
	}
	else_if = {
		limit = {
			check_variable = { US_judge_count > 12 }
		}
		add_to_variable = { US_sc_lcount = 1 }
	}
	if = {
		limit = {
			AND = {
				check_variable = { US_judge14 = 1 }
				check_variable = { US_judge_count > 13 }
			}
		}
		add_to_variable = { US_sc_ccount = 1 }
	}
	else_if = {
		limit = {
			check_variable = { US_judge_count > 13 }
		}
		add_to_variable = { US_sc_lcount = 1 }
	}
	if = {
		limit = {
			AND = {
				check_variable = { US_judge15 = 1 }
				check_variable = { US_judge_count > 14 }
			}
		}
		add_to_variable = { US_sc_ccount = 1 }
	}
	else_if = {
		limit = {
			check_variable = { US_judge_count > 14 }
		}
		add_to_variable = { US_sc_lcount = 1 }
	}
}

US_select_judge = { #AI Rules for selecting judges
	if = {
		limit = { has_government = national_socialism }
		nominate_conservative = yes
	}
	else_if = {
		limit = { has_government = authoritarian_democrat }
		if = { #before 73
			limit = { date < 1973.01.01}
		}
		else = { nominate_conservative = yes }
		else_if = { #after 73
			limit = { date > 1973.01.01}
		}
		else = { nominate_liberal = yes }
	}
	else_if = {
		limit = { has_government = social_conservative }
		if = {
			limit = { has_country_flag = USA_68_D_RD_Past }
			nominate_conservative = yes
		}
		else_if = {
			limit = { check_variable = { US_supreme_court > 14}}
			nominate_conservative = yes
		}
		else_if = {
			limit = {
				check_variable = { US_supreme_court = 13 }
				check_variable = { USjDl = 1}
			}
			nominate_liberal = yes
		}
		else = { nominate_conservative = yes}
	}
	else_if = {
		limit = { has_government = social_liberal }
		if = {
			limit = { check_variable = { US_supreme_court < 13}}
			nominate_liberal = yes
		}
		else_if = {
			limit = {
				check_variable = { US_supreme_court = 14 }
				check_variable = { USjDl = 2}
			}
			nominate_conservative = yes
		}
		else = { nominate_liberal = yes}
	}
	else_if = {
		limit = { has_government = social_democrat }
		if = {
			limit = { check_variable = { US_supreme_court < 14}}
			nominate_liberal = yes
		}
		else = { nominate_conservative = yes }
	}
	else_if = {
		limit = { has_government = communist }
		nominate_liberal = yes
	}
}
USA_SJ_death = {
	if = {
		limit = {
			check_variable = { USj_next = 1}
		}
		set_variable = {USjD = 1}
		set_variable = {USjDl = US_judge1 }
		add_to_variable = { USj_next = 1}
	}
	else_if = {
		limit = {
			check_variable = { USj_next = 2}
		}
		set_variable = {USjD = 2}
		set_variable = {USjDl = US_judge2 }
		add_to_variable = { USj_next = 1}
	}
	else_if = {
		limit = {
			check_variable = { USj_next = 3}
		}
		set_variable = {USjD = 3}
		set_variable = {USjDl = US_judge3 }
		add_to_variable = { USj_next = 1}
	}
	else_if = {
		limit = {
			check_variable = { USj_next = 4}
		}
		set_variable = {USjD = 4}
		set_variable = {USjDl = US_judge4 }
		add_to_variable = { USj_next = 1}
	}
	else_if = {
		limit = {
			check_variable = { USj_next = 5}
		}
		set_variable = {USjD = 5}
		set_variable = {USjDl = US_judge5 }
		add_to_variable = { USj_next = 1}
	}
	else_if = {
		limit = {
			check_variable = { USj_next = 6}
		}
		set_variable = {USjD = 6}
		set_variable = {USjDl = US_judge6 }
		add_to_variable = { USj_next = 1}
	}
	else_if = {
		limit = {
			check_variable = { USj_next = 7}
		}
		set_variable = {USjD = 7}
		set_variable = {USjDl = US_judge7 }
		add_to_variable = { USj_next = 1}
	}
	else_if = {
		limit = {
			check_variable = { USj_next = 8}
		}
		set_variable = {USjD = 8}
		set_variable = {USjDl = US_judge8 }
		add_to_variable = { USj_next = 1}
	}
	else_if = {
		limit = {
			check_variable = { USj_next = 9}
		}
		set_variable = {USjD = 9}
		set_variable = {USjDl = US_judge9 }
		set_variable = { USj_next = 1}
		if = {
			limit = { has_country_flag = USj_stacked10 }
			set_variable = { USj_next = 10}
		}
	}
	else_if = {
		limit = {
			check_variable = { USj_next = 10}
		}
		set_variable = {USjD = 10}
		set_variable = {USjDl = US_judge10 }
		set_variable = { USj_next = 1}
		if = {
			limit = { has_country_flag = USj_stacked11 }
			set_variable = { USj_next = 11}
		}
	}
	else_if = {
		limit = {
			check_variable = { USj_next = 11}
		}
		set_variable = {USjD = 11}
		set_variable = {USjDl = US_judge11 }
		set_variable = { USj_next = 1}
		if = {
			limit = { has_country_flag = USj_stacked12 }
			set_variable = { USj_next = 12}
		}
	}
	else_if = {
		limit = {
			check_variable = { USj_next = 12}
		}
		set_variable = {USjD = 12}
		set_variable = {USjDl = US_judge12 }
		set_variable = { USj_next = 1}
		if = {
			limit = { has_country_flag = USj_stacked13 }
			set_variable = { USj_next = 13}
		}
	}
	else_if = {
		limit = {
			check_variable = { USj_next = 13}
		}
		set_variable = {USjD = 13}
		set_variable = {USjDl = US_judge13 }
		set_variable = { USj_next = 1}
		if = {
			limit = { has_country_flag = USj_stacked14 }
			set_variable = { USj_next = 14}
		}
	}
	else_if = {
		limit = {
			check_variable = { USj_next = 14}
		}
		set_variable = {USjD = 14}
		set_variable = {USjDl = US_judge14 }
		set_variable = { USj_next = 1}
		if = {
			limit = { has_country_flag = USj_stacked15 }
			set_variable = { USj_next = 15}
		}
	}
	else_if = {
		limit = {
			check_variable = { USj_next = 15}
		}
		set_variable = {USjD = 15}
		set_variable = {USjDl = US_judge15 }
		set_variable = { USj_next = 1}
	}
}

nominate_conservative = {
	if = {
		limit = {
			check_variable = { USjD = 1}
		}
		set_variable = { US_judge1 = 1}
	}
	if = {
		limit = {
			check_variable = { USjD = 2}
		}
		set_variable = { US_judge2 = 1}
	}
	if = {
		limit = {
			check_variable = { USjD = 3}
		}
		set_variable = { US_judge3 = 1}
	}
	if = {
		limit = {
			check_variable = { USjD = 4}
		}
		set_variable = { US_judge4 = 1}
	}
	if = {
		limit = {
			check_variable = { USjD = 5}
		}
		set_variable = { US_judge5 = 1}
	}
	if = {
		limit = {
			check_variable = { USjD = 6}
		}
		set_variable = { US_judge6 = 1}
	}
	if = {
		limit = {
			check_variable = { USjD = 7}
		}
		set_variable = { US_judge7 = 1}
	}
	if = {
		limit = {
			check_variable = { USjD = 8}
		}
		set_variable = { US_judge8 = 1}
	}
	if = {
		limit = {
			check_variable = { USjD = 9}
		}
		set_variable = { US_judge9 = 1}
	}
	if = {
		limit = {
			check_variable = { USjD = 10}
		}
		set_variable = { US_judge10 = 1}
	}
	if = {
		limit = {
			check_variable = { USjD = 11}
		}
		set_variable = { US_judge11 = 1}
	}
	if = {
		limit = {
			check_variable = { USjD = 12}
		}
		set_variable = { US_judge12 = 1}
	}
	if = {
		limit = {
			check_variable = { USjD = 13}
		}
		set_variable = { US_judge13 = 1}
	}
	if = {
		limit = {
			check_variable = { USjD = 14}
		}
		set_variable = { US_judge14 = 1}
	}
	if = {
		limit = {
			check_variable = { USjD = 15}
		}
		set_variable = { US_judge15 = 1}
	}
}

nominate_liberal = {
	if = {
		limit = {
			check_variable = { USjD = 1}
		}
		set_variable = { US_judge1 = 2}
	}
	if = {
		limit = {
			check_variable = { USjD = 2}
		}
		set_variable = { US_judge2 = 2}
	}
	if = {
		limit = {
			check_variable = { USjD = 3}
		}
		set_variable = { US_judge3 = 2}
	}
	if = {
		limit = {
			check_variable = { USjD = 4}
		}
		set_variable = { US_judge4 = 2}
	}
	if = {
		limit = {
			check_variable = { USjD = 5}
		}
		set_variable = { US_judge5 = 2}
	}
	if = {
		limit = {
			check_variable = { USjD = 6}
		}
		set_variable = { US_judge6 = 2}
	}
	if = {
		limit = {
			check_variable = { USjD = 7}
		}
		set_variable = { US_judge7 = 2}
	}
	if = {
		limit = {
			check_variable = { USjD = 8}
		}
		set_variable = { US_judge8 = 2}
	}
	if = {
		limit = {
			check_variable = { USjD = 9}
		}
		set_variable = { US_judge9 = 2}
	}
	if = {
		limit = {
			check_variable = { USjD = 10}
		}
		set_variable = { US_judge10 = 2}
	}
	if = {
		limit = {
			check_variable = { USjD = 11}
		}
		set_variable = { US_judge11 = 2}
	}
	if = {
		limit = {
			check_variable = { USjD = 12}
		}
		set_variable = { US_judge12 = 2}

	}
	if = {
		limit = {
			check_variable = { USjD = 13}
		}
		set_variable = { US_judge13 = 2}
	}
	if = {
		limit = {
			check_variable = { USjD = 14}
		}
		set_variable = { US_judge14 = 2}
	}
	if = {
		limit = {
			check_variable = { USjD = 15}
		}
		set_variable = { US_judge15 = 2}
	}
}

#SUPREME COURT CONSEQUENCES
USA_supreme_court_consequences_lib = {
	#pvl - cvl - Uphold very liberal status quo
	if = {
		limit = {
			check_variable = { US_supreme_court_prev = 1 }
			USA_has_very_liberal_supreme_court = yes
		}
		country_event = { id = USA.201 days = 5}
	}
	#pl - cvl - arrogant liberals want very liberal
	if = {
		limit = {
			check_variable = { US_supreme_court_prev = 2 }
			USA_has_very_liberal_supreme_court = yes
		}
		country_event = { id = USA.202 days = 5}
	}
	#pvc - cc - good president caring about balance
	if = {
		limit = {
			check_variable = { US_supreme_court_prev = 4 }
			USA_has_conservative_supreme_court = yes
		}
		country_event = { id = USA.203 days = 5}
	}
}
USA_supreme_court_consequences_con = {
	#pvc - cvc - Uphold very conservative status quo
	if = {
		limit = {
			check_variable = { US_supreme_court_prev = 4 }
			USA_has_very_conservative_supreme_court = yes
		}
		country_event = { id = USA.204 days = 5}
	}
	#pc - cvc - arrogant conservative want very conservative
	if = {
		limit = {
			check_variable = { US_supreme_court_prev = 3 }
			USA_has_very_conservative_supreme_court = yes
		}
		country_event = { id = USA.205 days = 5}
	}
	#pvl - cl - good president caring about balance
	if = {
		limit = {
			check_variable = { US_supreme_court_prev = 1 }
			USA_has_liberal_supreme_court = yes
		}
		country_event = { id = USA.206 days = 5}
	}
}

############################################################################################## ICW STUFF
USA_Calculate_Total_Support = {
	set_variable = { USA_ICW_Total_Support = 0 }
	add_to_variable = { USA_ICW_Total_Support = USA_INS_CW_RD_Support }
	add_to_variable = { USA_ICW_Total_Support = USA_INS_CW_NPP_Support }
	clamp_variable = {
		var = USA_INS_NPP_Support
		min = 0
		max = 100
	}
	clamp_variable = {
		var = USA_INS_CW_RD_Support
		min = 0
		max = 100
	}

}
USA_Pull_Out_Of_Indonesian_War = {
hidden_effect = {
set_variable = { USA_Pulled_Out_ICW_Political_Power = USA_IW_Investment }
set_variable = { USA_Pulled_Out_ICW_Stability_War_Support = USA_IW_Investment }
set_variable = { USA_Pulled_Out_ICW_Popularity  = USA_IW_Investment }

###########################################################################################
#### Political Power
###########################################################################################

multiply_variable = { USA_Pulled_Out_ICW_Political_Power = -100 }

add_political_power = var:USA_Pulled_Out_ICW_Political_Power

###########################################################################################
#### Stability/War Support
###########################################################################################

multiply_variable = { USA_Pulled_Out_ICW_Stability_War_Support = -1}
multiply_variable = { USA_Pulled_Out_ICW_Stability_War_Support = -1}

add_stability = var:USA_Pulled_Out_ICW_Stability_War_Support
add_war_support = var:USA_Pulled_Out_ICW_Stability_War_Support

###########################################################################################
#### Popularity
###########################################################################################

set_variable = { USA_Pulled_Out_Backlash_Effect_Popularity_But_Pie_Chat_ICW = USA_Pulled_Out_ICW_Popularity }
set_variable = { USA_Pulled_Out_Backlash_Effect_Popularity_But_Pie_Chat_ICW_Subtract = USA_Pulled_Out_Backlash_Effect_Popularity_But_Pie_Chat_ICW }

multiply_variable = { USA_Pulled_Out_Backlash_Effect_Popularity_But_Pie_Chat_ICW = 0.1 }
multiply_variable = { USA_Pulled_Out_Backlash_Effect_Popularity_But_Pie_Chat_ICW_Subtract = -.1 }

if = {
	limit = { has_country_flag = USA_64_R_RD }

	add_popularity = {
		ideology = social_democrat
		popularity = var:USA_Pulled_Out_Backlash_Effect_Popularity_But_Pie_Chat_ICW
	}

	add_popularity = {
		ideology = social_liberal
		popularity = var:USA_Pulled_Out_Backlash_Effect_Popularity_But_Pie_Chat_ICW_Subtract
	}
}

if = {
	limit = { has_country_flag = USA_64_D_RD }

	add_popularity = {
		ideology = authoritarian_democrat
		popularity = var:USA_Pulled_Out_Backlash_Effect_Popularity_But_Pie_Chat_ICW
	}

	add_popularity = {
		ideology = social_conservative
		popularity = var:USA_Pulled_Out_Backlash_Effect_Popularity_But_Pie_Chat_ICW_Subtract
	}
}

if = {
	limit = { has_country_flag = USA_64_C_NPP }

	add_popularity = {
		ideology = social_liberal
		popularity = var:USA_Pulled_Out_Backlash_Effect_Popularity_But_Pie_Chat_ICW
	}

	add_popularity = {
		ideology = social_democrat
		popularity = var:USA_Pulled_Out_Backlash_Effect_Popularity_But_Pie_Chat_ICW_Subtract
	}
}

if = {
	limit = { has_country_flag = USA_64_FR_NPP }


		add_popularity = {
			ideology = social_conservative
			popularity = var:USA_Pulled_Out_Backlash_Effect_Popularity_But_Pie_Chat_ICW
		}

		add_popularity = {
			ideology = authoritarian_democrat
			popularity = var:USA_Pulled_Out_Backlash_Effect_Popularity_But_Pie_Chat_ICW_Subtract
				}
			}
		}
}

################################################################################################

# Africa stuff #
USA_increase_RK_debuff = {
	if = {
		limit = { has_idea = usa_Wervolf_6 }
		add_war_support = -0.01
		add_political_power = -10
	}
	else_if = {
		limit = { has_idea = usa_Wervolf_5 }
		swap_ideas = {
			remove_idea = usa_Wervolf_5
			add_idea = usa_Wervolf_6
		}
	}
	else_if = {
		limit = { has_idea = usa_Wervolf_4 }
		swap_ideas = {
			remove_idea = usa_Wervolf_4
			add_idea = usa_Wervolf_6
		}
	}
	else_if = {
		limit = { has_idea = usa_Wervolf_3 }
		swap_ideas = {
			remove_idea = usa_Wervolf_3
			add_idea = usa_Wervolf_5
		}
	}
	else_if = {
		limit = { has_idea = usa_Wervolf_2 }
		swap_ideas = {
			remove_idea = usa_Wervolf_2
			add_idea = usa_Wervolf_4
		}
	}
	else_if = {
		limit = { has_idea = usa_Wervolf_1 }
		swap_ideas = {
			remove_idea = usa_Wervolf_1
			add_idea = usa_Wervolf_3
		}
	}
	else  {
		add_ideas = usa_Wervolf_2
	}
}

USA_decrease_RK_debuff = {
	if = {
		limit = { has_idea = usa_Wervolf_6 }
		swap_ideas = {
			remove_idea = usa_Wervolf_6
			add_idea = usa_Wervolf_5
		}
	}
	else_if = {
		limit = { has_idea = usa_Wervolf_5 }
		swap_ideas = {
			remove_idea = usa_Wervolf_5
			add_idea = usa_Wervolf_4
		}
	}
	else_if = {
		limit = { has_idea = usa_Wervolf_4 }
		swap_ideas = {
			remove_idea = usa_Wervolf_4
			add_idea = usa_Wervolf_3
		}
	}
	else_if = {
		limit = { has_idea = usa_Wervolf_3 }
		swap_ideas = {
			remove_idea = usa_Wervolf_3
			add_idea = usa_Wervolf_2
		}
	}
	else_if = {
		limit = { has_idea = usa_Wervolf_2 }
		swap_ideas = {
			remove_idea = usa_Wervolf_2
			add_idea = usa_Wervolf_1
		}
	}
	else = {
		remove_ideas = usa_Wervolf_1
	}
}

USA_increase_civil_rights = {
	custom_effect_tooltip = USA_increase_civil_rights_tt
	hidden_effect = {
	if = {
		limit = { has_idea = USA_civil_rights_6 }
		add_political_power = 5
	}
	else_if = {
		limit = { has_idea = USA_civil_rights_5 }
		swap_ideas = {
			remove_idea = USA_civil_rights_5
			add_idea = USA_civil_rights_6
		}
	}
	else_if = {
		limit = { has_idea = USA_civil_rights_4 }
		swap_ideas = {
			remove_idea = USA_civil_rights_4
			add_idea = USA_civil_rights_5
		}
	}
	else_if = {
		limit = { has_idea = USA_civil_rights_3 }
		swap_ideas = {
			remove_idea = USA_civil_rights_3
			add_idea = USA_civil_rights_4
		}
	}

	else_if = {
		limit = { has_idea = USA_civil_rights_2 }
		swap_ideas = {
			remove_idea = USA_civil_rights_2
			add_idea = USA_civil_rights_3
		}
	}
	else_if = {
		limit = { has_idea = USA_civil_rights_1 }
		swap_ideas = {
			remove_idea = USA_civil_rights_1
			add_idea = USA_civil_rights_2
		}
	}
	else_if = {
		limit = { has_idea = USA_jim_crow }
		swap_ideas = {
			remove_idea = USA_jim_crow
			add_idea = USA_civil_rights_1
		}
	}
	else_if = {
		limit = { has_idea = USA_bloody_jim_crow }
		swap_ideas = {
			remove_idea = USA_bloody_jim_crow
			add_idea = USA_civil_rights_1
		}
	}
	else = {
		add_ideas = USA_civil_rights_1
		}
	}
}

USA_decrease_civil_rights = {
	custom_effect_tooltip = USA_decrease_civil_rights_tt
 hidden_effect = {
	if = {
		limit = { has_idea = USA_civil_rights_6 }
		swap_ideas = {
			remove_idea = USA_civil_rights_6
			add_idea = USA_civil_rights_5
		}
	}
	else_if = {
		limit = { has_idea = USA_civil_rights_5 }
		swap_ideas = {
			remove_idea = USA_civil_rights_5
			add_idea = USA_civil_rights_4
		}
	}
	else_if = {
		limit = { has_idea = USA_civil_rights_4 }
		swap_ideas = {
			remove_idea = USA_civil_rights_4
			add_idea = USA_civil_rights_3
		}
	}
	else_if = {
		limit = { has_idea = USA_civil_rights_3 }
		swap_ideas = {
			remove_idea = USA_civil_rights_3
			add_idea = USA_civil_rights_2
		}
	}
	else_if = {
		limit = { has_idea = USA_civil_rights_3 }
		swap_ideas = {
			remove_idea = USA_civil_rights_3
			add_idea = USA_civil_rights_2
		}
	}
	else_if = {
		limit = { has_idea = USA_civil_rights_2 }
		swap_ideas = {
			remove_idea = USA_civil_rights_2
			add_idea = USA_civil_rights_1
		}
	}
	else_if = {
		limit = { has_idea = USA_civil_rights_1 }
		swap_ideas = {
			remove_idea = USA_civil_rights_1
			add_idea = USA_jim_crow
			}
		}
	}
}

USA_civil_rights_clear = {
	remove_ideas = USA_civil_rights_6
	remove_ideas = USA_civil_rights_5
	remove_ideas = USA_civil_rights_4
	remove_ideas = USA_civil_rights_3
	remove_ideas = USA_civil_rights_2
	remove_ideas = USA_civil_rights_1
}


USA_increase_depression = {
	if = {
		limit = { has_idea = USA_the_american_depression_5 }
		add_war_support = -0.05
		add_political_power = -100
	}
	else_if = {
		limit = { has_idea = USA_the_american_depression_4 }
		swap_ideas = {
			remove_idea = USA_the_american_depression_4
			add_idea = USA_the_american_depression_5
		}
	}
	else_if = {
		limit = { has_idea = USA_the_american_depression_3 }
		swap_ideas = {
			remove_idea = USA_the_american_depression_3
			add_idea = USA_the_american_depression_4
		}
	}
	else_if = {
		limit = { has_idea = USA_the_american_depression_2 }
		swap_ideas = {
			remove_idea = USA_the_american_depression_2
			add_idea = USA_the_american_depression_3
		}
	}
	else_if = {
		limit = { has_idea = USA_the_american_depression_1 }
		swap_ideas = {
			remove_idea = USA_the_american_depression_1
			add_idea = USA_the_american_depression_2
		}
	}
	else = {
		add_ideas = USA_the_american_depression_1
	}
}

USA_decrease_depression = {
	if = {
		limit = { has_idea = USA_the_american_depression_5 }
		swap_ideas = {
			remove_idea = USA_the_american_depression_5
			add_idea = USA_the_american_depression_4
		}
	}
	else_if = {
		limit = { has_idea = USA_the_american_depression_4 }
		swap_ideas = {
			remove_idea = USA_the_american_depression_4
			add_idea = USA_the_american_depression_3
		}
	}
	else_if = {
		limit = { has_idea = USA_the_american_depression_3 }
		swap_ideas = {
			remove_idea = USA_the_american_depression_3
			add_idea = USA_the_american_depression_2
		}
	}
	else_if = {
		limit = { has_idea = USA_the_american_depression_2 }
		swap_ideas = {
			remove_idea = USA_the_american_depression_2
			add_idea = USA_the_american_depression_1
		}
	}
	else_if = {
		limit = { has_idea = USA_the_american_depression_1 }
		remove_ideas = USA_the_american_depression_1
	}
	else = {	
		if = {
			limit = {
				has_government = social_liberal
				has_government = social_conservative 
			}
			custom_effect_tooltip = USA_favor_rd
			hidden_effect = {
				every_owned_state = {
					limit ={ can_have_elections_in_state = yes }
					add_to_variable = { RD_popularity = 0.1 }
				}
			}
		}
		else = {
			custom_effect_tooltip = USA_favor_npp
			hidden_effect = {
				every_owned_state = {
					limit ={ can_have_elections_in_state = yes }
					add_to_variable = { NPP_popularity = 0.1 }
				}
			}
		}
	}
}

#Modify ruling party popularities
USA_decrease_ruling_party_popularity_1 = {
	set_temp_variable = { v1 = -0.01 }
	USA_modify_ruling_party_popularity = yes
}

USA_decrease_ruling_party_popularity_2 = {
	set_temp_variable = { v1 = -0.02 }
	USA_modify_ruling_party_popularity = yes
}

USA_decrease_ruling_party_popularity_3 = {
	set_temp_variable = { v1 = -0.03 }
	USA_modify_ruling_party_popularity = yes
}

USA_decrease_ruling_party_popularity_4 = {
	set_temp_variable = { v1 = -0.04 }
	USA_modify_ruling_party_popularity = yes
}

USA_decrease_ruling_party_popularity_5 = {
	set_temp_variable = { v1 = -0.05 }
	USA_modify_ruling_party_popularity = yes
}

USA_increase_ruling_party_popularity_1 = {
	set_temp_variable = { v1 = 0.01 }
	USA_modify_ruling_party_popularity = yes
}

USA_increase_ruling_party_popularity_2 = {
	set_temp_variable = { v1 = 0.02 }
	USA_modify_ruling_party_popularity = yes
}

USA_increase_ruling_party_popularity_3 = {
	set_temp_variable = { v1 = 0.03 }
	USA_modify_ruling_party_popularity = yes
}

USA_increase_ruling_party_popularity_4 = {
	set_temp_variable = { v1 = 0.04 }
	USA_modify_ruling_party_popularity = yes
}

USA_increase_ruling_party_popularity_5 = {
	set_temp_variable = { v1 = 0.05 }
	USA_modify_ruling_party_popularity = yes
}

#v2 is the inverse of v1, used to modify the party popularity that most closely matches the ruling party popularity
# social liberal <-> social democrat <-> communist
# social conservative <-> authoritarian democrat <-> national_socialism

#The general trend is for each wing to go to its more radical side
USA_modify_ruling_party_popularity = {
	set_temp_variable = { v2 = v1 }
	multiply_temp_variable = { v2 = -1 }
	if = {
		limit = { has_government = social_liberal }
		add_popularity = {
			ideology = social_liberal
			popularity = v1
		}
		add_popularity = {
			ideology = authoritarian_democrat
			popularity = v2
		}
	}
	else_if = {
		limit = { has_government = social_conservative }
		add_popularity = {
			ideology = social_conservative
			popularity = v1
		}
		add_popularity = {
			ideology = social_democrat
			popularity = v2
		}
	}
	else_if = {
		limit = { has_government = social_democrat }
		add_popularity = {
			ideology = social_democrat
			popularity = v1
		}
		add_popularity = {
			ideology = social_conservative
			popularity = v2
		}
	}
	else_if = {
		limit = { has_government = authoritarian_democrat }
		add_popularity = {
			ideology = authoritarian_democrat
			popularity = v1
		}
		add_popularity = {
			ideology = social_liberal
			popularity = v2
		}
	}
	else_if = {
		limit = { has_government = national_socialism }
		add_popularity = {
			ideology = national_socialism
			popularity = v1
		}
		add_popularity = {
			ideology = social_liberal
			popularity = v2
		}
	}
	else_if = {
		limit = { has_government = communist }
		add_popularity = {
			ideology = communist
			popularity = v1
		}
		add_popularity = {
			ideology = social_conservative
			popularity = v2
		}
	}
}

USA_increase_government_popularity_dotnull5 = {
	if = {
		limit = { has_government = social_liberal }
		hidden_effect = {
			every_owned_state = {
				limit = { can_have_elections_in_state = yes}
				add_to_variable = { RD_popularity = 0.05}
				add_to_variable = { RD_R_bonus_popularity = 0.05}
			}
		}
	}
	else_if = {
		limit = { has_government = social_conservative }
		hidden_effect = {
			every_owned_state = {
				limit = { can_have_elections_in_state = yes}
				add_to_variable = { RD_popularity = 0.05}
				add_to_variable = { RD_D_bonus_popularity = 0.05}
			}
		}

	}
	else_if = {
		limit = { has_government = social_democrat }
		hidden_effect = {
			every_owned_state = {
				limit = { can_have_elections_in_state = yes}
				add_to_variable = { NPP_popularity = 0.05}
				add_to_variable = { NPP_C_bonus_popularity = 0.05}
			}
		}
	}
	else_if = {
		limit = { has_government = authoritarian_democrat }
		hidden_effect = {
			every_owned_state = {
				limit = { can_have_elections_in_state = yes}
				add_to_variable = { NPP_popularity = 0.05}
				add_to_variable = { NPP_FR_bonus_popularity = 0.05}
			}
		}
	}
	else_if = {
		limit = { has_government = national_socialism }
		hidden_effect = {
			every_owned_state = {
				limit = { can_have_elections_in_state = yes}
				add_to_variable = { NPP_popularity = 0.05}
				add_to_variable = { NPP_Y_bonus_popularity = 0.05}
			}
		}
	}
	else_if = {
		limit = { has_government = communist }
		hidden_effect = {
			every_owned_state = {
				limit = { can_have_elections_in_state = yes}
				add_to_variable = { NPP_popularity = 0.05}
				add_to_variable = { NPP_L_bonus_popularity = 0.05}
			}
		}
	}
}

USA_decrease_government_popularity_dotnull5 = {
	if = {
		limit = { has_government = social_liberal }
		hidden_effect = {
			every_owned_state = {
				limit = { can_have_elections_in_state = yes}
				add_to_variable = { RD_popularity = -0.05}
				add_to_variable = { RD_R_bonus_popularity = -0.05}
			}
		}
	}
	else_if = {
		limit = { has_government = social_conservative }
		hidden_effect = {
			every_owned_state = {
				limit = { can_have_elections_in_state = yes}
				add_to_variable = { RD_popularity = -0.05}
				add_to_variable = { RD_D_bonus_popularity = -0.05}
			}
		}

	}
	else_if = {
		limit = { has_government = social_democrat }
		hidden_effect = {
			every_owned_state = {
				limit = { can_have_elections_in_state = yes}
				add_to_variable = { NPP_popularity = -0.05}
				add_to_variable = { NPP_C_bonus_popularity = -0.05}
			}
		}
	}
	else_if = {
		limit = { has_government = authoritarian_democrat }
		hidden_effect = {
			every_owned_state = {
				limit = { can_have_elections_in_state = yes}
				add_to_variable = { NPP_popularity = -0.05}
				add_to_variable = { NPP_FR_bonus_popularity = -0.05}
			}
		}
	}
	else_if = {
		limit = { has_government = national_socialism }
		hidden_effect = {
			every_owned_state = {
				limit = { can_have_elections_in_state = yes}
				add_to_variable = { NPP_popularity = -0.05}
				add_to_variable = { NPP_Y_bonus_popularity = -0.05}
			}
		}
	}
	else_if = {
		limit = { has_government = communist }
		hidden_effect = {
			every_owned_state = {
				limit = { can_have_elections_in_state = yes}
				add_to_variable = { NPP_popularity = -0.05}
				add_to_variable = { NPP_L_bonus_popularity = -0.05}
			}
		}
	}
}


USA_reevaluate_CR_discontent = {
	add_to_variable = { USA_South_Discontent_ticker = USA_South_Discontent_change }
	add_to_variable = { USA_North_Discontent_ticker = USA_North_Discontent_change }
	if = {
		limit = { check_variable = { USA_South_Discontent_ticker > 20 } }
		country_event = { id = USA.1801 days = 1 }
		subtract_from_variable = { USA_South_Discontent_ticker = 20 }
		set_variable = { USA_South_Discontent_change = 0 }
	}
	if = {
		limit = { check_variable = { USA_North_Discontent_ticker > 20 } }
		country_event = { id = USA.1802 days = 1 }
		subtract_from_variable = { USA_North_Discontent_ticker = 20 }
		set_variable = { USA_North_Discontent_change = 0 }
	}
}

USA_decrease_south_discontent = {
	if = {
		limit = { has_idea = USA_South_Discontent_1 }
		swap_ideas = {
			remove_idea = USA_South_Discontent_1
			add_idea = USA_South_Discontent_2
		}
		add_popularity = {
			ideology = authoritarian_democrat
			popularity = 0.02
		}
		hidden_effect = {
			every_owned_state = {
				limit = {
					can_have_elections_in_state = yes
					OR = {
						check_variable = { nationality = 83 }
						check_variable = { nationality = 84 }
						check_variable = { nationality = 86 }
					}
				}
				set_temp_variable = { popularity_bonus = 0.05 }
				add_to_variable = { NPP_FR_bonus_popularity = popularity_bonus }
			}
		}
		custom_effect_tooltip = USA_NPP_FR_popularity_grows
	}
	else_if = {
		limit = { has_idea = USA_South_Discontent_2 }
		swap_ideas = {
			remove_idea = USA_South_Discontent_2
			add_idea = USA_South_Discontent_3
		}
		add_popularity = {
			ideology = authoritarian_democrat
			popularity = 0.02
		}
		hidden_effect = {
			every_owned_state = {
				limit = {
					can_have_elections_in_state = yes
					OR = {
						check_variable = { nationality = 83 }
						check_variable = { nationality = 84 }
						check_variable = { nationality = 86 }
					}
				}
				set_temp_variable = { popularity_bonus = 0.05 }
				add_to_variable = { NPP_FR_bonus_popularity = popularity_bonus }
			}
		}
		custom_effect_tooltip = USA_NPP_FR_popularity_grows
	}
	else_if = {
		limit = { has_idea = USA_South_Discontent_3 }
		swap_ideas = {
			remove_idea = USA_South_Discontent_3
			add_idea = USA_South_Discontent_4
		}
		add_popularity = {
			ideology = authoritarian_democrat
			popularity = 0.02
		}
		hidden_effect = {
			every_owned_state = {
				limit = {
					can_have_elections_in_state = yes
					OR = {
						check_variable = { nationality = 83 }
						check_variable = { nationality = 84 }
						check_variable = { nationality = 86 }
					}
				}
				set_temp_variable = { popularity_bonus = 0.05 }
				add_to_variable = { NPP_FR_bonus_popularity = popularity_bonus }
			}
		}
		custom_effect_tooltip = USA_NPP_FR_popularity_grows
	}
	else_if = {
		limit = { has_idea = USA_South_Discontent_4 }
		swap_ideas = {
			remove_idea = USA_South_Discontent_4
			add_idea = USA_South_Discontent_5
		}
		add_popularity = {
			ideology = authoritarian_democrat
			popularity = 0.02
		}
		hidden_effect = {
			every_owned_state = {
				limit = {
					can_have_elections_in_state = yes
					OR = {
						check_variable = { nationality = 83 }
						check_variable = { nationality = 84 }
						check_variable = { nationality = 86 }
					}
				}
				set_temp_variable = { popularity_bonus = 0.05 }
				add_to_variable = { NPP_FR_bonus_popularity = popularity_bonus }
			}
		}
		custom_effect_tooltip = USA_NPP_FR_popularity_grows
	}
	else_if = {
		limit = { has_idea = USA_South_Discontent_5 }
		remove_ideas = USA_South_Discontent_5
		add_popularity = {
			ideology = authoritarian_democrat
			popularity = 0.02
		}
		hidden_effect = {
			every_owned_state = {
				limit = {
					can_have_elections_in_state = yes
					OR = {
						check_variable = { nationality = 83 }
						check_variable = { nationality = 84 }
						check_variable = { nationality = 86 }
					}
				}
				set_temp_variable = { popularity_bonus = 0.05 }
				add_to_variable = { NPP_FR_bonus_popularity = popularity_bonus }
			}
		}
		custom_effect_tooltip = USA_NPP_FR_popularity_grows
	}
	else = {
		add_popularity = {
			ideology = authoritarian_democrat
			popularity = 0.02
		}
		hidden_effect = {
			every_owned_state = {
				limit = {
					can_have_elections_in_state = yes
					OR = {
						check_variable = { nationality = 83 }
						check_variable = { nationality = 84 }
						check_variable = { nationality = 86 }
					}
				}
				set_temp_variable = { popularity_bonus = 0.05 }
				add_to_variable = { NPP_FR_bonus_popularity = popularity_bonus }
			}
		}
		custom_effect_tooltip = USA_NPP_FR_popularity_grows
	}
}

USA_decrease_north_discontent = {
	if = {
		limit = { has_idea = USA_North_Discontent_1 }
		swap_ideas = {
			remove_idea = USA_North_Discontent_1
			add_idea = USA_North_Discontent_2
		}
		add_popularity = {
			ideology = social_democrat
			popularity = 0.02
		}
		hidden_effect = {
			every_owned_state = {
				limit = {
					can_have_elections_in_state = yes
					OR = {
						check_variable = { nationality = 82 }
						check_variable = { nationality = 85 }
					}
				}
				set_temp_variable = { popularity_bonus = 0.05 }
				add_to_variable = { NPP_C_bonus_popularity = popularity_bonus }
			}
		}
		custom_effect_tooltip = USA_NPP_C_popularity_grows
	}
	if = {
		limit = { has_idea = USA_North_Discontent_2 }
		swap_ideas = {
			remove_idea = USA_North_Discontent_2
			add_idea = USA_North_Discontent_3
		}
		add_popularity = {
			ideology = social_democrat
			popularity = 0.02
		}
		hidden_effect = {
			every_owned_state = {
				limit = {
					can_have_elections_in_state = yes
				}
				set_temp_variable = { popularity_bonus = 0.05 }
				add_to_variable = { NPP_C_bonus_popularity = popularity_bonus }
			}
		}
		custom_effect_tooltip = USA_NPP_C_popularity_grows
	}
	if = {
		limit = { has_idea = USA_North_Discontent_3 }
		swap_ideas = {
			remove_idea = USA_North_Discontent_3
			add_idea = USA_North_Discontent_4
		}
		add_popularity = {
			ideology = social_democrat
			popularity = 0.02
		}
		hidden_effect = {
			every_owned_state = {
				limit = {
					can_have_elections_in_state = yes
				}
				set_temp_variable = { popularity_bonus = 0.05 }
				add_to_variable = { NPP_C_bonus_popularity = popularity_bonus }
			}
		}
		custom_effect_tooltip = USA_NPP_C_popularity_grows
	}
	if = {
		limit = { has_idea = USA_North_Discontent_4 }
		swap_ideas = {
			remove_idea = USA_North_Discontent_4
			add_idea = USA_North_Discontent_5
		}
		add_popularity = {
			ideology = social_democrat
			popularity = 0.02
		}
		hidden_effect = {
			every_owned_state = {
				limit = {
					can_have_elections_in_state = yes
				}
				set_temp_variable = { popularity_bonus = 0.05 }
				add_to_variable = { NPP_C_bonus_popularity = popularity_bonus }
			}
		}
		custom_effect_tooltip = USA_NPP_C_popularity_grows
	}
	if = {
		limit = { has_idea = USA_North_Discontent_5 }
		remove_ideas = USA_North_Discontent_5
		add_popularity = {
			ideology = social_democrat
			popularity = 0.02
		}
		hidden_effect = {
			every_owned_state = {
				limit = {
					can_have_elections_in_state = yes
				}
				set_temp_variable = { popularity_bonus = 0.05 }
				add_to_variable = { NPP_C_bonus_popularity = popularity_bonus }
			}
		}
		custom_effect_tooltip = USA_NPP_C_popularity_grows
	}
}

# LBJ Stuff #
USA_LBJ_increase_race_riots = {
	if = {
		limit = { has_idea = USA_LBJ_race_riots_1 }
		add_stability = -0.05
		add_political_power = -100
	}
	else_if = {
		limit = { has_idea = USA_LBJ_race_riots_2 }
		swap_ideas = {
			remove_idea = USA_LBJ_race_riots_2
			add_idea = USA_LBJ_race_riots_1
		}
	}
	else_if = {
		limit = { has_idea = USA_LBJ_race_riots_3 }
		swap_ideas = {
			remove_idea = USA_LBJ_race_riots_3
			add_idea = USA_LBJ_race_riots_2
		}
	}
	else_if = {
		limit = { has_idea = USA_LBJ_race_riots_4 }
		swap_ideas = {
			remove_idea = USA_LBJ_race_riots_4
			add_idea = USA_LBJ_race_riots_3
		}
	}
	else_if = {
		limit = { has_idea = USA_LBJ_race_riots_5 }
		swap_ideas = {
			remove_idea = USA_LBJ_race_riots_5
			add_idea = USA_LBJ_race_riots_4
		}
	}
	else = {
		add_ideas = USA_LBJ_race_riots_5
	}
}

USA_LBJ_reduce_race_riots = {
	if = {
		limit = { has_idea = USA_LBJ_race_riots_5 }
		remove_ideas = USA_LBJ_race_riots_5
	}
	else_if = {
		limit = { has_idea = USA_LBJ_race_riots_4 }
		swap_ideas = {
			remove_idea = USA_LBJ_race_riots_4
			add_idea = USA_LBJ_race_riots_5
		}
	}
	else_if = {
		limit = { has_idea = USA_LBJ_race_riots_3 }
		swap_ideas = {
			remove_idea = USA_LBJ_race_riots_3
			add_idea = USA_LBJ_race_riots_4
		}
	}
	else_if = {
		limit = { has_idea = USA_LBJ_race_riots_2 }
		swap_ideas = {
			remove_idea = USA_LBJ_race_riots_2
			add_idea = USA_LBJ_race_riots_3
		}
	}
	else_if = {
		limit = { has_idea = USA_LBJ_race_riots_1 }
		swap_ideas = {
			remove_idea = USA_LBJ_race_riots_1
			add_idea = USA_LBJ_race_riots_2
		}
	}
	else = {
		add_stability = 0.05
		custom_effect_tooltip = LBJ_race_riots_popularity_boost
		hidden_effect = {
			every_owned_state = {
				limit = {
					can_have_elections_in_state = yes
					OR = {
						check_variable = { nationality = 83 } #Dixie
						check_variable = { nationality = 84 } #African American
						check_variable = { nationality = 86 } #Southwestern
					}
				}
				set_temp_variable = { popularity_bonus = 0.05 }
				if = {
					limit = { check_variable = { nationality = 84 } }
					add_to_temp_variable = { popularity_bonus = 0.02 }
				}
				add_to_variable = { RD_R_bonus_popularity = popularity_bonus }
				subtract_from_temp_variable = { popularity_bonus = 0.02 }
				add_to_variable = { RD_popularity = popularity_bonus }
			}
		}
	}
}

USA_LBJ_increase_social_funding = {
	if = {
		limit = { check_variable = { LBJ_exhuastion > 5 } }
		custom_effect_tooltip = econ_misc_expenses_add_large_increase
		add_to_variable = { misc_costs = 100 }
	}
	else_if = {
		limit = { check_variable = { LBJ_exhuastion > 2 } }
		custom_effect_tooltip = econ_misc_expenses_add_medium_increase
		add_to_variable = { misc_costs = 75 }
	}
	else = {
		custom_effect_tooltip = econ_misc_expenses_add_small_increase
		add_to_variable = { misc_costs = 50 }
	}
	custom_effect_tooltip = LBJ_fiscal_warning
	hidden_effect = {
		every_owned_state = {
			limit = {
				can_have_elections_in_state = yes
				NOT = { check_variable = { nationality = 337 } } #Unchanging Corn
				OR = {
					AND = {
						check_variable = { RD_popularity > NPP_popularity }
						check_variable = { RD_D_bonus_popularity > RD_R_bonus_popularity }
					}
					AND = {
						check_variable = { NPP_popularity > RD_popularity }
						check_variable = { NPP_FR_bonus_popularity > NPP_C_bonus_popularity }
					}
				}
			}
			subtract_from_variable = { RD_popularity = 0.03 }
			subtract_from_variable = { RD_R_bonus_popularity = 0.03 }
		}
	}
}

USA_LBJ_check_exhuastion = {
	hidden_effect = {
		if = {
			limit = { check_variable = { LBJ_exhuastion > 13 } }
			country_event = { id = LBJ.108 days = 1 random = 672 }
			every_owned_state = {
				limit = { can_have_elections_in_state = yes }
				add_to_variable = { RD_popularity = -0.08}
			}
		}
		else_if = {
			limit = { check_variable = { LBJ_exhuastion > 12 } }
			country_event = { id = LBJ.107 days = 1 random = 672 }
			every_owned_state = {
				limit = { can_have_elections_in_state = yes }
				add_to_variable = { RD_popularity = -0.08}
			}
		}
		else_if = {
			limit = { check_variable = { LBJ_exhuastion > 11 } }
			country_event = { id = LBJ.106 days = 1 random = 672 }
			every_owned_state = {
				limit = { can_have_elections_in_state = yes }
				add_to_variable = { RD_popularity = -0.08}
			}
		}
		else_if = {
			limit = { check_variable = { LBJ_exhuastion > 10 } }
			country_event = { id = LBJ.105 days = 1 random = 672 }
			every_owned_state = {
				limit = { can_have_elections_in_state = yes }
				add_to_variable = { RD_popularity = -0.08}
			}
		}
		else_if = {
			limit = { check_variable = { LBJ_exhuastion > 9 } }
			country_event = { id = LBJ.104 days = 1 random = 672 }
			every_owned_state = {
				limit = { can_have_elections_in_state = yes }
				add_to_variable = { RD_popularity = -0.08}
			}
		}
		else_if = {
			limit = { check_variable = { LBJ_exhuastion > 7 } }
			country_event = { id = LBJ.103 days = 1 random = 672 }
			every_owned_state = {
				limit = { can_have_elections_in_state = yes }
				add_to_variable = { RD_popularity = -0.08}
			}
		}
		else_if = {
			limit = { check_variable = { LBJ_exhuastion > 5 } }
			country_event = { id = LBJ.102 days = 1 random = 672 }
			every_owned_state = {
				limit = { can_have_elections_in_state = yes }
				add_to_variable = { RD_popularity = -0.08}
			}
		}
		else_if = {
			limit = { check_variable = { LBJ_exhuastion > 3 } }
			country_event = { id = LBJ.101 days = 1 random = 672 }
			every_owned_state = {
				limit = { can_have_elections_in_state = yes }
				add_to_variable = { RD_popularity = -0.08}
			}
		}
		else_if = {
			limit = { check_variable = { LBJ_exhuastion > 1 } }
			country_event = { id = LBJ.100 days = 1 random = 672 }
			every_owned_state = {
				limit = { can_have_elections_in_state = yes }
				add_to_variable = { RD_popularity = -0.08}
			}
		}
	}
}

USA_lbj_strengthen_wellfare_small = {
	custom_effect_tooltip = LBJ_boost_wellfare
	add_to_variable = { LBJ_welfare_strength = 1 }
	USA_LBJ_african_american_outreach = yes
}
USA_lbj_strengthen_wellfare_medium = {
	custom_effect_tooltip = LBJ_boost_wellfare
	add_to_variable = { LBJ_welfare_strength = 3 }
	USA_LBJ_african_american_outreach = yes
}
USA_lbj_strengthen_wellfare_large = {
	custom_effect_tooltip = LBJ_boost_wellfare
	add_to_variable = { LBJ_welfare_strength = 5 }
	USA_LBJ_african_american_outreach = yes
}
USA_lbj_strengthen_education_small = {
	custom_effect_tooltip = LBJ_boost_education
	add_to_variable = { LBJ_education_strength = 1 }
	USA_LBJ_african_american_outreach = yes
}
USA_lbj_strengthen_education_medium = {
	custom_effect_tooltip = LBJ_boost_education
	add_to_variable = { LBJ_education_strength = 3 }
	USA_LBJ_african_american_outreach = yes
}
USA_lbj_strengthen_education_large = {
	custom_effect_tooltip = LBJ_boost_education
	add_to_variable = { LBJ_education_strength = 5 }
	USA_LBJ_african_american_outreach = yes
}
USA_lbj_strengthen_enviroment_small = {
	custom_effect_tooltip = LBJ_boost_enviroment
	add_to_variable = { LBJ_environment_strength = 1 }
	USA_LBJ_african_american_outreach = yes
}
USA_lbj_strengthen_enviroment_medium = {
	custom_effect_tooltip = LBJ_boost_enviroment
	add_to_variable = { LBJ_environment_strength = 3 }
	USA_LBJ_african_american_outreach = yes
}
USA_lbj_strengthen_enviroment_large = {
	custom_effect_tooltip = LBJ_boost_enviroment
	add_to_variable = { LBJ_environment_strength = 5 }
	USA_LBJ_african_american_outreach = yes
}
USA_lbj_strengthen_civil_rights_small = {
	custom_effect_tooltip = LBJ_boost_civil_rights
	add_to_variable = { LBJ_civil_rights_strength = 1 }
	USA_LBJ_african_american_outreach = yes
}
USA_lbj_strengthen_civil_rights_medium = {
	custom_effect_tooltip = LBJ_boost_civil_rights
	add_to_variable = { LBJ_civil_rights_strength = 3 }
	USA_LBJ_african_american_outreach = yes
}
USA_lbj_strengthen_civil_rights_large = {
	custom_effect_tooltip = LBJ_boost_civil_rights
	add_to_variable = { LBJ_civil_rights_strength = 5 }
	USA_LBJ_african_american_outreach = yes
}
USA_lbj_strengthen_healthcare_small = {
	custom_effect_tooltip = LBJ_boost_healthcare
	add_to_variable = { LBJ_healthcare_strength = 1 }
	USA_LBJ_african_american_outreach = yes
}
USA_lbj_strengthen_healthcare_medium = {
	custom_effect_tooltip = LBJ_boost_healthcare
	add_to_variable = { LBJ_healthcare_strength = 3 }
	USA_LBJ_african_american_outreach = yes
}
USA_lbj_strengthen_healthcare_large = {
	custom_effect_tooltip = LBJ_boost_healthcare
	add_to_variable = { LBJ_healthcare_strength = 5 }
	USA_LBJ_african_american_outreach = yes
}

USA_LBJ_african_american_outreach = {
	hidden_effect = {
		set_temp_variable = { great_society_progress = LBJ_civil_rights_strength }
		add_to_temp_variable = { great_society_progress = LBJ_education_strength }
		add_to_temp_variable = { great_society_progress = LBJ_welfare_strength }
		add_to_temp_variable = { great_society_progress = LBJ_healthcare_strength }

		if = {
			limit = {
				NOT = { has_country_flag = LBJ_saved_planet }
				check_variable = { LBJ_environment_strength > 19 } #LBJ SAVED THE PLANET, COOL
			}
			country_event = { id = LBJ.143 days = 14 }
		}

		if = {
			limit = {
				NOT = { has_country_flag = LBJ_GS_done }
				check_variable = { LBJ_civil_rights_strength > 19 }
				check_variable = { LBJ_education_strength > 19 }
				check_variable = { LBJ_welfare_strength > 19 }
				check_variable = { LBJ_environment_strength > 19 }
				check_variable = { LBJ_healthcare_strength > 19 }
				has_country_flag = LBJ_completed_civil_rights_reforms
			}
			country_event = { id = LBJ.144 days = 14 } #You did it champ, We now live in a great society
		}

		if = {
			limit = {
				check_variable = { great_society_progress > 11 }
				check_variable = { LBJ_civil_rights_strength > 4 }
				has_country_flag = LBJ_winning_the_aa_vote_1
				NOT = { has_country_flag = LBJ_FHA_betrayal }
			}
			country_event = { id = LBJ.136 days = 14 }
		}
		else_if = {
			limit = {
				check_variable = { great_society_progress > 29 }
				check_variable = { LBJ_civil_rights_strength > 9 }
				has_country_flag = LBJ_winning_the_aa_vote_2
				NOT = { has_country_flag = LBJ_FHA_betrayal }
			}
			country_event = { id = LBJ.137 days = 14 }
		}
		else_if = {
			limit = {
				check_variable = { great_society_progress > 44 }
				check_variable = { LBJ_civil_rights_strength > 14 }
				has_country_flag = LBJ_winning_the_aa_vote_3
				OR = {
					has_country_flag = LBJ_FHA_strong
					has_country_flag = LBJ_FHA_medium
				}
			}
			country_event = { id = LBJ.138 days = 14 }
		}
		else_if = {
			limit = {
				check_variable = { great_society_progress > 64 }
				check_variable = { LBJ_civil_rights_strength > 19 }
				has_country_flag = LBJ_winning_the_aa_vote_4
			}
			country_event = { id = LBJ.139 days = 14 }
		}
	}
}

USA_reload_nixon_tree = {
	custom_effect_tooltip = USA_more_focus_tree_options
	mark_focus_tree_layout_dirty = yes
}

USA_reload_presidential_tree = { #not for nixon
	custom_effect_tooltip = USA_more_focus_tree_options
	mark_focus_tree_layout_dirty = yes
}

USA_clr_presidential_flags = {
	clr_country_flag = USA_60_R_RD
	clr_country_flag = mccormack_is_president
	clr_country_flag = USA_64_D_RD
	clr_country_flag = USA_LEMAY
	clr_country_flag = USA_64_R_RD
	clr_country_flag = USA_64_C_NPP
	clr_country_flag = USA_in_crisis
	clr_country_flag = USA_64_FR_NPP
	clr_country_flag = USA_68_D_RD
	clr_country_flag = USA_68_R_RD
	clr_country_flag = USA_68_C_NPP
	clr_country_flag = USA_80_L_NPP
	clr_country_flag = USA_THURMOND_FR_NPP
	clr_country_flag = USA_68_FR_NPP
	clr_country_flag = USA_72_D_RD
	clr_country_flag = USA_72_R_RD
	clr_country_flag = USA_72_C_NPP
	clr_country_flag = USA_72_FR_NPP
	clr_country_flag = USA_72_R_NPP
	clr_country_flag = USA_72_L_NPP
	clr_country_flag = USA_76_D_RD
	clr_country_flag = USA_76_R_RD
	clr_country_flag = USA_76_C_NPP
	clr_country_flag = USA_76_FR_NPP
	clr_country_flag = USA_76_R_NPP
	clr_country_flag = USA_76_L_NPP
	clr_country_flag = USA_80_D_RD
	clr_country_flag = USA_80_R_RD
	clr_country_flag = USA_80_C_NPP
	clr_country_flag = USA_80_FR_NPP
	clr_country_flag = USA_80_R_NPP
	clr_country_flag = USA_80_L_NPP
}
######################
#   DEBATE EFFECTS   #
######################

USA_debate_64_effect = {
	#CIVIL RIGHTS THINGS
	if = {
		limit = { has_country_flag = USA_civil_rights_blocked}
		country_event = { id = USA.164 days = 7}
	}
	if = {
		limit = { has_country_flag = USA_civil_rights_neutral}
		country_event = { id = USA.165 days = 7}
	}
	if = {
		limit = { has_country_flag = USA_civil_rights_passed}
		country_event = { id = USA.166 days = 7}
	}
	#SAF
	else_if = {
		limit = { check_variable = { NPP_candidate_party = 4}}
		country_event = { id = USA.168 days = 27} #Wounded vetran is furios for being wounded in a war he never wanted

	}

	#RD Integrity
	random_list = {
		50 = { country_event = { id = USA.169 days = 47} } #Nixongate
		50 = { country_event = { id = USA.170 days = 47} } #Treaty ports
	}
	#Matchups
	if = { #RFK-LBJ
		limit = {
			check_variable = { NPP_candidate_party = 4}
			check_variable = { RD_candidate_party = 1}
		}
		country_event = { id = USA.171 days = 67}
	}
	if = { #Wallace-Bennett
		limit = {
			check_variable = { NPP_candidate_party = 6}
			check_variable = { RD_candidate_party = 2}
		}
		country_event = { id = USA.172 days = 67}
	}
	if = { #RFK-Bennett
		limit = {
			check_variable = { NPP_candidate_party = 4}
			check_variable = { RD_candidate_party = 2}
		}
		country_event = { id = USA.173 days = 67}
	}
	if = { #Wallace-Johnson
		limit = {
			check_variable = { NPP_candidate_party = 6}
			check_variable = { RD_candidate_party = 1}
		}
		country_event = { id = USA.199 days = 67}
	}
}
USA_debate_68_effect = {
	#Matchups
	if = { #Harrington-LBJ
		limit = {
			check_variable = { NPP_candidate_party = 4 }
			check_variable = { RD_candidate_party = 1 }
			has_country_flag = USA_64_R_RD
		}
		random_list = {
			50 = {
				country_event = { id = USA_debate.3 days = 67}
			}
			50 = {
				country_event = { id = USA_debate.29 days = 67}
			}
		}
	}
	else_if = { #Harrington-Bennett
		limit = {
			check_variable = { NPP_candidate_party = 4 }
			check_variable = { RD_candidate_party = 2 }
			has_country_flag = USA_64_D_RD
		}
		random_list = {
			50 = {
				country_event = { id = USA_debate.1 days = 67}
			}
			50 = {
				country_event = { id = USA_debate.30 days = 67}
			}
		}
	}
	else_if = { #MCS-Bennett
		limit = {
			check_variable = { NPP_candidate_party = 6 }
			check_variable = { RD_candidate_party = 2 }
			has_country_flag = USA_64_D_RD
		}
		random_list = {
			50 = {
				country_event = { id = USA_debate.2 days = 67}
			}
			50 = {
				country_event = { id = USA_debate.40 days = 67}
			}
		}
	}
	else_if = { #MCS-LBJ
		limit = {
			check_variable = { NPP_candidate_party = 6 }
			check_variable = { RD_candidate_party = 1 }
			has_country_flag = USA_64_R_RD
		}
		random_list = {
			50 = {
				country_event = { id = USA_debate.4 days = 67}
			}
			50 = {
				country_event = { id = USA_debate.31 days = 67}
			}
		}
	}
	else_if = { #RFK-Goldwater
		limit = {
			check_variable = { NPP_candidate_party = 4 }
			check_variable = { RD_candidate_party = 2 }
			has_country_flag = USA_64_C_NPP
		}
		random_list = {
			50 = {
				country_event = { id = USA_debate.5 days = 67}
			}
			50 = {
				country_event = { id = USA_debate.34 days = 67}
			}
		}
	}
	else_if = { #Wallace-Goldwater
		limit = {
			check_variable = { NPP_candidate_party = 6 }
			check_variable = { RD_candidate_party = 2 }
			has_country_flag = USA_64_FR_NPP
		}
		random_list = {
			50 = {
				country_event = { id = USA_debate.6 days = 67}
			}
			50 = {
				country_event = { id = USA_debate.33 days = 67}
			}
		}
	}
	else_if = { #RFK-Glenn
		limit = {
			check_variable = { NPP_candidate_party = 4 }
			check_variable = { RD_candidate_party = 1 }
			has_country_flag = USA_64_C_NPP
		}
		random_list = {
			50 = {
				country_event = { id = USA_debate.7 days = 67}
			}
			50 = {
				country_event = { id = USA_debate.35 days = 67}
			}
		}
	}
	else_if = { #Wallace-Glenn
		limit = {
			check_variable = { NPP_candidate_party = 6 }
			check_variable = { RD_candidate_party = 1 }
			has_country_flag = USA_64_FR_NPP
		}
		random_list = {
			50 = {
				country_event = { id = USA_debate.8 days = 67}
			}
			50 = {
				country_event = { id = USA_debate.32 days = 67}
			}
		}
	}
	else_if = { #Harrington-Goldwater
		limit = {
			check_variable = { NPP_candidate_party = 4 }
			check_variable = { RD_candidate_party = 2 }
			NOT = { has_country_flag = USA_64_C_NPP }
			NOT = { has_country_flag = USA_64_D_RD }
		}
		country_event = { id = USA_debate.10 days = 67}
	}
	else_if = { #MCS-Goldwater
		limit = {
			check_variable = { NPP_candidate_party = 6 }
			check_variable = { RD_candidate_party = 2 }
			NOT = { has_country_flag = USA_64_FR_NPP }
			NOT = { has_country_flag = USA_64_D_RD }
		}
		country_event = { id = USA_debate.12 days = 67}
	}
	else_if = { #Harrington-Glenn
		limit = {
			check_variable = { NPP_candidate_party = 4 }
			check_variable = { RD_candidate_party = 1 }
			NOT = { has_country_flag = USA_64_C_NPP }
			NOT = { has_country_flag = USA_64_R_RD }
		}
		country_event = { id = USA_debate.9 days = 67}
	}
	else_if = { #MCS-Glenn
		limit = {
			check_variable = { NPP_candidate_party = 6 }
			check_variable = { RD_candidate_party = 1 }
			NOT = { has_country_flag = USA_64_FR_NPP }
			NOT = { has_country_flag = USA_64_R_RD }
		}
		country_event = { id = USA_debate.11 days = 67}
	}
}
USA_debate_72_effect = {
	if = {
		limit = { has_country_flag = USA_completed_first_primary }
		if = { #MCS-McNamara
			limit = {
				check_variable = { RD_candidate_party = 2 }
				check_variable = { NPP_candidate_party = 6 }
				has_country_flag = USA_68_FR_NPP
			}
			country_event = { id = USA_debate.13 days = 67 }
		}
		else_if = { #MCS-McGovern
			limit = {
				check_variable = { RD_candidate_party = 1 }
				check_variable = { NPP_candidate_party = 6 }
				has_country_flag = USA_68_FR_NPP
			}
			country_event = { id = USA_debate.14 days = 67 }
		}
		else_if = { #Harrington-McNamara
			limit = {
				check_variable = { RD_candidate_party = 2 }
				check_variable = { NPP_candidate_party = 4 }
				has_country_flag = USA_68_C_NPP
			}
			country_event = { id = USA_debate.15 days = 67 }
		}
		else_if = { #Harrington-McGovern
			limit = {
				check_variable = { RD_candidate_party = 1 }
				check_variable = { NPP_candidate_party = 4 }
				has_country_flag = USA_68_C_NPP
			}
			country_event = { id = USA_debate.16 days = 67 }
		}
		else_if = { #Hall-McGovern
			limit = {
				check_variable = { RD_candidate_party = 1 }
				check_variable = { NPP_candidate_party = 3 }
				NOT = { has_country_flag = USA_68_R_RD }
			}
			country_event = { id = USA_debate.17 days = 67 }
		}
		else_if = { #Hall-McNamara
			limit = {
				check_variable = { RD_candidate_party = 2 }
				check_variable = { NPP_candidate_party = 3 }
				NOT = { has_country_flag = USA_68_D_RD }
			}
			country_event = { id = USA_debate.18 days = 67 }
		}
		else_if = { #Hall-Goldwater
			limit = {
				check_variable = { RD_candidate_party = 2 }
				check_variable = { NPP_candidate_party = 3 }
				has_country_flag = USA_68_D_RD
			}
			country_event = { id = USA_debate.19 days = 67 }
		}
		else_if = { #Hall-Glenn
			limit = {
				check_variable = { RD_candidate_party = 1 }
				check_variable = { NPP_candidate_party = 3 }
				has_country_flag = USA_68_R_RD
			}
			country_event = { id = USA_debate.20 days = 67 }
		}
		else_if = { #Yockey-McGovern
			limit = {
				check_variable = { RD_candidate_party = 1 }
				check_variable = { NPP_candidate_party = 5 }
				NOT = { has_country_flag = USA_68_R_RD }
			}
			country_event = { id = USA_debate.21 days = 67 }
		}
		else_if = { #Yockey-McNamara
			limit = {
				check_variable = { RD_candidate_party = 2 }
				check_variable = { NPP_candidate_party = 5 }
				NOT = { has_country_flag = USA_68_D_RD }
			}
			country_event = { id = USA_debate.22 days = 67 }
		}
		else_if = { #Yockey-Goldwater
			limit = {
				check_variable = { RD_candidate_party = 2 }
				check_variable = { NPP_candidate_party = 5 }
				has_country_flag = USA_68_D_RD
			}
			country_event = { id = USA_debate.23 days = 67 }
		}
		else_if = { #Yockey-Glenn
			limit = {
				check_variable = { RD_candidate_party = 1 }
				check_variable = { NPP_candidate_party = 5 }
				has_country_flag = USA_68_R_RD
			}
			country_event = { id = USA_debate.24 days = 67 }
		}
		else_if = { #McGovern-Scoop
			limit = {
				check_variable = { RD_candidate_party = 1 }
				check_variable = { NPP_candidate_party = 4 }
				NOT = { has_country_flag = USA_68_R_RD }
				NOT = { has_country_flag = USA_68_C_NPP }
			}
			country_event = { id = USA_debate.25 days = 67 }
		}
		else_if = { #McNamara-Scoop
			limit = {
				check_variable = { RD_candidate_party = 2 }
				check_variable = { NPP_candidate_party = 4 }
				NOT = { has_country_flag = USA_68_D_RD }
				NOT = { has_country_flag = USA_68_C_NPP }
			}
			country_event = { id = USA_debate.26 days = 67 }
		}
		else_if = { #McGovern-Kirkpatrick
			limit = {
				check_variable = { RD_candidate_party = 1 }
				check_variable = { NPP_candidate_party = 6 }
				NOT = { has_country_flag = USA_68_R_RD }
				NOT = { has_country_flag = USA_68_FR_NPP }
			}
			country_event = { id = USA_debate.27 days = 67 }
		}
		else_if = { #McNamara-Kirkpatrick
			limit = {
				check_variable = { RD_candidate_party = 2 }
				check_variable = { NPP_candidate_party = 6 }
				NOT = { has_country_flag = USA_68_D_RD }
				NOT = { has_country_flag = USA_68_FR_NPP }
			}
			country_event = { id = USA_debate.28 days = 67 }
		}
		else_if = { #Goldwater-Scoop
			limit = {
				check_variable = { RD_candidate_party = 2 }
				check_variable = { NPP_candidate_party = 4 }
				has_country_flag = USA_68_D_RD
			}
			country_event = { id = USA_debate.37 days = 67 }
		}
		else_if = { #Glenn-Scoop
			limit = {
				check_variable = { RD_candidate_party = 1 }
				check_variable = { NPP_candidate_party = 4 }
				has_country_flag = USA_68_R_RD
			}
			country_event = { id = USA_debate.36 days = 67 }
		}
		else_if = { #Goldwater-Kirkpatrick
			limit = {
				check_variable = { RD_candidate_party = 2 }
				check_variable = { NPP_candidate_party = 6 }
				has_country_flag = USA_68_D_RD
			}
			country_event = { id = USA_debate.38 days = 67 }
		}
		else_if = { #Glenn-Kirkpatrick
			limit = {
				check_variable = { RD_candidate_party = 1 }
				check_variable = { NPP_candidate_party = 6 }
				has_country_flag = USA_68_R_RD
			}
			country_event = { id = USA_debate.39 days = 67 }
		}
	}
}
USA_debate_76_effect = {
}
USA_debate_80_effect = {
}
######################################
#   WALLACE F BENNETT'S PRESIDENCY   #
######################################
USA_WFB_LDS_TEST = {
	if = {
		limit = {
			has_country_flag = USA_WFB_conservative_civil_rights
			has_country_flag = WFB_LDS_Any_Civil_Rights
		}
		country_event = {
			id = WFB.Chains.15
			days = 3
		}
	}
	if = {
		limit = {
			has_country_flag = USA_WFB_moderate_civil_rights
			has_country_flag = WFB_LDS_Any_Civil_Rights
		}
		country_event = {
			id = WFB.Chains.15
			days = 3
		}
	}
	if = {
		limit = {
			has_country_flag = USA_WFB_liberal_civil_rights
			has_country_flag = WFB_LDS_Any_Civil_Rights
		}
		country_event = {
			id = WFB.Chains.17
			days = 3
		}
	}

	if = {
		limit = {
			has_country_flag = USA_WFB_conservative_civil_rights
			NOT = { has_country_flag = WFB_LDS_Any_Civil_Rights }
		}
		country_event = {
			id = WFB.Chains.22
			days = 3
		}
	}
	if = {
		limit = {
			has_country_flag = USA_WFB_moderate_civil_rights
			NOT = { has_country_flag = WFB_LDS_Any_Civil_Rights }
		}
		country_event = {
			id = WFB.Chains.19
			days = 3
		}
	}
	if = {
		limit = {
			has_country_flag = USA_WFB_liberal_civil_rights
			NOT = { has_country_flag = WFB_LDS_Any_Civil_Rights }
		}
		country_event = {
			id = WFB.Chains.19
			days = 3
		}
	}
}
USA_WFB_CRA_TEST = {
	if = {
		limit = {
			has_country_flag = USA_WFB_liberal_civil_rights
		}
		hidden_effect = {
			every_owned_state = {
				limit = { can_have_elections_in_state = yes
					OR = {
						check_variable = { nationality = 83 } #Dixie
						check_variable = { nationality = 84 } #African-American
					}
				}
				add_to_variable = { NPP_popularity = 0.15 }
				add_to_variable = { NPP_FR_bonus_popularity = 0.15 }
			}
			every_owned_state = {
				limit = { can_have_elections_in_state = yes
					OR = {
						check_variable = { nationality = 86 } #Southwestern
					}
				}
				add_to_variable = { NPP_popularity = 0.1 }
				add_to_variable = { NPP_FR_bonus_popularity = 0.1 }
			}
			every_owned_state = {
				limit = { can_have_elections_in_state = yes
					OR = {
						check_variable = { nationality = 82 } #Yankee
					}
				}
				add_to_variable = { RD_popularity = 0.15 }
				add_to_variable = { RD_D_bonus_popularity = 0.15 }
			}
			every_owned_state = {
				limit = { can_have_elections_in_state = yes
					OR = {
						check_variable = { nationality = 85 } #Steel Belt
					}
				}
				add_to_variable = { RD_popularity = 0.1 }
				add_to_variable = { RD_D_bonus_popularity = 0.1 }
			}
		}
	}
	if = {
		limit = {
			has_country_flag = USA_WFB_moderate_civil_rights
		}
		hidden_effect = {
			every_owned_state = {
				limit = { can_have_elections_in_state = yes
					OR = {
						check_variable = { nationality = 83 } #Dixie
						check_variable = { nationality = 84 } #African-American
					}
				}
				add_to_variable = { NPP_popularity = 0.15 }
				add_to_variable = { NPP_FR_bonus_popularity = 0.15 }
			}
			every_owned_state = {
				limit = { can_have_elections_in_state = yes
					OR = {
						check_variable = { nationality = 86 } #Southwestern
					}
				}
				add_to_variable = { RD_popularity = 0.05 }
				add_to_variable = { RD_D_bonus_popularity = 0.05 }
			}
			every_owned_state = {
				limit = { can_have_elections_in_state = yes
					OR = {
						check_variable = { nationality = 82 } #Yankee
					}
				}
				add_to_variable = { NPP_popularity = 0.1 }
				add_to_variable = { NPP_C_bonus_popularity = 0.1 }
			}
			every_owned_state = {
				limit = { can_have_elections_in_state = yes
					OR = {
						check_variable = { nationality = 85 } #Steel Belt
					}
				}
				subtract_from_variable = { NPP_popularity = 0.05 }
				subtract_from_variable = { NPP_C_bonus_popularity = 0.05 }
			}
		}
	}
	if = {
		limit = {
			has_country_flag = USA_WFB_conservative_civil_rights
		}
		hidden_effect = {
			every_owned_state = {
				limit = { can_have_elections_in_state = yes
					OR = {
						check_variable = { nationality = 83 } #Dixie
						check_variable = { nationality = 84 } #African-American
					}
				}
				add_to_variable = { RD_popularity = 0.1 }
				add_to_variable = { RD_D_bonus_popularity = 0.1 }
			}
			every_owned_state = {
				limit = { can_have_elections_in_state = yes
					OR = {
						check_variable = { nationality = 86 } #Southwestern
					}
				}
				add_to_variable = { RD_popularity = 0.05 }
				add_to_variable = { RD_D_bonus_popularity = 0.05 }
			}
			every_owned_state = {
				limit = { can_have_elections_in_state = yes
					OR = {
						check_variable = { nationality = 82 } #Yankee
					}
				}
				add_to_variable = { NPP_popularity = 0.1 }
				add_to_variable = { NPP_C_bonus_popularity = 0.1 }
				add_to_variable = { NPP_FR_bonus_popularity = 0.1 }
				subtract_from_variable = { RD_D_bonus_popularity = 0.1 }
			}
			every_owned_state = {
				limit = { can_have_elections_in_state = yes
					OR = {
						check_variable = { nationality = 85 } #Steel Belt
					}
				}
				add_to_variable = { NPP_popularity = 0.05 }
				add_to_variable = { NPP_C_bonus_popularity = 0.05 }
				add_to_variable = { NPP_FR_bonus_popularity = 0.1 }
				subtract_from_variable = { RD_D_bonus_popularity = 0.1 }
			}
		}
	}
	if = {
		limit = {
			NOT = {	has_country_flag = USA_WFB_moderate_civil_rights }
			NOT = {	has_country_flag = USA_WFB_conservative_civil_rights }
			NOT = {	has_country_flag = USA_WFB_liberal_civil_rights }
		}
		hidden_effect = {
			every_owned_state = {
				limit = { can_have_elections_in_state = yes
					OR = {
						check_variable = { nationality = 83 } #Dixie
						check_variable = { nationality = 84 } #African-American
					}
				}
				add_to_variable = { RD_popularity = 0.15 }
				add_to_variable = { RD_D_bonus_popularity = 0.15 }
			}
			every_owned_state = {
				limit = { can_have_elections_in_state = yes
					OR = {
						check_variable = { nationality = 86 } #Southwestern
					}
				}
				add_to_variable = { RD_popularity = 0.1 }
				add_to_variable = { RD_D_bonus_popularity = 0.1 }
			}
			every_owned_state = {
				limit = { can_have_elections_in_state = yes
					OR = {
						check_variable = { nationality = 82 } #Yankee
					}
				}
				add_to_variable = { NPP_popularity = 0.15 }
				add_to_variable = { NPP_C_bonus_popularity = 0.15 }
			}
			every_owned_state = {
				limit = { can_have_elections_in_state = yes
					OR = {
						check_variable = { nationality = 85 } #Steel Belt
					}
				}
				add_to_variable = { NPP_popularity = 0.1 }
				add_to_variable = { NPP_C_bonus_popularity = 0.1 }
			}
		}
	}
}

USA_WFB_initialize_CRA_support = {
	# Set up vars with relationship
	set_variable = { WFB_CRA_RD_R_sup_sen_per = WFB_Republican_Relationship }
	set_variable = { WFB_CRA_RD_D_sup_sen_per =  WFB_Dixiecrats_Relationship }
	
	if = {
		limit = { is_ai = yes }
		
		set_variable = { WFB_CRA_RD_R_sup_sen_per = 60 }
		set_variable = { WFB_CRA_RD_D_sup_sen_per = 90 }
	}
	
	divide_variable = { WFB_CRA_RD_R_sup_sen_per = 400 }
	divide_variable = { WFB_CRA_RD_D_sup_sen_per = 400 }
	
	add_to_variable = { WFB_CRA_RD_R_sup_sen_per = 0.15 }
	add_to_variable = { WFB_CRA_RD_D_sup_sen_per = 0.15 }
	
	set_variable = { WFB_CRA_NPP_L_sup_sen_per = 0.2 }
	set_variable = { WFB_CRA_NPP_C_sup_sen_per = 0.2 }
	set_variable = { WFB_CRA_NPP_FR_sup_sen_per = 0 }
	
	set_variable = { WFB_CRA_independent_sen = 0 }
	
	USA_WFB_calculate_CRA_support = yes
}

USA_WFB_calculate_CRA_support = {
	# Setup
	set_variable = { WFB_CRA_supporting_senators = 0}
	set_variable = { WFB_CRA_RD_R_sup_sen = RD_R_senators }
	set_variable = { WFB_CRA_RD_D_sup_sen =  RD_D_senators }
	set_variable = { WFB_CRA_NPP_L_sup_sen = NPP_L_senators }
	set_variable = { WFB_CRA_NPP_C_sup_sen = NPP_C_senators }
	set_variable = { WFB_CRA_NPP_FR_sup_sen = NPP_FR_senators }
	set_variable = { WFB_CRA_NPP_Y_sup_sen = NPP_Y_senators }
	
	# Initial Support
	multiply_variable = { WFB_CRA_RD_R_sup_sen = WFB_CRA_RD_R_sup_sen_per }
	multiply_variable = { WFB_CRA_RD_D_sup_sen = WFB_CRA_RD_D_sup_sen_per }
	multiply_variable = { WFB_CRA_NPP_L_sup_sen = WFB_CRA_NPP_L_sup_sen_per }
	multiply_variable = { WFB_CRA_NPP_C_sup_sen = WFB_CRA_NPP_C_sup_sen_per }
	multiply_variable = { WFB_CRA_NPP_FR_sup_sen = WFB_CRA_NPP_FR_sup_sen_per }
	multiply_variable = { WFB_CRA_NPP_Y_sup_sen = 0 }
	
	# Round
	round_variable = WFB_CRA_RD_R_sup_sen 
	round_variable = WFB_CRA_RD_D_sup_sen
	round_variable = WFB_CRA_NPP_L_sup_sen
	round_variable = WFB_CRA_NPP_C_sup_sen
	round_variable = WFB_CRA_NPP_FR_sup_sen
	round_variable = WFB_CRA_NPP_Y_sup_sen
	
	add_to_variable = { WFB_CRA_supporting_senators = WFB_CRA_RD_R_sup_sen } 
	add_to_variable = { WFB_CRA_supporting_senators = WFB_CRA_RD_D_sup_sen }
	add_to_variable = { WFB_CRA_supporting_senators = WFB_CRA_NPP_L_sup_sen }
	add_to_variable = { WFB_CRA_supporting_senators = WFB_CRA_NPP_C_sup_sen }
	add_to_variable = { WFB_CRA_supporting_senators = WFB_CRA_NPP_FR_sup_sen }
	add_to_variable = { WFB_CRA_supporting_senators = WFB_CRA_NPP_Y_sup_sen }
	add_to_variable = { WFB_CRA_supporting_senators = WFB_CRA_independent_sen }
}

USA_WFB_moderate_CR_right = {
	if = {
		limit = {
			has_country_flag = USA_WFB_liberal_civil_rights
		}
		clr_country_flag = USA_WFB_liberal_civil_rights
		set_country_flag = USA_WFB_moderate_civil_rights
	}
	if = {
		limit = {
			has_country_flag = USA_WFB_moderate_civil_rights
			NOT = { has_completed_focus = USA_wfb_64_token_reform }
		}
		clr_country_flag = USA_WFB_moderate_civil_rights
		set_country_flag = USA_WFB_conservative_civil_rights
	}
}
USA_WFB_moderate_CR_left = {
	if = {
		limit = {
			has_country_flag = USA_WFB_conservative_civil_rights
		}
		clr_country_flag = USA_WFB_conservative_civil_rights
		set_country_flag = USA_WFB_moderate_civil_rights
	}
	if = {
		limit = {
			has_country_flag = USA_WFB_moderate_civil_rights
			NOT = { has_completed_focus = USA_wfb_64_dont_rock_boat }
		}
		clr_country_flag = USA_WFB_moderate_civil_rights
		set_country_flag = USA_WFB_liberal_civil_rights
	}
}
USA_WFB_pass_civil_rights = {
	if = {
		limit = {
			has_country_flag = USA_WFB_conservative_civil_rights
		}
		
		if = {
			limit = { has_idea = tno_minorities_segregation }
			tno_minorities_improve = yes
		}
		if = {
			limit = { NOT = { has_idea = USA_civil_rights_1 } }
			USA_increase_civil_rights = yes
		}
		hidden_effect = {
			add_to_variable = { USA_South_Discontent_ticker = 4 }
			every_owned_state = {
				limit = {
					can_have_elections_in_state = yes
					OR = {
						check_variable = { nationality = 84 } #African American
						check_variable = { nationality = 83 } #Dixie
						check_variable = { nationality = 86 } #Southwestern
					}
				}
				set_temp_variable = { popularity_bonus = 0.12 }
				add_to_variable = { RD_popularity = popularity_bonus }
				subtract_from_variable = { RD_D_bonus_popularity = popularity_bonus }
				add_to_variable = { NPP_FR_bonus_popularity = popularity_bonus }
			}
			every_owned_state = {
				limit = {
					can_have_elections_in_state = yes
					OR = {
						check_variable = { nationality = 82 } #Yankee
						check_variable = { nationality = 85 } #Steel Belt
						check_variable = { nationality = 88 } #Pacific
					}
				}
				set_temp_variable = { popularity_bonus = 0.1 }
				add_to_variable = { NPP_popularity = popularity_bonus }
				add_to_variable = { RD_D_bonus_popularity = popularity_bonus }
				add_to_variable = { NPP_C_bonus_popularity = popularity_bonus }
			}
		}
		
		custom_effect_tooltip = USA_decrease_south_discontent_tt
	}
	else_if = {
		limit = {
			has_country_flag = USA_WFB_moderate_civil_rights
		}
		if = {
			limit = {
				has_idea = tno_minorities_segregation
			}
			tno_minorities_improve = yes
		}
		if = {
			limit = { NOT = { has_idea = USA_civil_rights_1 } }
			USA_increase_civil_rights = yes
		}
		USA_increase_civil_rights = yes
		hidden_effect = {
			add_to_variable = { USA_South_Discontent_ticker = 2 }
			every_owned_state = {
				limit = {
					can_have_elections_in_state = yes
					OR = {
						check_variable = { nationality = 84 } #African American
						check_variable = { nationality = 83 } #Dixie
						check_variable = { nationality = 86 } #Southwestern
					}
				}
				set_temp_variable = { popularity_bonus = 0.21 }
				add_to_variable = { NPP_popularity = 0.08 }
				subtract_from_variable = { RD_D_bonus_popularity = popularity_bonus }
				add_to_variable = { NPP_FR_bonus_popularity = popularity_bonus }
			}
		}
		custom_effect_tooltip = USA_decrease_south_discontent_tt
	}
	else_if = {
		limit = {
			has_country_flag = USA_WFB_liberal_civil_rights
		}
		
		if = {
			limit = {
				has_idea = tno_minorities_segregation
			}
			tno_minorities_improve = yes
		}
		if = {
			limit = { NOT = { has_idea = USA_civil_rights_1 } }
			USA_increase_civil_rights = yes
		}
		USA_increase_civil_rights = yes
		hidden_effect = {
			USA_increase_civil_rights = yes
			every_owned_state = {
				limit = {
					can_have_elections_in_state = yes
					OR = {
						check_variable = { nationality = 84 } #African American
						check_variable = { nationality = 83 } #Dixie
						check_variable = { nationality = 86 } #Southwestern
					}
				}
				set_temp_variable = { popularity_bonus = 0.26 }
				subtract_from_variable = { RD_D_bonus_popularity = popularity_bonus }
				add_to_variable = { NPP_FR_bonus_popularity = popularity_bonus }
				add_to_variable = { NPP_popularity = 0.2 }
			}
			every_owned_state = {
				limit = {
					can_have_elections_in_state = yes
					OR = {
						check_variable = { nationality = 82 } #Yankee
						check_variable = { nationality = 85 } #Steel Belt
						check_variable = { nationality = 88 } #Pacific
					}
				}
				multiply_temp_variable = { popularity_bonus = 0.07 }
				add_to_variable = { RD_popularity = 0.1 }
				add_to_variable = { RD_D_bonus_popularity = popularity_bonus }
				add_to_variable = { NPP_C_bonus_popularity = popularity_bonus }
			}
		}
	}
}
USA_WFB_Clamp = {
	clamp_variable = {
		var = WFB_OFN_Business
		max = 100
		min = 0
	}
	clamp_variable = {
		var = WFB_American_Business
		max = 100
		min = 0
	}
	clamp_variable = {
		var = WFB_Mormon_Relationship
		max = 100
		min = 0
	}
	clamp_variable = {
		var = WFB_Protestant_Relationship
		max = 100
		min = 0
	}
	clamp_variable = {
		var = WFB_Republican_Relationship
		max = 100
		min = 0
	}
	clamp_variable = {
		var = WFB_Dixiecrats_Relationship
		max = 100
		min = 0
	}
	clamp_variable = {
		var = WFB_C_SA_Support
		max = 100
		min = 0
	}
	clamp_variable = {
		var = WFB_R_SA_Support
		max = 100
		min = 0
	}
	clamp_variable = {
		var = WFB_FR_SA_Support
		max = 100
		min = 0
	}
}
USA_WFB_monthly_pulse = {
	if = {
		limit = { is_ai = no }
		
		subtract_from_variable = { WFB_American_Business = 2 }
		subtract_from_variable = { WFB_OFN_Business = 2 }
		subtract_from_variable = { WFB_Mormon_Relationship = 3 }
		subtract_from_variable = { WFB_Protestant_Relationship = 3 }

		subtract_from_variable = { WFB_Republican_Relationship = WFB_Republican_Decay_Rate }
		subtract_from_variable = { WFB_Dixiecrats_Relationship = WFB_Dixiecrats_Decay_Rate }

		subtract_from_variable = { WFB_FR_SA_Support = 3 }
		subtract_from_variable = { WFB_R_SA_Support = 2 }
		subtract_from_variable = { WFB_C_SA_Support = 3}

		USA_WFB_Clamp = yes
		
		#DIXIECRAT STUFF
		if = {
			limit = {
				check_variable = { WFB_Dixiecrats_Relationship > 50 }
				NOT = { has_country_flag = WFB_NO_DEMOCRATS }
				has_completed_focus = USA_wfb_64_bennett_presidency
			}
			set_temp_variable = { WFB_Dixiecrats_Relationship_Effect = WFB_Dixiecrats_Relationship }
			divide_temp_variable = { WFB_Dixiecrats_Relationship_Effect = 20000 }
			every_owned_state = {
				limit = {
					can_have_elections_in_state = yes
					OR = {
						check_variable = { nationality = 83 } #Dixie
						check_variable = { nationality = 84 } #African-American
					}
				}
				add_to_variable = { RD_popularity = WFB_Dixiecrats_Relationship_Effect }
			}
		}

		if = {
			limit = {
				check_variable = { WFB_Dixiecrats_Relationship < 50 }
				NOT = { has_country_flag = WFB_NO_DEMOCRATS }
				has_completed_focus = USA_wfb_64_bennett_presidency
			}
			set_temp_variable = { WFB_Dixiecrats_Relationship_Effect = 100 }
			subtract_from_temp_variable = { WFB_Dixiecrats_Relationship_Effect = WFB_Dixiecrats_Relationship }
			divide_temp_variable = { WFB_Dixiecrats_Relationship_Effect = 20000 }
			every_owned_state = {
				limit = {
					can_have_elections_in_state = yes
					OR = {
						check_variable = { nationality = 83 } #Dixie
						check_variable = { nationality = 84 } #African-American
					}
				}
				subtract_from_variable = { RD_popularity = WFB_Dixiecrats_Relationship_Effect }
			}
		}

			#####REPUBLICAN RELATIONS#####
			# In memory of my friend tex
		if = {
			limit = {
				NOT = { has_country_flag = WFB_NO_REPUBLICANS }
				has_completed_focus = USA_wfb_64_bennett_presidency
			}
			set_variable = { WFB_Republican_Relationship_Effect = WFB_Republican_Relationship }
			subtract_from_variable = { WFB_Republican_Relationship_Effect = WFB_Republican_Relationship_last_month }
			divide_variable = { WFB_Republican_Relationship_Effect = 5 }
			add_to_variable = { USA_RD_Unity = WFB_Republican_Relationship_Effect }
			
			#Sets up nex month 
			set_variable = { WFB_Republican_Relationship_last_month = WFB_Republican_Relationship }
			
			if = { 
				limit = { check_variable = { WFB_Republican_Relationship_Effect < 50 } }
				set_temp_variable = { WFB_Republican_Relationship_Effect_1 = -50 }
				add_to_temp_variable = { WFB_Republican_Relationship_Effect_1 = WFB_Republican_Relationship }
				divide_temp_variable = { WFB_Republican_Relationship_Effect_1 = 100 }
				subtract_from_variable = { WFB_Republican_Relationship_Effect_1 = 0.25 }
				add_to_variable = { USA_RD_Unity = WFB_Republican_Relationship_Effect_1 }
			}
		}

	} ### AI Version, long live the silver king!
	else = {
		add_to_variable = { WFB_American_Business = 1 }
		add_to_variable = { WFB_OFN_Business = 1 }
		add_to_variable = { WFB_Mormon_Relationship = 1 }
		add_to_variable = { WFB_Protestant_Relationship = 1 }

		add_to_variable = { WFB_FR_SA_Support = 1 }
		add_to_variable = { WFB_R_SA_Support = 1 }
		add_to_variable = { WFB_C_SA_Support = 1}
	}
	
	set_temp_variable = { WFB_Republican_Relationship_Effect_2 = 100 }
	subtract_from_temp_variable = { WFB_Republican_Relationship_Effect_2 = WFB_Republican_Relationship }
	divide_temp_variable = { WFB_Republican_Relationship_Effect_2 = 5000 }
		every_owned_state = {
				limit = {
					can_have_elections_in_state = yes
					check_variable = { nationality = 82 } #Yankee
					check_variable = { NPP_popularity < 2 }
				}
			add_to_variable = { NPP_C_bonus_popularity = WFB_Republican_Relationship_Effect_2 }
			add_to_variable = { NPP_popularity = WFB_Republican_Relationship_Effect_2 }
		}
	
	USA_WFB_Clamp = yes
}

USA_WFB_relationships_check = {

	hidden_effect = {

	######AMERICAN BUSINESS#####
	if = {
		limit = { check_variable = { WFB_American_Business > 50 } }
		set_temp_variable = { WFB_American_Business_Effect = WFB_American_Business }
		divide_temp_variable = { WFB_American_Business_Effect = 500000 }
		add_to_variable = { GDP_growth = WFB_American_Business_Effect }
	}

	if = {
		limit = { check_variable = { WFB_American_Business < 50 } }
		set_temp_variable = { WFB_American_Business_Effect = 100 }
		subtract_from_temp_variable = { WFB_American_Business_Effect = WFB_American_Business }
		divide_temp_variable = { WFB_American_Business_Effect = 500000 }
		subtract_from_variable = { GDP_growth = WFB_American_Business_Effect }
	}
	#####OFN BUSINESS#####
	if = {
		limit = { check_variable = { WFB_OFN_Business > 50 } }
		set_temp_variable = { WFB_OFN_Business_Effect = WFB_OFN_Business }
		divide_temp_variable = { WFB_OFN_Business_Effect = 500000 }
		add_to_variable = { GDP_growth = WFB_OFN_Business_Effect }
		divide_temp_variable = { WFB_OFN_Business_Effect = 100 }
		add_to_variable = { interest_rates = WFB_OFN_Business_Effect }
	}

	if = {
		limit = { check_variable = { WFB_OFN_Business < 50 } }
		set_temp_variable = { WFB_OFN_Business_Effect = WFB_OFN_Business }
		divide_temp_variable = { WFB_OFN_Business_Effect = 200 }
		subtract_from_variable = { OFN_Unity = WFB_OFN_Business_Effect }
		divide_temp_variable = { WFB_OFN_Business_Effect = 100 }
		subtract_from_variable = { interest_rates = WFB_OFN_Business_Effect }
	}
	###LDS RELATIONS###
	if = {
		limit = { check_variable = { WFB_Mormon_Relationship > 50 } }
		set_temp_variable = { WFB_Mormon_Relationship_Effect = WFB_Mormon_Relationship }
		divide_temp_variable = { WFB_Mormon_Relationship_Effect = 500 }
		380 = {
			add_to_variable = { RD_popularity = WFB_Mormon_Relationship_Effect }
			add_to_variable = { RD_D_bonus_popularity = WFB_Mormon_Relationship_Effect }
			}
		387 = {
			add_to_variable = { RD_popularity = WFB_Mormon_Relationship_Effect }
			add_to_variable = { RD_D_bonus_popularity = WFB_Mormon_Relationship_Effect }
			}
		377 = {
			add_to_variable = { RD_popularity = WFB_Mormon_Relationship_Effect }
			add_to_variable = { RD_D_bonus_popularity = WFB_Mormon_Relationship_Effect }
			}
		379 = {
			add_to_variable = { RD_popularity = WFB_Mormon_Relationship_Effect }
			add_to_variable = { RD_D_bonus_popularity = WFB_Mormon_Relationship_Effect }
			}
		}

	}

	if = {
		limit = { check_variable = { WFB_Mormon_Relationship < 50 } }
		set_temp_variable = { WFB_Mormon_Relationship_Effect = 100 }
		subtract_from_temp_variable = { WFB_Mormon_Relationship_Effect = WFB_Mormon_Relationship }
		divide_temp_variable = { WFB_Mormon_Relationship_Effect = 500 }
		380 = {
			subtract_from_variable = { RD_popularity = WFB_Mormon_Relationship_Effect }
			subtract_from_variable = { RD_D_bonus_popularity = WFB_Mormon_Relationship_Effect }
			}
		387 = {
			subtract_from_variable = { RD_popularity = WFB_Mormon_Relationship_Effect }
			subtract_from_variable = { RD_D_bonus_popularity = WFB_Mormon_Relationship_Effect }
			}
		377 = {
			subtract_from_variable = { RD_popularity = WFB_Mormon_Relationship_Effect }
			subtract_from_variable = { RD_D_bonus_popularity = WFB_Mormon_Relationship_Effect }
			}
		379 = {
			subtract_from_variable = { RD_popularity = WFB_Mormon_Relationship_Effect }
			subtract_from_variable = { RD_D_bonus_popularity = WFB_Mormon_Relationship_Effect }
			}
			multiply_temp_variable = { WFB_Mormon_Relationship_Effect = 10 }
			set_variable = { USA_campaigning_multiplier = WFB_Mormon_Relationship_Effect }
		}
	if = {
		limit = {
		check_variable = { WFB_Mormon_Relationship < 50 }
		check_variable = { WFB_Mormon_Relationship > 25 }
		}
		random_list = {
			20 = {
				country_event = { id = WFB.Chains.120 days = 35 }
				}
			80 = {
				#
				}
			}
		}
	if = {
		limit = {
		check_variable = { WFB_Mormon_Relationship < 25 }
		check_variable = { WFB_Mormon_Relationship > 10 }
		}
		random_list = {
			25 = {
				country_event = { id = WFB.Chains.120 days = 35 }
				}
			75 = {
				#
				}
			}
		}
	if = {
		limit = {
		check_variable = { WFB_Mormon_Relationship < 10 }
		}
		random_list = {
			40 = {
				country_event = { id = WFB.Chains.120 days = 35 }
				}
			60 = {
				#
				}
			}
		}
	##catholic relations
	if = {
		limit = { check_variable = { WFB_Protestant_Relationship > 50 } }
		
		set_temp_variable = { WFB_Protestant_Relationship_Effect = WFB_Protestant_Relationship }
		divide_temp_variable = { WFB_Protestant_Relationship_Effect = 500 }
		
		376 = {
			add_to_variable = { RD_popularity = WFB_Protestant_Relationship_Effect }
			add_to_variable = { RD_D_bonus_popularity = WFB_Protestant_Relationship_Effect }
			US_underdog_NPP_2_2 = yes
		}
		359 = {
			add_to_variable = { RD_popularity = WFB_Protestant_Relationship_Effect }
			add_to_variable = { RD_D_bonus_popularity = WFB_Protestant_Relationship_Effect }
			US_underdog_NPP_2_2 = yes
		}
		948 = {
			add_to_variable = { RD_popularity = WFB_Protestant_Relationship_Effect }
			add_to_variable = { RD_D_bonus_popularity = WFB_Protestant_Relationship_Effect }
			US_underdog_NPP_2_2 = yes
		}
		949 = {
			add_to_variable = { RD_popularity = WFB_Protestant_Relationship_Effect }
			add_to_variable = { RD_D_bonus_popularity = WFB_Protestant_Relationship_Effect }
			US_underdog_NPP_2_2 = yes
		}
	}

	if = {
		limit = { check_variable = { WFB_Protestant_Relationship < 50 } }
		
		set_temp_variable = { WFB_Protestant_Relationship_Effect = 100 }
		subtract_from_temp_variable = { WFB_Protestant_Relationship_Effect = WFB_Protestant_Relationship }
		divide_temp_variable = { WFB_Protestant_Relationship_Effect = 500 }
		
		376 = {
			subtract_from_variable = { RD_popularity = WFB_Protestant_Relationship_Effect }
			subtract_from_variable = { RD_D_bonus_popularity = WFB_Protestant_Relationship_Effect }
			US_underdog_RD_2_2 = yes
		}
		359 = {
			subtract_from_variable = { RD_popularity = WFB_Protestant_Relationship_Effect }
			subtract_from_variable = { RD_D_bonus_popularity = WFB_Protestant_Relationship_Effect }
			US_underdog_RD_2_2 = yes
		}
		948 = {
			subtract_from_variable = { RD_popularity = WFB_Protestant_Relationship_Effect }
			subtract_from_variable = { RD_D_bonus_popularity = WFB_Protestant_Relationship_Effect }
			US_underdog_RD_2_2 = yes
		}
		949 = {
			subtract_from_variable = { RD_popularity = WFB_Protestant_Relationship_Effect }
			subtract_from_variable = { RD_D_bonus_popularity = WFB_Protestant_Relationship_Effect }
			US_underdog_RD_2_2 = yes
		}
	}
}


#####################################
#   ROBERT F KENNEDY'S PRESIDENCY   #
#####################################

USA_RFK_flavor1 = { #days = 0 is 20th jan 1964
	hidden_effect = {
		country_event = { id = bobby.f.1 days = 669 } #Henry Wallace's funeral
	}
}

USA_RFK_Union_Happiness_Check = {
	if = {
		limit = {
			check_variable = { RFK_Union_Satisfaction > 19 }
		}
		random_list = {
			25 = {
				country_event = { id = bobby.205 days = 5 }
			}
			75 = {
				#
			}
		}
		every_owned_state = {
			limit = {
				can_have_elections_in_state = yes
				OR = {
					check_variable = { nationality = 82 } #Yankee
					check_variable = { nationality = 85 } #Steel belt
				}
			}
			add_to_variable = { NPP_C_bonus_popularity = 0.04 } #Happy unionists support you more
			add_to_variable = { NPP_popularity = 0.04 }
			subtract_from_variable = { NPP_L_bonus_popularity = 0.02 } #and gus less
		}
		every_owned_state = {
			limit = {
				can_have_elections_in_state = yes
				OR = {
					check_variable = { nationality = 83 } #Dixie
					check_variable = { nationality = 84 } #African American
					check_variable = { nationality = 86 } #Southwestern
					check_variable = { nationality = 337 } #Unchanging Corn
				}
			}
			subtract_from_variable = { NPP_C_bonus_popularity = 0.02 } #rest of the country isnt too happy
			subtract_from_variable = { NPP_popularity = 0.02 }
			add_to_variable = { NPP_Y_bonus_popularity = 0.01 } #gamer points since you went all in
		}
	}

	if = {
		limit = {
			check_variable = { RFK_Union_Satisfaction > 14 }
			check_variable = { RFK_Union_Satisfaction < 20 }
		}
		random_list = {
			25 = {
				country_event = { id = bobby.206 days = 5 }
			}
			75 = {
			#
			}
		}
		every_owned_state = {
			limit = {
				can_have_elections_in_state = yes
				OR = {
					check_variable = { nationality = 82 } #Yankee
					check_variable = { nationality = 85 } #Steel belt
				}
			}
			add_to_variable = { NPP_C_bonus_popularity = 0.02 }
			add_to_variable = { NPP_popularity = 0.02 }
			subtract_from_variable = { NPP_L_bonus_popularity = 0.01 }
		}
		every_owned_state = {
			limit = {
				can_have_elections_in_state = yes
				OR = {
					check_variable = { nationality = 83 } #Dixie
					check_variable = { nationality = 84 } #African American
					check_variable = { nationality = 86 } #Southwestern
					check_variable = { nationality = 337 } #Unchanging Corn
				}
			}
			subtract_from_variable = { NPP_C_bonus_popularity = 0.01 }
			subtract_from_variable = { NPP_popularity = 0.01 }
		}
	}

	if = {
		limit = {
			check_variable = { RFK_Union_Satisfaction > 9 }
			check_variable = { RFK_Union_Satisfaction < 15 }
		}
	}
	
	if = {
		limit = {
			check_variable = { RFK_Union_Satisfaction > 4 }
			check_variable = { RFK_Union_Satisfaction < 10 }
		}
		random_list = {
			25 = {
				country_event = { id = bobby.208 days = 5 }
			}
			75 = {
			#
			}
		}
		every_owned_state = {
			limit = {
				can_have_elections_in_state = yes
				OR = {
					check_variable = { nationality = 82 } #Yankee
					check_variable = { nationality = 85 } #steel belt
				}
			}
			add_to_variable = { NPP_L_bonus_popularity = 0.02 } #Radicalization
			subtract_from_variable = { NPP_C_bonus_popularity = 0.025 }

			add_to_variable = { RD_popularity = 0.01 } #And unionists going to the reps
			subtract_from_variable = { NPP_popularity = 0.01 }
			add_to_variable = { RD_R_bonus_popularity = 0.01 }
		}
	}
	
	if = {
		limit = {
			check_variable = { RFK_Union_Satisfaction < 5 }
		}
		add_to_variable = { USA_NPP_Unity = 1 }
		random_list = {
			25 = {
				country_event = { id = bobby.209 days = 5 }
			}
			75 = {
			#
				}
			}
		every_owned_state = {
			limit = {
			can_have_elections_in_state = yes
			OR = {
				check_variable = { nationality = 82 } #Yankee
				check_variable = { nationality = 85 } #steel belt
				}
			}
			add_to_variable = { NPP_L_bonus_popularity = 0.04 } #Radicalization
			subtract_from_variable = { NPP_C_bonus_popularity = 0.05 }

			add_to_variable = { RD_popularity = 0.02 } #And unionists going to the reps
			subtract_from_variable = { NPP_popularity = 0.02 }
			add_to_variable = { RD_R_bonus_popularity = 0.02 }
		}
	}
}

USA_RFK_Liberalism_Check = {
	if = {
		limit = {
			check_variable = { RFK_Liberalism > 19 }
		}
		random_list = {
			25 = {
			country_event = { id = bobby.200 days = 5 }
			}
			75 = {
			#
			}
		}
		# Commented out and the will talk with Other Guy and Walker
		# add_to_variable = { RFK_Assassination_Level = 2.5 }
		add_to_variable = { USA_NPP_Unity = -1 }
		every_owned_state = {
			limit = {
				can_have_elections_in_state = yes
				OR = {
					check_variable = { nationality = 82 } #Yankee
					check_variable = { nationality = 85 } #Steel Belt
					check_variable = { nationality = 84 } #African American
				}
			}
			add_to_variable = { NPP_C_bonus_popularity = 0.05 } #Happy for CR
			add_to_variable = { NPP_popularity = 0.05 }
			add_to_variable = { NPP_L_bonus_popularity = -0.01 } #why vote LNPP lol, RFK is the man
			US_underdog_RD_2_2 = yes
		}
		
		every_owned_state = {
			limit = {
				can_have_elections_in_state = yes
				OR = {
					check_variable = { nationality = 86 } #Southwestern
					check_variable = { nationality = 88 } #Pacific
				}
			}
			subtract_from_variable = { NPP_FR_bonus_popularity = 0.05 } #Pissed with CR, moved to Dems
			add_to_variable = { NPP_Y_bonus_popularity = 0.01 } #radicalized FRNPP
			add_to_variable = { RD_D_bonus_popularity = 0.035 }
			subtract_from_variable = { NPP_popularity = 0.05 }
			US_underdog_RD_2_2 = yes
		}
		
		every_owned_state = {
			limit = {
				can_have_elections_in_state = yes
				OR = {
				check_variable = { nationality = 83 } #Dixies
				}
			}
			subtract_from_variable = { NPP_FR_bonus_popularity = 0.075 } #same but more in dixieland
			add_to_variable = { NPP_Y_bonus_popularity = 0.015 } #radicalized FRNPP
			add_to_variable = { RD_D_bonus_popularity = 0.065 }
			subtract_from_variable = { NPP_popularity = 0.075 }
			US_underdog_RD_2_2 = yes
		}
	}
	
	if = {
		limit = {
			check_variable = { RFK_Liberalism > 14 }
			check_variable = { RFK_Liberalism < 20 }
		}
		random_list = {
			25 = {
				country_event = { id = bobby.201 days = 5 }
			}
			75 = {
				# Nothing Happens
			}
		}
		every_owned_state = {
			limit = {
			can_have_elections_in_state = yes
			OR = {
					check_variable = { nationality = 82 } #Yankee
				}
			}
			add_to_variable = { NPP_C_bonus_popularity = 0.025 }
			add_to_variable = { NPP_popularity = 0.025 }
			#No underdog effect, it would be stronger then the actual change
		}
		every_owned_state = {
			limit = {
				can_have_elections_in_state = yes
				OR = {
					check_variable = { nationality = 86 } #Southwestern
					check_variable = { nationality = 88 } #Pacific
				}
			}
			subtract_from_variable = { NPP_FR_bonus_popularity = 0.025 }
			add_to_variable = { RD_D_bonus_popularity = 0.025 }
			subtract_from_variable = { NPP_popularity = 0.025 }
			#No underdog effect, it would be stronger then the actual change
		}
		every_owned_state = {
			limit = {
				can_have_elections_in_state = yes
				OR = {
					check_variable = { nationality = 83 } #Dixies
				}
			}
			subtract_from_variable = { NPP_FR_bonus_popularity = 0.05 }
			add_to_variable = { RD_D_bonus_popularity = 0.05 }
			subtract_from_variable = { NPP_popularity = 0.05 }
			#No underdog effect, it would be stronger then the actual change
		}
	}
	if = {
		limit = {
			check_variable = { RFK_Liberalism > 9 }
			check_variable = { RFK_Liberalism < 15 }
		}
		random_list = {
			25 = {
				country_event = { id = bobby.202 days = 5 }
			}
			75 = {
				# Nothing Happens
			}
		}
		#add_to_variable = { RFK_Assassination_Level = -2.0 } #WHY? still lib
		#NEUTRAL
	}

	if = {
		limit = {
			check_variable = { RFK_Liberalism > 4 }
			check_variable = { RFK_Liberalism < 10 }
		}
		random_list = {
			25 = {
				country_event = { id = bobby.203 days = 5 }
			}
			75 = {
				# Nothing Happens
			}
		}
		add_to_variable = { RFK_Assassination_Level = -1 }
		every_owned_state = {
			limit = {
				can_have_elections_in_state = yes
				OR = {
					check_variable = { nationality = 82 } #Yankee
					check_variable = { nationality = 85 } #Steelbelt
				}
			}	
			add_to_variable = { RD_popularity = 0.025 } 
			add_to_variable = { NPP_popularity = -0.025 }
			add_to_variable = { RD_R_bonus_popularity = 0.01 } #Party switches to the more liberal republicans

			add_to_variable = { NPP_L_bonus_popularity = 0.01 } #Radicalization
			add_to_variable = { NPP_C_bonus_popularity = -0.025 } #Loss of pop
			#No underdog effect, it would be stronger then the actual change
		}
	}
	
	if = {
		limit = {
			check_variable = { RFK_Liberalism < 5 }
		}
		add_to_variable = { USA_NPP_Unity = 1 }
		random_list = {
			25 = {
				country_event = { id = bobby.204 days = 5 }
			}
			75 = {
				#
			}
		}
		add_to_variable = { RFK_Assassination_Level = -2 }
		every_owned_state = {
			limit = {
				can_have_elections_in_state = yes
				OR = {
					check_variable = { nationality = 82 } #Yankee
					check_variable = { nationality = 85 } #Steelbelt
				}
			}
			add_to_variable = { RD_popularity = 0.05 } 
			add_to_variable = { NPP_popularity = -0.05 }
			add_to_variable = { RD_R_bonus_popularity = 0.025 } #Party switches to the more liberal republicans

			add_to_variable = { NPP_L_bonus_popularity = 0.025 } #Radicalization
			add_to_variable = { NPP_C_bonus_popularity = -0.05 } #Loss of pop
			US_underdog_RD_2_2 = yes
		}
	}
}

USA_RFK_Count_Up_The_Votes = {
	set_variable = { RFK_CRA_Total_Votes = 0 }
	add_to_variable = { RFK_CRA_Total_Votes = temporary_congress_votes }
	add_to_variable = { RFK_CRA_Total_Votes = NPP_C_senators }
	round_variable = RFK_CRA_Total_Votes
}

USA_RFK_Assassination = {
	log = "[GetDateText]: [Root.GetName]: RFK_Assassination_Level assassination level [?USA.RFK_Assassination_Level] RFK_Assassination_Target [?USA.RFK_Assassination_Target]"

	add_to_variable = { RFK_Assassination_Target = RFK_Assassination_Level }
	if = {
		limit = { check_variable = { RFK_Assassination_Target > 250 } NOT = { has_game_rule = { rule = USA_DISABLE_RFK_ASSASSINATION option = USA_DISABLE_RFK_ASSASSINATION_YES } }  }
		country_event = { id = bobby.84 days = 10 random_days = 9 }
	}
}


USA_RFK_Beaten_Filibuster = {
	if = {
		limit = {
			check_variable = { RFK_CRA_Total_Votes < 60 }
		}
		set_country_flag = RFK_Filibuster_Beaten
		country_event = { id = bobby.cra.16 days = 1 }
	}
}


USA_RFK_CRA_Filibuster = {
	if = {
		limit = {
			check_variable = { RFK_CRA_Filibuster_Chance = 0 }
			check_variable = { RFK_CRA_Total_Votes > 59 }
		}
		random_list = { #No Filibuster
			100 = {
				country_event = { id = bobby.cra.11 days = 1 }
			}
			0 = {
				country_event = { id = bobby.cra.7 days = 1 }
			}
		}
	}

	if = {
		limit = {
			check_variable = { RFK_CRA_Filibuster_Chance = 1 }
			check_variable = { RFK_CRA_Total_Votes < 60 }
		}
		random_list = { #No Filibuster
			90 = {
				country_event = {
					id = bobby.cra.11
					days = 1
					}
			}
			10 = {
				country_event = { id = bobby.cra.7 days = 1 }
			}
		}
	}

	if = {
		limit = {
			check_variable = { RFK_CRA_Filibuster_Chance = 2 }
			check_variable = { RFK_CRA_Total_Votes < 60 }
		}
		random_list = { #No Filibuster
			70 = {
				country_event = { id = bobby.cra.11 days = 1 }
			}
			30 = {
				country_event = { id = bobby.cra.7 days = 1 }
			}
		}
	}

	if = {
		limit = {
			check_variable = { RFK_CRA_Filibuster_Chance = 3 }
			check_variable = { RFK_CRA_Total_Votes < 60 }
		}
		random_list = { #No Filibuster
			50 = {
				country_event = { id = bobby.cra.11 days = 1 }
			}
			50 = {
				country_event = { id = bobby.cra.7 days = 1 }
			}
		}
	}

	if = {
		limit = {
			check_variable = { RFK_CRA_Filibuster_Chance = 4 }
			check_variable = { RFK_CRA_Total_Votes < 60 }
		}
		random_list = { #No Filibuster
			30 = {
				country_event = { id = bobby.cra.11 days = 1 }
			}
			70 = {
				country_event = { id = bobby.cra.7 days = 1 }
			}
		}
	}

	if = {
		limit = {
			check_variable = { RFK_CRA_Filibuster_Chance = 5 }
			check_variable = { RFK_CRA_Total_Votes < 60 }
		}
		random_list = { #No Filibuster
			20 = {
				country_event = { id = bobby.cra.11 days = 1 }
			}
			80 = {
				country_event = { id = bobby.cra.7 days = 1 }
			}
		}
	}
	if = {
		limit = {
			check_variable = {
				var = RFK_CRA_Total_Votes
				value = 60
				compare = greater_than_or_equals
			}
		}
		country_event = { id = bobby.cra.11 days = 1 }
	}
}



USA_RFK_paa_effect = {
	if = {
		limit = {
			check_variable = {
				var = rfk_party_above_all_var
				value = 10
				compare = greater_than
			}
		}
		set_variable = { rfk_party_above_all_var = 10 }
		set_temp_variable = { RFK_FR_temp_votes = NPP_FR_senators}
		divide_variable = { rfk_party_above_all_var = 10 }
		multiply_temp_variable = { RFK_FR_temp_votes = rfk_party_above_all_var }
		round_variable = RFK_FR_temp_votes
		add_to_variable = {temporary_congress_votes = RFK_FR_temp_votes}
	}

	else_if = {
		limit = {
			check_variable = {
				var = rfk_party_above_all_var
				value = 0
				compare = greater_than_or_equals
			}
			check_variable = {
				var = rfk_party_above_all_var
				value = 10
				compare = less_than_or_equals
			}
		}
		set_temp_variable = { RFK_FR_temp_votes = NPP_FR_senators}
		divide_variable = { rfk_party_above_all_var = 10 }
		multiply_temp_variable = { RFK_FR_temp_votes = rfk_party_above_all_var }
		round_variable = RFK_FR_temp_votes
		add_to_variable = {temporary_congress_votes = RFK_FR_temp_votes}
	}

	else_if = {
		limit = {
			check_variable = {
				var = rfk_party_above_all_var
				value = 0
				compare = less_than
			}
		}
		set_variable = { rfk_party_above_all_var = 0 }
		set_temp_variable = { RFK_FR_temp_votes = NPP_FR_senators}
		divide_variable = { rfk_party_above_all_var = 10 }
		multiply_temp_variable = { RFK_FR_temp_votes = rfk_party_above_all_var }
		round_variable = RFK_FR_temp_votes
		add_to_variable = {temporary_congress_votes = RFK_FR_temp_votes}
	}
}

USA_RFK_Republican_Goodwill_Vote_Count = {
	if = {
		limit = {
			check_variable = {
				var = USA_RFK_Republican_Goodwill
				value = 10
				compare = greater_than
			}
		}
		set_variable = { USA_RFK_Republican_Goodwill = 10 }
		set_temp_variable = { RFK_R_temp_votes = RD_R_senators}
		divide_variable = { USA_RFK_Republican_Goodwill  = 10 }
		multiply_temp_variable = { RFK_R_temp_votes = USA_RFK_Republican_Goodwill }
		round_variable = RFK_R_temp_votes
		add_to_variable = {temporary_congress_votes = RFK_R_temp_votes}
		round_variable = temporary_congress_votes
	}

	else_if = {
		limit = {
			check_variable = {
				var = USA_RFK_Republican_Goodwill
				value = 0
				compare = greater_than_or_equals
			}
			check_variable = {
				var = USA_RFK_Republican_Goodwill
				value = 10
				compare = less_than_or_equals
			}
		}
		set_temp_variable = { RFK_R_temp_votes = RD_R_senators}
		divide_variable = { USA_RFK_Republican_Goodwill = 10 }
		multiply_temp_variable = { RFK_R_temp_votes = USA_RFK_Republican_Goodwill }
		add_to_variable = {temporary_congress_votes = RFK_R_temp_votes }
		round_variable = temporary_congress_votes
	}

	else_if = {
		limit = {
			check_variable = {
				var = USA_RFK_Republican_Goodwill
				value = 0
				compare = less_than
			}
		}
		set_variable = { USA_RFK_Republican_Goodwill = 1 }
		set_temp_variable = { RFK_R_temp_votes = RD_R_senators}
		divide_variable = { USA_RFK_Republican_Goodwill = 10 }
		multiply_temp_variable = { RFK_R_temp_votes = USA_RFK_Republican_Goodwill }
		round_variable = RFK_R_temp_votes
		add_to_variable = {temporary_congress_votes = RFK_R_temp_votes}
		round_variable = temporary_congress_votes
	}
}

RFK_Count_CRA_Votes = {

	hidden_effect = {
		USA_get_total_congress_votes = yes
		set_variable = { RFK_CRA_Final_Vote_Count = 0  }
		add_to_variable = { RFK_CRA_Final_Vote_Count = temporary_congress_votes }
		add_to_variable = { RFK_CRA_Final_Vote_Count = total_congress_votes }
	}

	if = { # Passes
		limit = {
			OR = {
				check_variable = {
					var = RFK_CRA_Final_Vote_Count
					value = 50
					compare = greater_than
				}
				has_game_rule = {
					rule = USA_BILL_PASS_CHEAT_1964
					option = USA_BILL_PASS_CHEAT_1964_YES
				}
			}
		}
		country_event = { id = bobby.cra.14 }
	}

	if = { # Fails
		limit = {
			check_variable = {
				var = RFK_CRA_Final_Vote_Count
				value = 50
				compare = less_than
			}
			NOT = {
				has_game_rule = {
					rule = USA_BILL_PASS_CHEAT_1964
					option = USA_BILL_PASS_CHEAT_1964_YES
				}
			}
		}
		country_event = { id = bobby.cra.15 }
	}
}


USA_RFK_fails_civil_rights = {
	
	custom_effect_tooltip = RFK_Subtract_Liberalism
	add_to_variable = { RFK_Liberalism = -10 } #failure here means no CRA, needs to be harsh (RFK presidency is fucked from here on anyways). Trust is destroyed, will need a lot to rebuild
	#set_variable = { RFK_Assassination_Level = 2 } #no need for that lol

	### Regular Effects:

	add_stability = -0.05

	add_popularity = {
		ideology = social_democrat
		popularity = -0.1
	}

	add_popularity = {
		ideology = authoritarian_democrat
		popularity = 0.03
	}

	add_popularity = {
		ideology = social_conservative
		popularity = 0.06
	}

	### Goodbye South And African Americans!
	hidden_effect = {
		USA_RFK_cra_0 = yes
	}
}

USA_RFK_pass_civil_rights = {

	if = { #Civil Rights Act Passes Fully
		log = "[GetDateText]: [Root.GetName]: Maximum RFK Civil Rights"
		limit = {check_variable = { RFK_CRA_Power_Var = 5 } }
		USA_decrease_depression = yes
		#Variable Effects
		custom_effect_tooltip = RFK_Add_Liberalism
		add_to_variable = { RFK_Liberalism = 7 }

		USA_increase_civil_rights = yes
		hidden_effect = { USA_increase_civil_rights = yes }
		hidden_effect = { USA_increase_civil_rights = yes }
		hidden_effect = { USA_increase_civil_rights = yes }
		hidden_effect = { USA_increase_civil_rights = yes }
		set_variable = { RFK_Assassination_Level = 7 }


		### Change Military Integration
		swap_ideas = {
			remove_idea = tno_racial_integration_integrated_military
			add_idea = tno_racial_integration_enforced_integration
		}
		### Change Voting Rights
		swap_ideas = {
			remove_idea = tno_vote_franchise_universal
			add_idea = tno_vote_franchise_support_disenfranchised
		}
		### Change Minority Rights
		swap_ideas = {
			remove_idea = tno_minorities_segregation
			add_idea = tno_minorities_affirmative_action
		}

		### Regular Effects:

		add_stability = 0.1

		add_popularity = {
			ideology = social_democrat
			popularity = 0.08
		}

		add_popularity = {
			ideology = authoritarian_democrat
			popularity = -0.05
		}

		add_popularity = {
			ideology = social_conservative
			popularity = -0.03
		}

		### Goodbye South! Hello African Americans!
		hidden_effect = {
			USA_RFK_cra_4 = yes
		}
	}

	if = { #Civil Rights Act Passes Mostly
		log = "[GetDateText]: [Root.GetName]: Mostly RFK Civil Rights"
		limit = { check_variable = { RFK_CRA_Power_Var = 4 } }
		USA_decrease_depression = yes
		custom_effect_tooltip = RFK_Add_Liberalism
		add_to_variable = { RFK_Liberalism = 5 }

		USA_increase_civil_rights = yes
		hidden_effect = { USA_increase_civil_rights = yes }
		hidden_effect = { USA_increase_civil_rights = yes }
		hidden_effect = { USA_increase_civil_rights = yes }
		set_variable = { RFK_Assassination_Level = 5 }

		### Change Military Integration
		swap_ideas = {
			remove_idea = tno_racial_integration_integrated_military
			add_idea = tno_racial_integration_enforced_integration
		}
		### Change Voting Rights
		swap_ideas = {
			remove_idea = tno_vote_franchise_universal
			add_idea = tno_vote_franchise_support_disenfranchised
		}
		### Change Minority Rights
		swap_ideas = {
			remove_idea = tno_minorities_segregation
			add_idea = tno_minorities_equal_rights
		}
		### Regular Effects:

		add_stability = 0.07

		add_popularity = {
			ideology = social_democrat
			popularity = 0.06
		}

		add_popularity = {
			ideology = authoritarian_democrat
			popularity = -0.04
		}

		add_popularity = {
			ideology = social_conservative
			popularity = -0.02
		}

		### Goodbye South! Hello African Americans!
		hidden_effect = {
			USA_RFK_cra_4 = yes
		}
	}

	if = { #Civil Rights Act Passes
		log = "[GetDateText]: [Root.GetName]: Passes RFK Civil Rights"
		limit = {check_variable = { RFK_CRA_Power_Var = 3 } }
		USA_decrease_depression = yes
		custom_effect_tooltip = RFK_Add_Liberalism
		add_to_variable = { RFK_Liberalism = 3 }

		USA_increase_civil_rights = yes
		hidden_effect = { USA_increase_civil_rights = yes }
		set_variable = { RFK_Assassination_Level = 4 }
		### Change Military Integration
		swap_ideas = {
			remove_idea = tno_racial_integration_integrated_military
			add_idea = tno_racial_integration_enforced_integration
		}
		### Change Minority Rights
		swap_ideas = {
			remove_idea = tno_minorities_segregation
			add_idea = tno_minorities_equal_rights
		}
		### Regular Effects:

		add_stability = 0.05

		add_popularity = {
			ideology = social_democrat
			popularity = 0.05
		}

		add_popularity = {
			ideology = authoritarian_democrat
			popularity = -0.03
		}

		add_popularity = {
			ideology = social_conservative
			popularity = -0.02
		}

		### Goodbye South! Hello African Americans!
		hidden_effect = {
			USA_RFK_cra_23 = yes
		}
	}


	if = { #Civil Rights Act Passes, sorta
		log = "[GetDateText]: [Root.GetName]: sorta RFK Civil Rights"
		limit = {check_variable = { RFK_CRA_Power_Var = 2 } }
		custom_effect_tooltip = RFK_Add_Liberalism
		add_to_variable = { RFK_Liberalism = 1 }

		USA_increase_civil_rights = yes
		set_variable = { RFK_Assassination_Level = 3 }
		### Change Minority Rights
		swap_ideas = {
			remove_idea = tno_minorities_segregation
			add_idea = tno_minorities_equal_rights
		}

		### Regular Effects:

		add_stability = 0.03

		add_popularity = {
			ideology = social_democrat
			popularity = 0.03
		}

		add_popularity = {
			ideology = authoritarian_democrat
			popularity = -0.02
		}

		add_popularity = {
			ideology = social_conservative
			popularity = -0.01
		}

		### Goodbye South! Hello African Americans! (sorta...)
		hidden_effect = {
			USA_RFK_cra_1 = yes
		}
	}
}


USA_RFK_cra_0 = {
	every_owned_state = { #CRA positive
		limit = {
			can_have_elections_in_state = yes
			OR = {
				check_variable = { nationality = 82 }
				check_variable = { nationality = 88 }
			}
		}
		#RD largest - D
		if = {
			limit = {
				check_variable = { RD_popularity > NPP_popularity }
				check_variable = { RD_D_bonus_popularity > RD_R_bonus_popularity }
			}
			add_to_variable = { NPP_FR_bonus_popularity = 0.2}
			add_to_variable = { RD_D_bonus_popularity = 0.1}
			multiply_variable = { RD_popularity = 1.1 }
			multiply_variable = { NPP_popularity = 0.8}
		}
		#RD largest - R
		if = {
			limit = {
				check_variable = { RD_popularity > NPP_popularity }
				check_variable = { RD_D_bonus_popularity < RD_R_bonus_popularity }
			}
			if = {
				limit = { USA = {check_variable = { USA_RFK_Republican_Goodwill > 5 } } }
				set_variable = { RD_popularity = NPP_popularity }
				random_list = {
					70 = { add_to_variable = { RD_popularity = 0.25}}
					10 = { add_to_variable = { NPP_popularity = 0.30}}
				}
			}
			else = {
				subtract_from_variable = {NPP_popularity = 0.5 }
				multiply_variable = { RD_popularity = 1.1 }
				add_to_variable = { RD_popularity = 0.75 }
				add_to_variable = { RD_R_bonus_popularity = 0.5 }
				add_to_variable = { NPP_L_bonus_popularity = 0.15 }
			}

		}
		#NPP largest - C
		if = {
			limit = {
				check_variable = { RD_popularity < NPP_popularity }
				check_variable = { NPP_C_bonus_popularity > NPP_FR_bonus_popularity }
			}
			if = {
				limit = { USA = {check_variable = { USA_RFK_Republican_Goodwill > 5 } } }
				subtract_from_variable = { RD_popularity = 0.25 }
				subtract_from_variable = { RD_R_bonus_popularity = 0.15 }
				add_to_variable = { NPP_L_bonus_popularity = 0.25 }

			}
			else = {
				subtract_from_variable = {NPP_popularity = 0.5 }
				multiply_variable = { RD_popularity = 1.5 }
				multiply_variable = { NPP_popularity = 0.9 }
				add_to_variable = { RD_R_bonus_popularity = 0.5 }
				add_to_variable = { NPP_L_bonus_popularity = 0.25 }
			}
		}
		#NPP largest - FR
		if = {
			limit = {
				check_variable = { RD_popularity < NPP_popularity }
				check_variable = { NPP_C_bonus_popularity < NPP_FR_bonus_popularity }
			}
			subtract_from_variable = { NPP_FR_bonus_popularity = 0.05}
			add_to_variable = { NPP_popularity = 0.15}
		}
	}
 	every_owned_state = { #CRA NEUTRAL
		limit = {
			can_have_elections_in_state = yes
			OR = {
				check_variable = { nationality = 85 }
				check_variable = { nationality = 86 }
				check_variable = { nationality = 87 }
			}
		}
		#RD largest - D
		if = {
			limit = {
				check_variable = { RD_popularity > NPP_popularity }
				check_variable = { RD_D_bonus_popularity > RD_R_bonus_popularity }
			}
			add_to_variable = { RD_D_bonus_popularity = 0.4}
		}
		#RD largest - R
		if = {
			limit = {
				check_variable = { RD_popularity > NPP_popularity }
				check_variable = { RD_D_bonus_popularity < RD_R_bonus_popularity }
			}
			if = {
				limit = { USA = {check_variable = { USA_RFK_Republican_Goodwill > 5 } } }
				set_variable = { RD_R_bonus_popularity = RD_D_bonus_popularity }
				random_list = {
					50 = { add_to_variable = { RD_R_bonus_popularity = 0.25}}
					50 = { add_to_variable = { RD_D_bonus_popularity = 0.25}}
				}
			}
			else = {
				subtract_from_variable = {NPP_popularity = 0.4 }
				add_to_variable = { RD_popularity = 0.6 }
				add_to_variable = { RD_R_bonus_popularity = 0.25 }
			}
		}
		#NPP largest - C
		if = {
			limit = {
				check_variable = { RD_popularity < NPP_popularity }
				check_variable = { NPP_C_bonus_popularity > NPP_FR_bonus_popularity }
			}
			subtract_from_variable = {NPP_popularity = 0.5 }
			multiply_variable = { RD_popularity = 1.5 }
			random_list = {
				40 = { add_to_variable = { RD_R_bonus_popularity = 0.3 }}
				60 = { add_to_variable = { RD_D_bonus_popularity = 0.3 }}
			}
		}
		#NPP largest - FR
		if = {
			limit = {
				check_variable = { RD_popularity < NPP_popularity }
				check_variable = { NPP_C_bonus_popularity < NPP_FR_bonus_popularity }
			}
			subtract_from_variable = { NPP_C_bonus_popularity = 0.1 }
			add_to_variable = { NPP_popularity = 0.2 }
		}
	}
 	every_owned_state = { #CRA Negative
		limit = {
			can_have_elections_in_state = yes
			OR = {
				check_variable = { nationality = 83 }
				check_variable = { nationality = 84 }
			}
		}
		#RD largest - D
		if = {
			limit = {
				check_variable = { RD_popularity > NPP_popularity }
				check_variable = { RD_D_bonus_popularity > RD_R_bonus_popularity }
			}
			subtract_from_variable = { RD_R_bonus_popularity = 0.15}
			add_to_variable = { RD_popularity = 0.25 }
		}
		#RD largest - R
		if = {
			limit = {
				check_variable = { RD_popularity > NPP_popularity }
				check_variable = { RD_D_bonus_popularity < RD_R_bonus_popularity }
			}
			if = {
				limit = { USA = {check_variable = { USA_RFK_Republican_Goodwill > 5 } } }
				subtract_from_variable = {NPP_popularity = 0.75 }
				add_to_variable = { RD_popularity = 1}
				add_to_variable = { RD_R_bonus_popularity = 0.5 }
			}
			else = {
				add_to_variable = { RD_popularity = 1}
				add_to_variable = { RD_R_bonus_popularity = 0.5 }
			}
		}
		#NPP largest - C
		if = {
			limit = {
				check_variable = { RD_popularity < NPP_popularity }
				check_variable = { NPP_C_bonus_popularity > NPP_FR_bonus_popularity }
			}
			subtract_from_variable = {NPP_popularity = 0.75 }
			add_to_variable = { RD_popularity = 1}
			add_to_variable = { RD_R_bonus_popularity = 0.5 }
		}
		#NPP largest - FR
		if = {
			limit = {
				check_variable = { RD_popularity < NPP_popularity }
				check_variable = { NPP_C_bonus_popularity < NPP_FR_bonus_popularity }
			}
			if = {
				limit = {USA = {check_variable = {rfk_party_above_all_var > 5}}}
				multiply_variable = { NPP_popularity = 0.75}
			}
			else = {
				set_variable = { NPP_C_bonus_popularity = 0 }
				add_to_variable = { NPP_popularity = 0.5}
			}
		}
	}
}

USA_RFK_cra_1 = {
	every_owned_state = { #CRA positive
		limit = {
			can_have_elections_in_state = yes
			OR = {
				check_variable = { nationality = 82 }
				check_variable = { nationality = 88 }
			}
		}
		#RD largest - D
		if = {
			limit = {
				check_variable = { RD_popularity > NPP_popularity }
				check_variable = { RD_D_bonus_popularity > RD_R_bonus_popularity }
			}
			add_to_variable = { RD_popularity = 0.45 }
			add_to_variable = { RD_R_bonus_popularity = 0.05}
		}
		#RD largest - R
		if = {
			limit = {
				check_variable = { RD_popularity > NPP_popularity }
				check_variable = { RD_D_bonus_popularity < RD_R_bonus_popularity }
			}
			if = {
				limit = { USA = {check_variable = { USA_RFK_Republican_Goodwill > 5 } } }
				subtract_from_variable = {RD_D_bonus_popularity = 0.1}
				subtract_from_variable = {RD_popularity = 0.15}
			}
			else = {
				add_to_variable = { RD_R_bonus_popularity = 0.1 }
				add_to_variable = { RD_popularity = 0.35}
			}
		}
		#NPP largest - C
		if = {
			limit = {
				check_variable = { RD_popularity < NPP_popularity }
				check_variable = { NPP_C_bonus_popularity > NPP_FR_bonus_popularity }
			}
			if = {
				limit = { USA = { check_variable = { USA_RFK_Republican_Goodwill > 5 } } }
				subtract_from_variable = {RD_D_bonus_popularity = 0.1 }
				subtract_from_variable = {RD_popularity = 0.15 }
			}
			else = {
				multiply_variable = { NPP_popularity = 0.75 }
				add_to_variable = { RD_R_bonus_popularity = 0.25 }
			}
		}
		#NPP largest - FR
		if = {
			limit = {
				check_variable = { RD_popularity < NPP_popularity }
				check_variable = { NPP_C_bonus_popularity < NPP_FR_bonus_popularity }
			}
			add_to_variable = { RD_R_bonus_popularity = 0.1 }
			add_to_variable = { RD_popularity = 0.25 }
		}
	}
 	every_owned_state = { #CRA NEUTRAL
		limit = {
			can_have_elections_in_state = yes
			OR = {
				check_variable = { nationality = 85 }
				check_variable = { nationality = 86 }
				check_variable = { nationality = 87 }
			}
		}
		#RD largest - D
		if = {
			limit = {
				check_variable = { RD_popularity > NPP_popularity }
				check_variable = { RD_D_bonus_popularity > RD_R_bonus_popularity }
			}
			add_to_variable = { RD_R_bonus_popularity = 0.1 }
			add_to_variable = { RD_popularity = 0.15}
		}
		#RD largest - R
		if = {
			limit = {
				check_variable = { RD_popularity > NPP_popularity }
				check_variable = { RD_D_bonus_popularity < RD_R_bonus_popularity }
			}
			if = {
				limit = { USA = {check_variable = { USA_RFK_Republican_Goodwill > 5 } } }
				add_to_variable = { RD_R_bonus_popularity = 0.1 }
				add_to_variable = { NPP_C_bonus_popularity = 0.15}
				add_to_variable = { NPP_popularity = 0.15}
			}
			else = {
				add_to_variable = { RD_R_bonus_popularity = 0.1 }
				add_to_variable = { RD_popularity = 0.2}
			}
		}
		#NPP largest - C
		if = {
			limit = {
				check_variable = { RD_popularity < NPP_popularity }
				check_variable = { NPP_C_bonus_popularity > NPP_FR_bonus_popularity }
			}
			add_to_variable = { NPP_C_bonus_popularity = 0.05}
			add_to_variable = { NPP_popularity = 0.05}
		}
		#NPP largest - FR
		if = {
			limit = {
				check_variable = { RD_popularity < NPP_popularity }
				check_variable = { NPP_C_bonus_popularity < NPP_FR_bonus_popularity }
			}
			add_to_variable = { NPP_FR_bonus_popularity = 0.05}
			add_to_variable = { NPP_popularity = 0.05}
		}
	}
 	every_owned_state = { #CRA Negative
		limit = {
			can_have_elections_in_state = yes
			OR = {
				check_variable = { nationality = 83 }
				check_variable = { nationality = 84 }
			}
		}
		#RD largest - D
		if = {
			limit = {
				check_variable = { RD_popularity > NPP_popularity }
				check_variable = { RD_D_bonus_popularity > RD_R_bonus_popularity }
			}
			add_to_variable = { NPP_FR_bonus_popularity = 0.3}
			add_to_variable = { RD_popularity = 0.25}
		}
		#RD largest - R
		if = {
			limit = {
				check_variable = { RD_popularity > NPP_popularity }
				check_variable = { RD_D_bonus_popularity < RD_R_bonus_popularity }
			}
			add_to_variable = { RD_D_bonus_popularity = 0.4}
			add_to_variable = { RD_popularity = 0.25}
		}
		#NPP largest - C
		if = {
			limit = {
				check_variable = { RD_popularity < NPP_popularity }
				check_variable = { NPP_C_bonus_popularity > NPP_FR_bonus_popularity }
			}
			add_to_variable = { RD_R_bonus_popularity = 0.3 }
			add_to_variable = { RD_popularity = 0.25}
		}
		#NPP largest - FR
		if = {
			limit = {
				check_variable = { RD_popularity < NPP_popularity }
				check_variable = { NPP_C_bonus_popularity < NPP_FR_bonus_popularity }
			}
			if = {
				limit = { USA = {check_variable = { USA_RFK_Republican_Goodwill > 5 } } }
				add_to_variable = { RD_D_bonus_popularity = 0.1}
				add_to_variable = { RD_popularity = 0.05}
			}
		}
	}
}

USA_RFK_cra_23 = {
	every_owned_state = { #CRA positive
		limit = {
			can_have_elections_in_state = yes
			OR = {
				check_variable = { nationality = 82 }
				check_variable = { nationality = 88 }
			}
		}
		#RD largest - D
		if = {
			limit = {
				check_variable = { RD_popularity > NPP_popularity }
				check_variable = { RD_D_bonus_popularity > RD_R_bonus_popularity }
			}
			add_to_variable = { RD_R_bonus_popularity = 0.15}
			add_to_variable = { NPP_C_bonus_popularity = 0.3 }

		}
		#RD largest - R
		if = {
			limit = {
				check_variable = { RD_popularity > NPP_popularity }
				check_variable = { RD_D_bonus_popularity < RD_R_bonus_popularity }
			}
			if = {
				limit = { USA = {check_variable = { USA_RFK_Republican_Goodwill > 5 } } }
				add_to_variable = { RD_R_bonus_popularity = 0.1}
				add_to_variable = { RD_popularity = 0.15}
			}
			else = {
				add_to_variable = { NPP_popularity = 0.15}
				add_to_variable = { NPP_C_bonus_popularity = 0.1}
			}

		}
		#NPP largest - C
		if = {
			limit = {
				check_variable = { RD_popularity < NPP_popularity }
				check_variable = { NPP_C_bonus_popularity > NPP_FR_bonus_popularity }
			}
			add_to_variable = { NPP_popularity = 0.15}
			add_to_variable = { NPP_C_bonus_popularity = 0.1}

		}
		#NPP largest - FR
		if = {
			limit = {
				check_variable = { RD_popularity < NPP_popularity }
				check_variable = { NPP_C_bonus_popularity < NPP_FR_bonus_popularity }
			}
			add_to_variable = { RD_D_bonus_popularity = 0.1}
			add_to_variable = { RD_popularity = 0.1}
		}
	}
 	every_owned_state = { #CRA NEUTRAL
		limit = {
			can_have_elections_in_state = yes
			OR = {
				check_variable = { nationality = 85 }
				check_variable = { nationality = 86 }
				check_variable = { nationality = 87 }
			}
		}
		#RD largest - D
		if = {
			limit = {
				check_variable = { RD_popularity > NPP_popularity }
				check_variable = { RD_D_bonus_popularity > RD_R_bonus_popularity }
			}
			add_to_variable = { RD_R_bonus_popularity = -0.15}
			add_to_variable = { NPP_FR_bonus_popularity = 0.15}
			add_to_variable = { RD_popularity = 0.15}
		}
		#RD largest - R
		if = {
			limit = {
				check_variable = { RD_popularity > NPP_popularity }
				check_variable = { RD_D_bonus_popularity < RD_R_bonus_popularity }
			}
			if = {
				limit = { USA = {check_variable = { USA_RFK_Republican_Goodwill > 5 } } }
			}
			else = {
				USA = {add_political_power = 1}
			}
		}
		#NPP largest - C
		if = {
			limit = {
				check_variable = { RD_popularity < NPP_popularity }
				check_variable = { NPP_C_bonus_popularity > NPP_FR_bonus_popularity }
			}
		}
		#NPP largest - FR
		if = {
			limit = {
				check_variable = { RD_popularity < NPP_popularity }
				check_variable = { NPP_C_bonus_popularity < NPP_FR_bonus_popularity }
			}
		}
	}
 	every_owned_state = { #CRA Negative
		limit = {
			can_have_elections_in_state = yes
			OR = {
				check_variable = { nationality = 83 }
				check_variable = { nationality = 84 }
			}
		}
		#RD largest - D
		if = {
			limit = {
				check_variable = { RD_popularity > NPP_popularity }
				check_variable = { RD_D_bonus_popularity > RD_R_bonus_popularity }
			}
			add_to_variable = { RD_popularity = 0.3}
		}
		#RD largest - R
		if = {
			limit = {
				check_variable = { RD_popularity > NPP_popularity }
				check_variable = { RD_D_bonus_popularity < RD_R_bonus_popularity }
			}
			add_to_variable = { RD_popularity = 0.15}
		}
		#NPP largest - C
		if = {
			limit = {
				check_variable = { RD_popularity < NPP_popularity }
				check_variable = { NPP_C_bonus_popularity > NPP_FR_bonus_popularity }
			}
			subtract_from_variable = { NPP_FR_bonus_popularity = 0.3}
		}
		#NPP largest - FR
		if = {
			limit = {
				check_variable = { RD_popularity < NPP_popularity }
				check_variable = { NPP_C_bonus_popularity < NPP_FR_bonus_popularity }
			}
			add_to_variable = { NPP_popularity = 0.2}
		}
	}
}
USA_RFK_cra_4 = {
	every_owned_state = { #CRA positive
		limit = {
			can_have_elections_in_state = yes
			OR = {
				check_variable = { nationality = 82 }
				check_variable = { nationality = 88 }
			}
		}
		#RD largest - D
		if = {
			limit = {
				check_variable = { RD_popularity > NPP_popularity }
				check_variable = { RD_D_bonus_popularity > RD_R_bonus_popularity }
			}
			subtract_from_variable = { RD_D_bonus_popularity = 0.15}
		}
		#RD largest - R
		if = {
			limit = {
				check_variable = { RD_popularity > NPP_popularity }
				check_variable = { RD_D_bonus_popularity < RD_R_bonus_popularity }
			}
			if = {
				limit = { USA = {check_variable = { USA_RFK_Republican_Goodwill > 5 } } }
				add_to_variable = { RD_R_bonus_popularity = 0.25}
			}
			else = {
				add_to_variable = {NPP_popularity = 0.75 }
				subtract_from_variable = { RD_D_bonus_popularity = 0.3}
				add_to_variable = { NPP_C_bonus_popularity = 0.3}
			}

		}
		#NPP largest - C
		if = {
			limit = {
				check_variable = { RD_popularity < NPP_popularity }
				check_variable = { NPP_C_bonus_popularity > NPP_FR_bonus_popularity }
			}
			add_to_variable = {NPP_popularity = 0.75 }
			add_to_variable = { NPP_C_bonus_popularity = 0.3}
		}
		#NPP largest - FR
		if = {
			limit = {
				check_variable = { RD_popularity < NPP_popularity }
				check_variable = { NPP_C_bonus_popularity < NPP_FR_bonus_popularity }
			}
			subtract_from_variable = { NPP_FR_bonus_popularity = 0.15}
			add_to_variable = { RD_popularity = 0.15}
			add_to_variable = { RD_R_bonus_popularity = 0.2}
		}
	}
 	every_owned_state = { #CRA NEUTRAL
		limit = {
			can_have_elections_in_state = yes
			OR = {
				check_variable = { nationality = 85 }
				check_variable = { nationality = 86 }
				check_variable = { nationality = 87 }
			}
		}
		#RD largest - D
		if = {
			limit = {
				check_variable = { RD_popularity > NPP_popularity }
				check_variable = { RD_D_bonus_popularity > RD_R_bonus_popularity }
			}
			add_to_variable = { RD_D_bonus_popularity = 0.5}
			add_to_variable = { RD_popularity = 0.15}
			subtract_from_variable = { NPP_C_bonus_popularity = 0.25}
		}
		#RD largest - R
		if = {
			limit = {
				check_variable = { RD_popularity > NPP_popularity }
				check_variable = { RD_D_bonus_popularity < RD_R_bonus_popularity }
			}
			random_list = {
				50 = {
					add_to_variable = { NPP_C_bonus_popularity = 0.1}
					add_to_variable = { NPP_popularity = 0.15}
				}
				50 = {
					add_to_variable = { RD_D_bonus_popularity = 0.25}
					add_to_variable = { RD_popularity = 0.25 }
				}
			}
		}
		#NPP largest - C
		if = {
			limit = {
				check_variable = { RD_popularity < NPP_popularity }
				check_variable = { NPP_C_bonus_popularity > NPP_FR_bonus_popularity }
			}
			add_to_variable = { RD_popularity = 0.3}
			add_to_variable = { NPP_C_bonus_popularity = 0.15}
		}
		#NPP largest - FR
		if = {
			limit = {
				check_variable = { RD_popularity < NPP_popularity }
				check_variable = { NPP_C_bonus_popularity < NPP_FR_bonus_popularity }
			}
			add_to_variable = { RD_popularity = 0.5}
			add_to_variable = { RD_D_bonus_popularity = 0.2}
			subtract_from_variable = { NPP_C_bonus_popularity = 0.25}
		}
	}
 	every_owned_state = { #CRA Negative
		limit = {
			can_have_elections_in_state = yes
			OR = {
				check_variable = { nationality = 83 }
				check_variable = { nationality = 84 }
			}
		}
		#RD largest - D
		if = {
			limit = {
				check_variable = { RD_popularity > NPP_popularity }
				check_variable = { RD_D_bonus_popularity > RD_R_bonus_popularity }
			}
			add_to_variable = { RD_D_bonus_popularity = 0.5}
			add_to_variable = { RD_popularity = 0.5}
			add_to_variable = { NPP_Y_bonus_popularity = 0.1}
			subtract_from_variable = { NPP_C_bonus_popularity = 0.25}
		}
		#RD largest - R
		if = {
			limit = {
				check_variable = { RD_popularity > NPP_popularity }
				check_variable = { RD_D_bonus_popularity < RD_R_bonus_popularity }
			}
			add_to_variable = { NPP_popularity = 0.5}
			add_to_variable = { NPP_L_bonus_popularity = 0.3}
		}
		#NPP largest - C
		if = {
			limit = {
				check_variable = { RD_popularity < NPP_popularity }
				check_variable = { NPP_C_bonus_popularity > NPP_FR_bonus_popularity }
			}
			subtract_from_variable = { NPP_C_bonus_popularity = 0.25}
		}
		#NPP largest - FR
		if = {
			limit = {
				check_variable = { RD_popularity < NPP_popularity }
				check_variable = { NPP_C_bonus_popularity < NPP_FR_bonus_popularity }
			}
			subtract_from_variable = { NPP_C_bonus_popularity = 0.25}
		}
	}
}


#####################################
#  GEORGE WALLACE'S PRESIDENCY	  #
#####################################

USA_WAL_Pass_Perth_Pact = {
custom_effect_tooltip = USA_add_OFN_unity
			add_to_variable = { OFN_Unity = 1}
			# USA starts losing jobs to india if it passes, having union protections lessens it
			#all countries go to having the free trade policy
			#USA gets a GDP boost
			#everyone gets their subsidies if they earned them
			if = {
				limit = {
					OR = {
						RAJ = {
							has_country_flag = joining_perth_block
							has_country_flag = warily_joining_perth_block
						}
					}
				}
				add_popularity = {
					ideology = authoritarian_democrat
					popularity = -0.005
				}
				add_popularity = {
					ideology = social_conservative
					popularity = 0.005
				}
				if = {
				limit = {
				NOT = { has_country_flag = warily_joining_perth_block }
					}
				add_to_variable = {GDP_growth = 0.0009} #india is a huge boon to this entire conference
				}
				if = {
					limit = {has_country_flag = RAJ_subsidies_confirmed}
					if = {
						limit = {
							has_global_flag = RAJ_subsidies_for_the_poor
						}
					}
					RAJ = {
						tno_unemployment_improve = yes
						add_ideas = RAJ_perth_subsidies_poor
					}
					else = {
						RAJ = {
							add_to_variable = {GDP_growth = 0.0006}
						}
					}
				}
				if = {
					limit = {has_country_flag = union_protections_required}
					TNO_worsen_poverty_high = yes #coded with a script
				}
				else = {
					TNO_worsen_poverty_high = yes #coded with a script
				}

				add_opinion_modifier = {
					modifier = USA_free_trade_agreement
					target = RAJ
				}
				GUA = {
					add_opinion_modifier = {
						modifier = USA_free_trade_agreement
						target = RAJ
					}
				}
				HON = {
					add_opinion_modifier = {
						modifier = USA_free_trade_agreement
						target = RAJ
					}
				}
				NZL = {
					tno_trade_laws_clear = yes
					add_ideas = tno_trade_laws_free_trade
					add_to_variable = {GDP_growth = 0.005}
					add_opinion_modifier = {
						modifier = USA_free_trade_agreement
						target = RAJ
					}
					if = {
						limit = {USA = {has_country_flag = union_protections_required}}
			TNO_improve_poverty_high = yes #coded with a script
					}
					else = {
			TNO_improve_poverty_high = yes #coded with a script
					}
				}
				AST = {
					add_to_variable = {GDP_growth = 0.005}
					add_opinion_modifier = {
						modifier = USA_free_trade_agreement
						target = RAJ
					}
					if = {
						limit = {USA = {has_country_flag = union_protections_required}}
			TNO_improve_poverty_high = yes #coded with a script
					}
					else = {
			TNO_improve_poverty_high = yes #coded with a script
					}
				}
				CAN = {
					add_to_variable = {GDP_growth = 0.005}
					add_opinion_modifier = {
						modifier = USA_free_trade_agreement
						target = RAJ
					}
					if = {
						limit = {USA = {has_country_flag = union_protections_required}}
			TNO_improve_poverty_high = yes #coded with a script
					}
					else = {
			TNO_improve_poverty_high = yes #coded with a script
					}
				}
				NIC = {
					add_opinion_modifier = {
						modifier = USA_free_trade_agreement
						target = RAJ
					}
				}
				RAJ =
				{
					tno_trade_laws_clear = yes
					add_ideas = tno_trade_laws_free_trade
					if = {
						limit = {USA = {has_country_flag = union_protections_required}}
			TNO_improve_poverty_high = yes #coded with a script
					}
					else = {
			TNO_improve_poverty_high = yes #coded with a script
					}
					add_opinion_modifier = {
						modifier = USA_free_trade_agreement
						target = USA
					}
					add_opinion_modifier = {
						modifier = USA_free_trade_agreement
						target = GUA
					}
					add_opinion_modifier = {
						modifier = USA_free_trade_agreement
						target = HON
					}
					add_opinion_modifier = {
						modifier = USA_free_trade_agreement
						target = NIC
					}
					add_opinion_modifier = {
						modifier = USA_free_trade_agreement
						target = AST
					}
					add_opinion_modifier = {
						modifier = USA_free_trade_agreement
						target = NZL
					}
					add_opinion_modifier = {
						modifier = USA_free_trade_agreement
						target = CAN
					}
				}
			}
			set_global_flag = perth_block_active
			add_to_variable = {GDP_growth = 0.0025}
			tno_trade_laws_clear = yes
			add_ideas = tno_trade_laws_free_trade
			add_opinion_modifier = {
				modifier = USA_free_trade_agreement
				target = GUA
			}
			add_opinion_modifier = {
				modifier = USA_free_trade_agreement
				target = HON
			}
			add_opinion_modifier = {
				modifier = USA_free_trade_agreement
				target = NIC
			}
			add_opinion_modifier = {
				modifier = USA_free_trade_agreement
				target = AST
			}
			add_opinion_modifier = {
				modifier = USA_free_trade_agreement
				target = NZL
			}
			add_opinion_modifier = {
				modifier = USA_free_trade_agreement
				target = CAN
			}
			HON = {
				tno_trade_laws_clear = yes
				add_ideas = tno_trade_laws_free_trade
				add_opinion_modifier = {
					modifier = USA_free_trade_agreement
					target = GUA
				}
				add_opinion_modifier = {
					modifier = USA_free_trade_agreement
					target = USA
				}
				add_opinion_modifier = {
					modifier = USA_free_trade_agreement
					target = NIC
				}
				add_opinion_modifier = {
					modifier = USA_free_trade_agreement
					target = AST
				}
				add_opinion_modifier = {
					modifier = USA_free_trade_agreement
					target = NZL
				}
				add_opinion_modifier = {
					modifier = USA_free_trade_agreement
					target = CAN
				}
			}
			CAN = {
				add_to_variable = {GDP_growth = 0.0025}
				tno_trade_laws_clear = yes
				add_ideas = tno_trade_laws_free_trade
				add_opinion_modifier = {
					modifier = USA_free_trade_agreement
					target = GUA
				}
				add_opinion_modifier = {
					modifier = USA_free_trade_agreement
					target = USA
				}
				add_opinion_modifier = {
					modifier = USA_free_trade_agreement
					target = NIC
				}
				add_opinion_modifier = {
					modifier = USA_free_trade_agreement
					target = AST
				}
				add_opinion_modifier = {
					modifier = USA_free_trade_agreement
					target = NZL
				}
				add_opinion_modifier = {
					modifier = USA_free_trade_agreement
					target = HON
				}
			}
			GUA = {
				tno_trade_laws_clear = yes
				add_ideas = tno_trade_laws_free_trade
				add_opinion_modifier = {
					modifier = USA_free_trade_agreement
					target = CAN
				}
				add_opinion_modifier = {
					modifier = USA_free_trade_agreement
					target = USA
				}
				add_opinion_modifier = {
					modifier = USA_free_trade_agreement
					target = NIC
				}
				add_opinion_modifier = {
					modifier = USA_free_trade_agreement
					target = AST
				}
				add_opinion_modifier = {
					modifier = USA_free_trade_agreement
					target = NZL
				}
				add_opinion_modifier = {
					modifier = USA_free_trade_agreement
					target = HON
				}
			}
			AST = {
				add_to_variable = {GDP_growth = 0.0025}
				tno_trade_laws_clear = yes
				add_ideas = tno_trade_laws_free_trade
				add_opinion_modifier = {
					modifier = USA_free_trade_agreement
					target = CAN
				}
				add_opinion_modifier = {
					modifier = USA_free_trade_agreement
					target = USA
				}
				add_opinion_modifier = {
					modifier = USA_free_trade_agreement
					target = NIC
				}
				add_opinion_modifier = {
					modifier = USA_free_trade_agreement
					target = GUA
				}
				add_opinion_modifier = {
					modifier = USA_free_trade_agreement
					target = NZL
				}
				add_opinion_modifier = {
					modifier = USA_free_trade_agreement
					target = HON
				}
			}
			NZL = {
				add_to_variable = {GDP_growth = 0.0025}
				tno_trade_laws_clear = yes
				add_ideas = tno_trade_laws_free_trade
				add_opinion_modifier = {
					modifier = USA_free_trade_agreement
					target = CAN
				}
				add_opinion_modifier = {
					modifier = USA_free_trade_agreement
					target = USA
				}
				add_opinion_modifier = {
					modifier = USA_free_trade_agreement
					target = NIC
				}
				add_opinion_modifier = {
					modifier = USA_free_trade_agreement
					target = GUA
				}
				add_opinion_modifier = {
					modifier = USA_free_trade_agreement
					target = AST
				}
				add_opinion_modifier = {
					modifier = USA_free_trade_agreement
					target = HON
				}
			}
			NIC = {
				tno_trade_laws_clear = yes
				add_ideas = tno_trade_laws_free_trade
				add_opinion_modifier = {
					modifier = USA_free_trade_agreement
					target = CAN
				}
				add_opinion_modifier = {
					modifier = USA_free_trade_agreement
					target = USA
				}
				add_opinion_modifier = {
					modifier = USA_free_trade_agreement
					target = NZL
				}
				add_opinion_modifier = {
					modifier = USA_free_trade_agreement
					target = GUA
				}
				add_opinion_modifier = {
					modifier = USA_free_trade_agreement
					target = AST
				}
				add_opinion_modifier = {
					modifier = USA_free_trade_agreement
					target = HON
				}
			}
			if = {
				limit = {
					has_country_flag = CA_subsidies_confirmed
					NOT = {has_global_flag = CA_subsidies_for_the_poor}
				}
				GUA = {
					add_ideas = WAL64_bananas_for_bananas
				}
				HON = {
					add_ideas = WAL64_bananas_for_bananas
				}
				NIC = {
					add_ideas = WAL64_bananas_for_bananas
				}
			}
			add_popularity = {
				ideology = authoritarian_democrat
				popularity = 0.03
			}
			add_popularity = {
				ideology = social_conservative
				popularity = -0.02
			}
			add_popularity = {
				ideology = social_democrat
				popularity = -0.01
			}
		}

USA_WAL_failed_bill = {
	custom_effect_tooltip = USA_WAL_fails_bill
	hidden_effect ={
		subtract_from_variable = { USA_NPP_Unity = 1 }

		every_owned_state = {
				limit = {
					can_have_elections_in_state = yes
					OR = {
						check_variable = { nationality = 82 } #Yankee
						check_variable = { nationality = 85 } #Steel Belt
						check_variable = { nationality = 86 } #Southwestern
						check_variable = { nationality = 87 } #Rockies
						check_variable = { nationality = 88 } #Pacific
						}
					}
				add_to_variable = { RD_popularity = 0.05 }
				subtract_from_variable = { NPP_popularity = 0.05 }
				subtract_from_variable = { NPP_FR_bonus_popularity = 0.05 }
				US_underdog_RD_2_2 = yes
		}
	}
}
			
USA_WAL_clamp_senator_vars = {
	hidden_effect = {
		set_variable = { USA.NPP_FR_South_senators = 0 }
		set_variable = { USA.NPP_FR_North_senators = 0 }
		every_owned_state = {
			limit = { 
				check_variable = { senator_1 = 6 }
				OR = {
				check_variable = { nationality = 84 } #African American
				check_variable = { nationality = 83 } #Dixie
				check_variable = { nationality = 86 } #Southwestern
				}
			}
			add_to_variable = { USA.NPP_FR_South_senators = 1 }
		}
		every_owned_state = {
			limit = { 
				check_variable = { senator_2 = 6 }
				OR = {
				check_variable = { nationality = 84 } #African American
				check_variable = { nationality = 83 } #Dixie
				check_variable = { nationality = 86 } #Southwestern
				}
			}
			add_to_variable = { USA.NPP_FR_South_senators = 1 }
		}
		every_owned_state = {
			limit = { 
				check_variable = { senator_1 = 6 }
				NOT = { 
					OR = {
					check_variable = { nationality = 84 } #African American
					check_variable = { nationality = 83 } #Dixie
					check_variable = { nationality = 86 } #Southwestern
					}
				}
			}
			add_to_variable = { USA.NPP_FR_North_senators = 1 }
		}
		every_owned_state = {
			limit = { 
				check_variable = { senator_2 = 6 }
				NOT = { 
					OR = {
					check_variable = { nationality = 84 } #African American
					check_variable = { nationality = 83 } #Dixie
					check_variable = { nationality = 86 } #Southwestern
					}
				}
			}
			add_to_variable = { USA.NPP_FR_North_senators = 1 }
		}
		
		clamp_variable = {
			var = WAL_New_Deal_C_NPP_Support_healthcare
			min = 0 
			max = NPP_C_senators
		}
		clamp_variable = {
			var = WAL_New_Deal_Dixie_FR_Support_healthcare
			min = 0 
			max = NPP_FR_South_senators
		}
		clamp_variable = {
			var = WAL_New_Deal_North_FR_Support_healthcare
			min = 0 
			max = NPP_FR_North_senators
		}
		clamp_variable = {
			var = WAL_New_Deal_R_RD_Support_healthcare
			min = 0 
			max = RD_R_senators
		}
		clamp_variable = {
			var = WAL_New_Deal_D_RD_Support_healthcare
			min = 0 
			max = RD_D_senators
		}
		#
		clamp_variable = {
			var = WAL_New_Deal_C_NPP_Support_SS
			min = 0 
			max = NPP_C_senators
		}
		clamp_variable = {
			var = WAL_New_Deal_Dixie_FR_Support_SS
			min = 0 
			max = NPP_FR_South_senators
		}
		clamp_variable = {
			var = WAL_New_Deal_North_FR_Support_SS
			min = 0 
			max = NPP_FR_North_senators
		}
		clamp_variable = {
			var = WAL_New_Deal_R_RD_Support_SS
			min = 0 
			max = RD_R_senators
		}
		clamp_variable = {
			var = WAL_New_Deal_D_RD_Support_SS
			min = 0 
			max = RD_D_senators
		}
	}
}

USA_WAL_NPP_radicalizes = {
	custom_effect_tooltip = USA_wal64_NPP_Radicalizes
	hidden_effect ={
		add_popularity = {
		ideology = communist
		popularity = 0.01
		}
		add_popularity = {
		ideology = social_democrat
		popularity = -0.01
		}
		add_popularity = {
		ideology = national_socialism
		popularity = 0.01
		}
		add_popularity = {
		ideology = authoritarian_democrat
		popularity = -0.01
		}
		every_owned_state = {
				limit = {
					can_have_elections_in_state = yes
					OR = {
						check_variable = { nationality = 82 } #Yankee
						check_variable = { nationality = 88 } #Pacific
						check_variable = { nationality = 87 } #Rockies
						}
				}
				add_to_variable = { NPP_L_bonus_popularity = 0.1 }
				subtract_from_variable = { NPP_C_bonus_popularity = 0.1}
			}
			every_owned_state = {
				limit = {
					can_have_elections_in_state = yes
					OR = {
						check_variable = { nationality = 83 } #Dixie
						check_variable = { nationality = 86 } #Southwestern
						check_variable = { nationality = 84 } #African American
					}
				}
				add_to_variable = { NPP_Y_bonus_popularity = 0.1}
				subtract_from_variable = { NPP_FR_bonus_popularity = 0.1}
		}
	}
}

USA_WAL_NPP_radicalizes_L = {
	custom_effect_tooltip = USA_wal64_NPP_Radicalizes_L
	hidden_effect ={
		add_popularity = {
		ideology = communist
		popularity = 0.01
		}
		add_popularity = {
		ideology = social_democrat
		popularity = -0.01
		}

		every_owned_state = {
				limit = {
					can_have_elections_in_state = yes
					OR = {
						check_variable = { nationality = 82 } #Yankee
						check_variable = { nationality = 88 } #Pacific
						check_variable = { nationality = 87 } #Rockies
						}
				}
				add_to_variable = { NPP_L_bonus_popularity = 0.1 }
				subtract_from_variable = { NPP_C_bonus_popularity = 0.1}
			}
	}
}

USA_WAL_NPP_radicalizes_Y = {
	custom_effect_tooltip = USA_wal64_NPP_Radicalizes_Y
	hidden_effect = {
		add_popularity = {
		ideology = national_socialism
		popularity = 0.01
		}
		add_popularity = {
		ideology = authoritarian_democrat
		popularity = -0.01
		}
		every_owned_state = {
			limit = { check_variable = { NPP_Y_bonus_popularity < 0.1 } }
			set_variable = { NPP_Y_bonus_popularity = 0.1 }
			}
			every_owned_state = {
				limit = {
					can_have_elections_in_state = yes
					OR = {
						check_variable = { nationality = 83 } #Dixie
						check_variable = { nationality = 86 } #Southwestern
						check_variable = { nationality = 84 } #African American
					}
				}
				add_to_variable = { NPP_Y_bonus_popularity = 0.1}
				subtract_from_variable = { NPP_FR_bonus_popularity = 0.1}
			}
	}
}

USA_WAL_NPP_radicalizes_Y_2 = {
	custom_effect_tooltip = USA_wal64_NPP_Radicalizes_Y_2
	hidden_effect = {
		add_popularity = {
		ideology = national_socialism
		popularity = 0.03
		}
		add_popularity = {
		ideology = authoritarian_democrat
		popularity = -0.03
		}
		every_owned_state = {
			limit = { check_variable = { NPP_Y_bonus_popularity < 0.1 } }
			set_variable = { NPP_Y_bonus_popularity = 0.1 }
			}

		every_owned_state = {
				limit = {
					can_have_elections_in_state = yes
					OR = {
						check_variable = { nationality = 83 } #Dixie
						check_variable = { nationality = 86 } #Southwestern
						check_variable = { nationality = 84 } #African American
					}
				}
				add_to_variable = { NPP_Y_bonus_popularity = 0.2}
				subtract_from_variable = { NPP_FR_bonus_popularity = 0.2}
		}
	}
}

USA_WAL_Crisis_At_Central_High = { #KEPT, up for rework
	if = {
		limit = {
			check_variable = { WAL_SEGREGATION < 2 }
		}
	#Nothing happens, you haven't reached the limit yet.
	}

	#Level 1 - Very unlikely
	else_if = {
		limit = {
		NOT = { has_country_flag = WAL_they_tried_to_impeach_you }
			check_variable = {
				var = WAL_SEGREGATION
				value = 2
				compare = greater_than_or_equals
			}
			check_variable = {
				var = WAL_SEGREGATION
				value = 3
				compare = less_than_or_equals
			}
		}
		random_list = {
			 5 = {
				 country_event = {
					id = wallace.520
					days = 10
					random = 240
				 }
			 }
			 95 = {
				 #Nothing happens
			}
		}
	}

	#Level 2 - Unlikely
	else_if = {
		limit = {
		NOT = { has_country_flag = WAL_they_tried_to_impeach_you }
			check_variable = {
				var = WAL_SEGREGATION
				value = 4
				compare = greater_than_or_equals
			}
			check_variable = {
				var = WAL_SEGREGATION
				value = 6
				compare = less_than_or_equals
			}
		}
		random_list = {
			 15 = {
				 country_event = {
					id = wallace.520
						days = 8
						random = 192
				}
			 	}
			 85 = {
				 #Nothing happens
			 }
		}
	}
			#Level 3 - Getting Closer
	else_if = {
		limit = {
		NOT = { has_country_flag = WAL_they_tried_to_impeach_you }
			check_variable = {
				var = WAL_SEGREGATION
				value = 7
				compare = greater_than_or_equals
			}
			check_variable = {
				var = WAL_SEGREGATION
				value = 10
				compare = less_than_or_equals
			}
		}
		random_list = {
			 30 = {
				 country_event = {
					id = wallace.520
						days = 5
						random = 120
				 }
			 	}
			 70 = {
				 #Nothing happens
			}
		}
	}
			#Level 4 - Any Day Now
	else_if = {
		limit = {
		NOT = { has_country_flag = WAL_they_tried_to_impeach_you }
			check_variable = {
				var = WAL_SEGREGATION
				value = 11
				compare = greater_than_or_equals
			}
			check_variable = {
				var = WAL_SEGREGATION
				value = 14
				compare = less_than_or_equals
			}
		}
		random_list = {
			 45 = {
				 country_event = {
					id = wallace.520
						days = 4
						random = 96
				 }
			 	}
			 55 = {
				 #Nothing happens
			}
		}
	}
		#Level 5 - Inevitable
		else_if = {
			limit = {
			NOT = { has_country_flag = WAL_they_tried_to_impeach_you }
				check_variable = {
						var = WAL_SEGREGATION
						value = 15
						compare = greater_than_or_equals
				}
			}
			random_list = {
				 75 = {
					 country_event = {
						id = wallace.520
						days = 2
						random = 48
					}
				}
				25 = {
					 #Nothing happens
				}
			}
		}
}

USA_wal_new_segregation_expectation = {
	set_variable = { wal_seg_minus_expect = WAL_SEGREGATION }
	subtract_from_variable = { wal_seg_minus_expect = WAL_SEGREGATION_expectation }
	hidden_effect = {
		USA_WAL_Crisis_At_Central_High = yes #should be moved later
		if = {
			limit = { #VERY ANGERY SOUTH, runs to the dems. YOCKEY TIME. Happy north
				check_variable = { wal_seg_minus_expect < -5 }
			}
			add_to_variable = { USA_NPP_Unity = 1 } #happy npp
			every_owned_state = {
				limit = { 
					can_have_elections_in_state = yes
					NOT = { #Pacific rockies and steel belt are happy. Yankees want more. Corn just wants to farm for gods sake
						OR = {
							check_variable = { nationality = 83 } #Dixie
							check_variable = { nationality = 86 } #Southwestern
							check_variable = { nationality = 84 } #African American
							check_variable = { nationality = 337 } #Unchanging Corn
							check_variable = { nationality = 82 } #Yankee
						}
					}
				}
				add_to_variable = { NPP_popularity = 0.025 }
				US_underdog_1_1 = yes
			}
			if ={
				limit = { check_variable = { WAL_extremist_dissatisfaction_counter < 7 } } #at first its only running to the dems
				USA_wal_vh_segr_yockey = yes #Yockey rise events. BASED

				every_owned_state = { #South runs to the dems in droves
					limit = { 
						can_have_elections_in_state = yes
						OR = {
							check_variable = { nationality = 83 } #Dixie
							check_variable = { nationality = 86 } #Southwestern
							check_variable = { nationality = 84 } #African American
						}
					}
					add_to_variable = { RD_D_bonus_popularity = 0.05 }
					subtract_from_variable = { NPP_FR_bonus_popularity = 0.05 }

					add_to_variable = { RD_popularity = 0.05 }
					subtract_from_variable = { NPP_popularity = 0.05 }
					US_underdog_NPP_5_5 = yes
				}
			}
			else = { #but then, its radicalization time
				every_owned_state = {
					limit = {
						can_have_elections_in_state = yes
						OR = {
							check_variable = { nationality = 83 } #Dixie
							check_variable = { nationality = 86 } #Southwestern
							check_variable = { nationality = 84 } #African American
						}
					}
					subtract_from_variable = { NPP_FR_bonus_popularity = 0.05 }
					subtract_from_variable = { RD_D_bonus_popularity = 0.02 } #even dems swing in. No need to lower FRNPP

					add_to_variable = { NPP_Y_bonus_popularity = 0.05}
					add_to_variable = { NPP_popularity = 0.05 }
					US_underdog_NPP_2_2 = yes
				}
			}
		}

		else_if = {
			limit = {
				check_variable = { wal_seg_minus_expect > -6  }
				check_variable = { wal_seg_minus_expect < 1 }
			}
			#South expects more
			every_owned_state = { #South goes dem
				limit = { 
					can_have_elections_in_state = yes
					OR = {
						check_variable = { nationality = 83 } #Dixie
						check_variable = { nationality = 86 } #Southwestern
						check_variable = { nationality = 84 } #African American
					}
				}
				add_to_variable = { RD_D_bonus_popularity = 0.02 }
				subtract_from_variable = { NPP_FR_bonus_popularity = 0.02 }

				add_to_variable = { RD_popularity = 0.02 }
				subtract_from_variable = { NPP_popularity = 0.02 }
				US_underdog_NPP_2_2 = yes
			}
		}

		else_if = {
			limit = {
				check_variable = { wal_seg_minus_expect > 0  }
				check_variable = { wal_seg_minus_expect < 7 }
			}
			#Happy south, quite pissed north
			every_owned_state = { #South goes fr
				limit = { 
					can_have_elections_in_state = yes
					OR = {
						check_variable = { nationality = 83 } #Dixie
						check_variable = { nationality = 86 } #Southwestern
						check_variable = { nationality = 84 } #African American
					}
				}
				add_to_variable = { NPP_FR_bonus_popularity = 0.02 }
				subtract_from_variable = { RD_D_bonus_popularity = 0.02 }

				add_to_variable = { NPP_popularity = 0.02 }
				subtract_from_variable = { RD_popularity = 0.02 }
				US_underdog_NPP_2_2 = yes
			}
			subtract_from_variable = { USA_NPP_Unity = 0.75 }
			every_owned_state = { #north pissed
				limit = { 
					can_have_elections_in_state = yes
					OR = {
						check_variable = { nationality = 82 } #Yankee
						check_variable = { nationality = 85 } #Steel Belt
						check_variable = { nationality = 88 } #Pacific
					}
				}
				add_to_variable = { RD_R_bonus_popularity = 0.02 }
				subtract_from_variable = { NPP_C_bonus_popularity = 0.02 }

				add_to_variable = { RD_popularity = 0.02 }
				subtract_from_variable = { NPP_popularity = 0.02 }
				US_underdog_NPP_2_2 = yes
			}
		}
		else ={
			#Very happy south, lost north forever. LEMAY TIME
			every_owned_state = { #South goes fr A LOT
				limit = { 
					can_have_elections_in_state = yes
					OR = {
						check_variable = { nationality = 83 } #Dixie
						check_variable = { nationality = 86 } #Southwestern
						check_variable = { nationality = 84 } #African American
					}
				}
				add_to_variable = { NPP_FR_bonus_popularity = 0.05 }
				subtract_from_variable = { RD_D_bonus_popularity = 0.05 }
				subtract_from_variable = { NPP_Y_bonus_popularity = 0.05 } #why go yockey lol, wallace is the man

				add_to_variable = { NPP_popularity = 0.025 }
				subtract_from_variable = { RD_popularity = 0.025 }
				US_underdog_NPP_2_2 = yes
			}
			subtract_from_variable = { USA_NPP_Unity = 1.5 }
			every_owned_state = { #LNPP	#north pissed , corn and rockies dont give a fuck
				limit = { 
					can_have_elections_in_state = yes
					OR = {
						check_variable = { nationality = 82 } #Yankee
						check_variable = { nationality = 85 } #Steel Belt
						check_variable = { nationality = 88 } #Pacific
					}
				}
				subtract_from_variable = { NPP_C_bonus_popularity = 0.05 }
				add_to_variable = { NPP_L_popularity = 0.05 } #radicalized

				add_to_variable = { RD_popularity = 0.025 } #small new mobilization
				add_to_variable = { RD_R_bonus_popularity = 0.025 } #no need for more, they already lead
				#subtract_from_variable = { NPP_popularity = 0.05 }  radicalizing
				US_underdog_1_1 = yes
			}
		}
	}
}

USA_wal_new_states_rights_expectation = {
	set_variable = { wal_sr_minus_expect = WAL_STATES_RIGHTS }
	subtract_from_variable = { wal_sr_minus_expect = WAL_STATES_RIGHTS_expectation }
	hidden_effect = {
		if = {
			limit = {
				check_variable = { wal_sr_minus_expect < -5 }
			}
			random_list = {
				30 = {}
				10 = { country_event = { id = wallace.213 days = 3 random = 15 } }
				10 = { country_event = { id = wallace.214 days = 3 random = 15 } }
				10 = { country_event = { id = wallace.215 days = 3 random = 15 } }
			}
			every_owned_state = { #South runs to the dems in droves
				limit = { 
					can_have_elections_in_state = yes
					OR = {
						check_variable = { nationality = 83 } #Dixie
						check_variable = { nationality = 86 } #Southwestern
						check_variable = { nationality = 84 } #African American
					}
				}
				add_to_variable = { RD_D_bonus_popularity = 0.05 }
				subtract_from_variable = { NPP_FR_bonus_popularity = 0.05 }

				add_to_variable = { RD_popularity = 0.05 }
				subtract_from_variable = { NPP_popularity = 0.05 }
				US_underdog_NPP_2_2 = yes
			}
			#VERY ANGERY SOUTH, runs to the dems
		}

		else_if = {
			limit = {
				check_variable = { wal_sr_minus_expect > -6  }
				check_variable = { wal_sr_minus_expect < 1 }
			}
			#South expects more
			every_owned_state = { #South runs to the dems in droves
				limit = { 
					can_have_elections_in_state = yes
					OR = {
						check_variable = { nationality = 83 } #Dixie
						check_variable = { nationality = 86 } #Southwestern
						check_variable = { nationality = 84 } #African American
					}
				}
				add_to_variable = { RD_D_bonus_popularity = 0.02 }
				subtract_from_variable = { NPP_FR_bonus_popularity = 0.02 }

				add_to_variable = { RD_popularity = 0.02 }
				subtract_from_variable = { NPP_popularity = 0.02 }
				US_underdog_1_1 = yes
			}
		}

		else_if = {
			limit = {
				check_variable = { wal_sr_minus_expect > 0  }
				check_variable = { wal_sr_minus_expect < 7 }
			}
			hidden_effect = {
				country_event = { id = wallace.212 days = 3 random = 15 }
			}
			every_owned_state = { #South goes fr
				limit = { 
					can_have_elections_in_state = yes
					OR = {
						check_variable = { nationality = 83 } #Dixie
						check_variable = { nationality = 86 } #Southwestern
						check_variable = { nationality = 84 } #African American
					}
				}
				add_to_variable = { NPP_FR_bonus_popularity = 0.01 }
				subtract_from_variable = { RD_D_bonus_popularity = 0.01 }

				add_to_variable = { NPP_popularity = 0.01 }
				subtract_from_variable = { RD_popularity = 0.01 }
				US_underdog_1_1 = yes
			}
			#Happy south, slightly pissed north
			subtract_from_variable = { USA_NPP_Unity = 0.25 }
			every_owned_state = { #north pissed
				limit = { 
					can_have_elections_in_state = yes
					OR = {
						check_variable = { nationality = 82 } #Yankee
						check_variable = { nationality = 85 } #Steel Belt
						check_variable = { nationality = 88 } #Pacific
					}
				}
				add_to_variable = { RD_R_bonus_popularity = 0.01 }
				subtract_from_variable = { NPP_C_bonus_popularity = 0.01 }

				add_to_variable = { RD_popularity = 0.01 }
				subtract_from_variable = { NPP_popularity = 0.01 }

				US_underdog_1_1 = yes
			}
		}
		else ={
			hidden_effect = {
				country_event = { id = wallace.211 days = 3 random = 15 }
			}
			every_owned_state = { #South goes fr
				limit = { 
					can_have_elections_in_state = yes
					OR = {
						check_variable = { nationality = 83 } #Dixie
						check_variable = { nationality = 86 } #Southwestern
						check_variable = { nationality = 84 } #African American
					}
				}
				add_to_variable = { NPP_FR_bonus_popularity = 0.025 }
				subtract_from_variable = { RD_D_bonus_popularity = 0.025 }

				add_to_variable = { NPP_popularity = 0.025 }
				subtract_from_variable = { RD_popularity = 0.025 }
				US_underdog_NPP_2_2 = yes
			}
			#Slightly happier south, pissed north
			subtract_from_variable = { USA_NPP_Unity = 0.75 }
			every_owned_state = { #north pissed
				limit = { 
					can_have_elections_in_state = yes
					OR = {
						check_variable = { nationality = 82 } #Yankee
						check_variable = { nationality = 85 } #Steel Belt
						check_variable = { nationality = 88 } #Pacific
					}
				}
				add_to_variable = { RD_R_bonus_popularity = 0.025 }
				subtract_from_variable = { NPP_C_bonus_popularity = 0.025 }

				add_to_variable = { RD_popularity = 0.025 }
				subtract_from_variable = { NPP_popularity = 0.025 }
				US_underdog_NPP_2_2 = yes
			}
		}
	}
}

USA_wal_new_business_test ={
	USA_WAL_Business_flavor = yes
	hidden_effect ={
		if = {
			limit = {
				check_variable = { WAL64_Business < 3 }
			}
			every_owned_state = { #west coast pissed
				limit = { 
					can_have_elections_in_state = yes
					check_variable = { nationality = 88 } #Pacific
				}
				subtract_from_variable = { NPP_popularity = 0.04 }
				US_underdog_NPP_2_2 = yes
			}
			#very pissed business, very happy npp
			add_to_variable = { USA_NPP_Unity = 0.5 }
			every_owned_state = { #Populist economics ftw
				limit = { 
					can_have_elections_in_state = yes
					NOT = { check_variable = { nationality = 88 } } #Pacific
				}
				add_to_variable = { NPP_popularity = 0.01 }
				US_underdog_05_05 = yes
			}
		}
		else_if = {
			limit = {
				check_variable = { WAL64_Business > 2 }
				check_variable = { WAL64_Business < 8 }
			}
			#Pissed business, happy npp
			every_owned_state = { #west coast pissed
				limit = { 
					can_have_elections_in_state = yes
					check_variable = { nationality = 88 } #Pacific
				}
				subtract_from_variable = { NPP_popularity = 0.02 }
				US_underdog_1_1 = yes
			}
			add_to_variable = { USA_NPP_Unity = 0.25 }
			every_owned_state = { #Populist economics ftw
				limit = { 
					can_have_elections_in_state = yes
					NOT = { check_variable = { nationality = 88 } } #Pacific
				}
				add_to_variable = { NPP_popularity = 0.005 }
			}
		}
		else_if = {
			limit = {
				check_variable = { WAL64_Business > 7 }
				check_variable = { WAL64_Business < 13 }
			}
			#Neutral business
		}
		else_if = {
			limit = {
				check_variable = { WAL64_Business > 12 }
				check_variable = { WAL64_Business < 18 }
			}
			#Happy big business, unhappy NPP
			every_owned_state = { #South leaves fr
				limit = { 
					can_have_elections_in_state = yes
					OR = {
						check_variable = { nationality = 83 } #Dixie
						check_variable = { nationality = 86 } #Southwestern
						check_variable = { nationality = 84 } #African American
					}
				}
				subtract_from_variable = { NPP_FR_bonus_popularity = 0.01 }
				subtract_from_variable = { NPP_popularity = 0.01 }
				US_underdog_05_05 = yes
			}
			subtract_from_variable = { USA_NPP_Unity = 0.5 } #ANGERY PARTY
			every_owned_state = { #northern FR growing
				limit = { 
					can_have_elections_in_state = yes
					OR = {
						check_variable = { nationality = 82 } #Yankee
						check_variable = { nationality = 85 } #Steel Belt
						check_variable = { nationality = 88 } #Pacific
					}
				}
				add_to_variable = { NPP_FR_bonus_popularity = 0.01 }
				add_to_variable = { NPP_popularity = 0.01 }
				US_underdog_05_05 = yes
			}
		}
		else = {
			#Very happy big business, very unhappy NPP
			every_owned_state = { #South goes dem
				limit = { 
					can_have_elections_in_state = yes
					OR = {
						check_variable = { nationality = 83 } #Dixie
						check_variable = { nationality = 86 } #Southwestern
						check_variable = { nationality = 84 } #African American
					}
				}
				subtract_from_variable = { NPP_FR_bonus_popularity = 0.02 }
				subtract_from_variable = { NPP_popularity = 0.02 }
				US_underdog_1_1 = yes
			}
			subtract_from_variable = { USA_NPP_Unity = 1 } #ANGERY PARTY
			every_owned_state = { #northern FR growing
				limit = { 
					can_have_elections_in_state = yes
					OR = {
						check_variable = { nationality = 82 } #Yankee
						check_variable = { nationality = 85 } #Steel Belt
						check_variable = { nationality = 88 } #Pacific
					}
				}
				add_to_variable = { NPP_FR_bonus_popularity = 0.02 }
				add_to_variable = { NPP_popularity = 0.02 }
				US_underdog_1_1 = yes
			}
		}
	}
}

USA_wal_vh_segr_yockey ={ #chain for very low segregation wallace
	if ={
		limit = { check_variable = { WAL_extremist_dissatisfaction_counter = 0 } }
		country_event = {id = wallace.231 days = 3 random = 60}
		add_to_variable = {WAL_extremist_dissatisfaction_counter = 1}
	}
	else_if ={
		limit = { check_variable = { WAL_extremist_dissatisfaction_counter = 1 } }
		country_event = {id = wallace.232 days = 3 random = 60}
		add_to_variable = {WAL_extremist_dissatisfaction_counter = 1}
	}
	else_if ={
		limit = { check_variable = { WAL_extremist_dissatisfaction_counter = 2 } }
		country_event = {id = wallace.233 days = 3 random = 60}
		add_to_variable = {WAL_extremist_dissatisfaction_counter = 1}
	}
	else_if ={
		limit = { check_variable = { WAL_extremist_dissatisfaction_counter = 3 } }
		country_event = {id = wallace.234 days = 3 random = 60}
		add_to_variable = {WAL_extremist_dissatisfaction_counter = 1}
	}
	else_if ={
		limit = { check_variable = { WAL_extremist_dissatisfaction_counter = 4 } }
		country_event = {id = wallace.235 days = 3 random = 60}
		add_to_variable = {WAL_extremist_dissatisfaction_counter = 1}
	}
	else_if ={
		limit = { check_variable = { WAL_extremist_dissatisfaction_counter = 5 } }
		country_event = {id = wallace.236 days = 3 random = 60}
		add_to_variable = {WAL_extremist_dissatisfaction_counter = 1}
	}
	else_if ={
		limit = { check_variable = { WAL_extremist_dissatisfaction_counter = 6 } }
		country_event = {id = wallace.237 days = 3 random = 60}
		add_to_variable = {WAL_extremist_dissatisfaction_counter = 1}
	}
}

USA_WAL_Business_flavor = { #better reuse what worked before, right?
	hidden_effect = {
		if ={
			limit = {check_variable = {WAL64_Business < 1}}
			country_event = {id = wallace.201 days = 3 random = 60}
		}
		if ={
			limit = {check_variable = {WAL64_Business < 7}}
			country_event = {id = wallace.202 days = 3 random = 60}
		}
		if ={
			limit = {check_variable = {WAL64_Business < 9}}
			country_event = {id = wallace.203 days = 3 random = 60}
		}
		if ={
			limit = {check_variable = {WAL64_Business < 11}}
			country_event = {id = wallace.204 days = 3 random = 60}
		}
		if ={
			limit = {check_variable = {WAL64_Business > 14}}
			country_event = {id = wallace.205 days = 3 random = 60}
		}
		if ={
			limit = {check_variable = {WAL64_Business > 16}}
			country_event = {id = wallace.206 days = 3 random = 60}
		}
		if ={
			limit = {check_variable = {WAL64_Business > 17}}
			country_event = {id = wallace.207 days = 3 random = 60}
		}
	}
}

wallace_update_var_display = { #updates var for display
	set_variable = { wal_sr_minus_expect = WAL_STATES_RIGHTS }
	subtract_from_variable = { wal_sr_minus_expect = WAL_STATES_RIGHTS_expectation }
	set_variable = { wal_seg_minus_expect = WAL_SEGREGATION }
	subtract_from_variable = { wal_seg_minus_expect = WAL_SEGREGATION_expectation }
}

wallace_4month_pulse_check = { #triggers every 4 months
	add_to_variable = { WAL_SEGREGATION_expectation = 0.5 }
	add_to_variable = { WAL_STATES_RIGHTS_expectation = 0.5 }
	hidden_effect = {
		USA_wal_new_segregation_expectation = yes
		USA_wal_new_states_rights_expectation = yes
	}
}

##############################################
### GLENN !
##############################################

GLN_NASA_recalculate_budget_left = {
    set_variable = { USA_GLN_NASA_Budget_Leftover = USA_GLN_NASA_Funding }
    subtract_from_variable = { USA_GLN_NASA_Budget_Leftover = USA_GLN_NASA_Mission_Investment }
    if = {
        limit = { check_variable = { USA_GLN_NASA_Budget_Leftover < 0 } }
        log = "[GetDateText]: [USA.GetName]: Glenn Negative NASA Budget"
        add_to_variable = { USA_GLN_NASA_Mission_Investment = USA_GLN_NASA_Budget_Leftover }
        set_variable = { USA_GLN_NASA_Budget_Leftover = 0 }
    }
}

GLN_NASA_Unmanned_Mission = {

	if = { limit = { has_country_flag = USA_GLN_Orion_Program_Activated }
	set_variable = { USA_GLN_NASA_Mission_Prep = 40 }
	add_to_variable = { USA_GLN_NASA_Mission_Prep = USA_GLN_NASA_Unmanned_Mission_Boost }
	}

	if = { limit = { has_country_flag = USA_GLN_Eros_Program_Activated }
	set_variable = { USA_GLN_NASA_Mission_Prep = 30 }
	add_to_variable = { USA_GLN_NASA_Mission_Prep = USA_GLN_NASA_Unmanned_Mission_Boost }
	}

	if = { limit = { has_country_flag = USA_GLN_Minerva_Program_Activated }
	set_variable = { USA_GLN_NASA_Mission_Prep = 35 }
	add_to_variable = { USA_GLN_NASA_Mission_Prep = USA_GLN_NASA_Unmanned_Mission_Boost }
	}
}



GLN_NASA_Manned_Mission = {

	if = { limit = { has_country_flag = USA_GLN_Daedulus_Program_Activated }
	set_variable = { USA_GLN_NASA_Mission_Prep = 30 }
	add_to_variable = { USA_GLN_NASA_Mission_Prep = USA_GLN_NASA_Manned_Mission_Boost }
	}

	if = { limit = { has_country_flag = USA_GLN_Diana_Program_Activated }
	set_variable = { USA_GLN_NASA_Mission_Prep = 20 }
	add_to_variable = { USA_GLN_NASA_Mission_Prep = USA_GLN_NASA_Manned_Mission_Boost }
	}

	if = { limit = { has_country_flag = USA_GLN_Ares_Program_Activated }
	set_variable = { USA_GLN_NASA_Mission_Prep = 10 }
	add_to_variable = { USA_GLN_NASA_Mission_Prep = USA_GLN_NASA_Manned_Mission_Boost }
	}
}





GLN_NASA_Mission_Outcome_Unmanned = {

##### UNMANNED

	hidden_effect = {
	if = { limit = {has_country_flag = USA_GLN_Doing_Unmanned_Mission }

		set_temp_variable = { USA_GLN_Mission_Outcome_Total_Temp_Var = 100 }

		set_temp_variable = { USA_GLN_Mission_Additive_Chance_Working = 0 }

		if = {
			limit = { check_variable = { USA_GLN_NASA_Mission_Prep < 90 } }

			set_temp_variable = { USA_GLN_Mission_Additive_Chance_Working = 10 }
		}

		clamp_variable = {
			var = USA_GLN_NASA_Mission_Prep
			min = 0
			max = 100
		}

		add_to_temp_variable = { USA_GLN_Mission_Additive_Chance_Working = USA_GLN_NASA_Mission_Prep }

		subtract_from_temp_variable = { USA_GLN_Mission_Outcome_Total_Temp_Var = USA_GLN_Mission_Additive_Chance_Working }

		meta_effect = {
			text = {
					random_list = {

							[Get_Nasa_Mission_Prep] = {
							country_event = { id = glenn.space.2 }
							}

							[Get_Nasa_Mission_Outcome] = {
							country_event = { id = glenn.space.1 }
							}

					}
			}
			Get_Nasa_Mission_Prep = "[?USA_GLN_NASA_Mission_Prep]"
			Get_Nasa_Mission_Outcome = "[?USA_GLN_Mission_Outcome_Total_Temp_Var]"
			}
		}
	}
}

GLN_NASA_Mission_Outcome_Manned = {

######## MANNED

	if = { limit = {has_country_flag = USA_GLN_Doing_Manned_Mission }

		hidden_effect = {

		set_temp_variable = { USA_GLN_Mission_Outcome_Total_Temp_Var = 100 }
		subtract_from_temp_variable = { USA_GLN_Mission_Outcome_Total_Temp_Var = USA_GLN_NASA_Mission_Prep }
		set_temp_variable = { USA_GLN_Mission_Outcome_Half_Two = 0 }
		divide_temp_variable = { USA_GLN_Mission_Outcome_Total_Temp_Var = 2 }
		add_to_temp_variable = { USA_GLN_Mission_Outcome_Half_Two = USA_GLN_Mission_Outcome_Total_Temp_Var }

		meta_effect = {
			text = {
					random_list = {

							[Get_Nasa_Mission_Prep] = {
							country_event = { id = glenn.space.6 }
							}

							[Get_Nasa_Mission_Outcome] = {
							country_event = { id = glenn.space.5 }
							}

							[Get_Nasa_Mission_Outcome_Two] = {
							country_event = { id = glenn.space.4 }
							}

					}
			}
			Get_Nasa_Mission_Prep = "[?USA_GLN_NASA_Mission_Prep]"
			Get_Nasa_Mission_Outcome = "[?USA_GLN_Mission_Outcome_Total_Temp_Var]"
			Get_Nasa_Mission_Outcome_Two = "[?USA_GLN_Mission_Outcome_Half_Two]"
			}
		}
	}
}





GLN_NASA_Mission_Rewards = {

	###############################
	######### ORION
	##############################

	if =  {
		limit = { has_country_flag = USA_GLN_Orion_Program_Activated }


		#### Science Points
		random_list = {
			33 = {
				set_variable = { USA_GLN_Mission_Science_Points_Reward = 15 }

				set_temp_variable = { USA_GLN_Orion_Mission_Science_Rewards_Boost = 0 }
				add_to_temp_variable = { USA_GLN_Orion_Mission_Science_Rewards_Boost = USA_GLN_NASA_Lower_Missions_Rewards_Boost }
				multiply_variable = { USA_GLN_Mission_Science_Points_Reward = USA_GLN_Orion_Mission_Science_Rewards_Boost }
				add_to_variable = { USA_GLN_Mission_Science_Points_Reward = USA_GLN_NASA_Unmanned_Mission_Boost }

				round_variable = USA_GLN_Mission_Science_Points_Reward
			}
			33 = {
				set_variable = { USA_GLN_Mission_Science_Points_Reward = 20 }

				set_temp_variable = { USA_GLN_Orion_Mission_Science_Rewards_Boost = 0 }
				add_to_temp_variable = { USA_GLN_Orion_Mission_Science_Rewards_Boost = USA_GLN_NASA_Lower_Missions_Rewards_Boost }
				multiply_variable = { USA_GLN_Mission_Science_Points_Reward = USA_GLN_Orion_Mission_Science_Rewards_Boost }
				add_to_variable = { USA_GLN_Mission_Science_Points_Reward = USA_GLN_NASA_Unmanned_Mission_Boost }

				round_variable = USA_GLN_Mission_Science_Points_Reward
			}
			34 = {
				set_variable = { USA_GLN_Mission_Science_Points_Reward = 25 }

				set_temp_variable = { USA_GLN_Orion_Mission_Science_Rewards_Boost = 0 }
				add_to_temp_variable = { USA_GLN_Orion_Mission_Science_Rewards_Boost = USA_GLN_NASA_Lower_Missions_Rewards_Boost }
				multiply_variable = { USA_GLN_Mission_Science_Points_Reward = USA_GLN_Orion_Mission_Science_Rewards_Boost }
				add_to_variable = { USA_GLN_Mission_Science_Points_Reward = USA_GLN_NASA_Unmanned_Mission_Boost }

				round_variable = USA_GLN_Mission_Science_Points_Reward
			}
		}

		#### Public Support
		random_list = {
			33 = { set_variable = { USA_GLN_Mission_Public_Support_Reward = 3 } }
			33 = { set_variable = { USA_GLN_Mission_Public_Support_Reward = 5 } }
			34 = { set_variable = { USA_GLN_Mission_Public_Support_Reward = 7 } }
		}
	}

	###############################
	######### MINERVA
	##############################

	if =  {
		limit = { has_country_flag = USA_GLN_Minerva_Program_Activated }


		##### Science Points
		random_list = {
			33 = {
				set_variable = { USA_GLN_Mission_Science_Points_Reward = 5 }

				set_temp_variable = { USA_GLN_Minerva_Mission_Science_Rewards_Boost = 0 }
				add_to_temp_variable = { USA_GLN_Minerva_Mission_Science_Rewards_Boost = USA_GLN_NASA_Lower_Missions_Rewards_Boost }
				multiply_variable = { USA_GLN_Mission_Science_Points_Reward = USA_GLN_Minerva_Mission_Science_Rewards_Boost }
				add_to_variable = { USA_GLN_Mission_Science_Points_Reward = USA_GLN_NASA_Unmanned_Mission_Boost}

				round_variable = USA_GLN_Mission_Science_Points_Reward
			}
			33 = {
				set_variable = { USA_GLN_Mission_Science_Points_Reward = 10 }

				set_temp_variable = { USA_GLN_Minerva_Mission_Science_Rewards_Boost = 0 }
				add_to_temp_variable = { USA_GLN_Minerva_Mission_Science_Rewards_Boost = USA_GLN_NASA_Lower_Missions_Rewards_Boost }
				multiply_variable = { USA_GLN_Mission_Science_Points_Reward = USA_GLN_Minerva_Mission_Science_Rewards_Boost }
				add_to_variable = { USA_GLN_Mission_Science_Points_Reward = USA_GLN_NASA_Unmanned_Mission_Boost}

				round_variable = USA_GLN_Mission_Science_Points_Reward
			}
			34 = {
				set_variable = { USA_GLN_Mission_Science_Points_Reward = 20 }

				set_temp_variable = { USA_GLN_Minerva_Mission_Science_Rewards_Boost = 0 }
				add_to_temp_variable = { USA_GLN_Minerva_Mission_Science_Rewards_Boost = USA_GLN_NASA_Lower_Missions_Rewards_Boost }
				multiply_variable = { USA_GLN_Mission_Science_Points_Reward = USA_GLN_Minerva_Mission_Science_Rewards_Boost }
				add_to_variable = { USA_GLN_Mission_Science_Points_Reward = USA_GLN_NASA_Unmanned_Mission_Boost}

				round_variable = USA_GLN_Mission_Science_Points_Reward
			}
		}

		##### Public Support
		random_list = {
			33 = {
				set_variable = { USA_GLN_Mission_Public_Support_Reward = 5 }
				add_political_power = 25
				add_to_variable = { miscs_income = 5 }
			}

			33 = {
				set_variable = { USA_GLN_Mission_Public_Support_Reward = 7 }
				add_political_power = 30
				add_to_variable = { miscs_income = 10 }
			}

			34 = {
				set_variable = { USA_GLN_Mission_Public_Support_Reward = 9 }
				add_political_power = 30
				add_to_variable = { miscs_income = 15 }
			}
		}

		##### Unique Reward - Decrypt/Encrypt stuff

		if = { limit = { check_variable = { USA_GLN_Minerva_Counter = 1 }}
			add_ideas = USA_Glenn_Minerva_Buff_1
		}

		if = { limit = { check_variable = { USA_GLN_Minerva_Counter = 2 }}
			swap_ideas = {
				remove_idea = USA_Glenn_Minerva_Buff_1
				add_idea = USA_Glenn_Minerva_Buff_2
			}
		}

		if = { limit = { check_variable = { USA_GLN_Minerva_Counter = 3 }}
			swap_ideas = {
				remove_idea = USA_Glenn_Minerva_Buff_2
				add_idea = USA_Glenn_Minerva_Buff_3
			}
		}

		if = { limit = { check_variable = { USA_GLN_Minerva_Counter = 4 }}
			swap_ideas = {
				remove_idea = USA_Glenn_Minerva_Buff_3
				add_idea = USA_Glenn_Minerva_Buff_4
			}
		}

		if = { limit = { check_variable = { USA_GLN_Minerva_Counter = 5 }}
			swap_ideas = {
				remove_idea = USA_Glenn_Minerva_Buff_4
				add_idea = USA_Glenn_Minerva_Buff_5
			}
		}
	}


	###############################
	######### EROS
	##############################

	if =  {
			limit = { has_country_flag = USA_GLN_Eros_Program_Activated }

		##### Science Points
		random_list = {
			33 = {
				set_variable = { USA_GLN_Mission_Science_Points_Reward = 5 }

				set_temp_variable = { USA_GLN_Eros_Mission_Science_Rewards_Boost = 0 }
				add_to_temp_variable = { USA_GLN_Eros_Mission_Science_Rewards_Boost = USA_GLN_NASA_Lower_Missions_Rewards_Boost }
				multiply_variable = { USA_GLN_Mission_Science_Points_Reward = USA_GLN_Eros_Mission_Science_Rewards_Boost }
				add_to_variable = { USA_GLN_Mission_Science_Points_Reward = USA_GLN_NASA_Unmanned_Mission_Boost }

				round_variable = USA_GLN_Mission_Science_Points_Reward
			}

			33 = {
				set_variable = { USA_GLN_Mission_Science_Points_Reward = 10 }

				set_temp_variable = { USA_GLN_Eros_Mission_Science_Rewards_Boost = 0 }
				add_to_temp_variable = { USA_GLN_Eros_Mission_Science_Rewards_Boost = USA_GLN_NASA_Lower_Missions_Rewards_Boost }
				multiply_variable = { USA_GLN_Mission_Science_Points_Reward = USA_GLN_Eros_Mission_Science_Rewards_Boost }
				add_to_variable = { USA_GLN_Mission_Science_Points_Reward = USA_GLN_NASA_Unmanned_Mission_Boost }

				round_variable = USA_GLN_Mission_Science_Points_Reward
			}

			34 = {
				set_variable = { USA_GLN_Mission_Science_Points_Reward = 15 }

				set_temp_variable = { USA_GLN_Eros_Mission_Science_Rewards_Boost = 0 }
				add_to_temp_variable = { USA_GLN_Eros_Mission_Science_Rewards_Boost = USA_GLN_NASA_Lower_Missions_Rewards_Boost }
				multiply_variable = { USA_GLN_Mission_Science_Points_Reward = USA_GLN_Eros_Mission_Science_Rewards_Boost }
				add_to_variable = { USA_GLN_Mission_Science_Points_Reward = USA_GLN_NASA_Unmanned_Mission_Boost }

				round_variable =  USA_GLN_Mission_Science_Points_Reward
			}
		}

		##### Public Support
		random_list = {
			45 = {
				set_variable = { USA_GLN_Mission_Public_Support_Reward = 7 }
				add_war_support = 0.005

				every_owned_state = { #National
							limit = { can_have_elections_in_state = yes }
					set_temp_variable = { popularity_bonus = 0.005 }
					add_to_variable = { RD_R_bonus_popularity = popularity_bonus }
					add_to_variable = { RD_popularity = popularity_bonus }
					subtract_from_variable = { NPP_popularity = popularity_bonus }
				}
				add_popularity = {
					ideology = social_liberal
					popularity = 0.0025
				}
			}

			35 = {
				set_variable = { USA_GLN_Mission_Public_Support_Reward = 9 }
				add_war_support = 0.01
				add_popularity = {
					ideology = social_liberal
					popularity = 0.005
				}

				every_owned_state = { #National
							limit = { can_have_elections_in_state = yes }
					set_temp_variable = { popularity_bonus = 0.005 }
					add_to_variable = { RD_R_bonus_popularity = popularity_bonus }
					add_to_variable = { RD_popularity = popularity_bonus }
					subtract_from_variable = { NPP_popularity = popularity_bonus }
				}
			}

			20 = {
				set_variable = { USA_GLN_Mission_Public_Support_Reward = 12 }
				add_war_support = 0.015
				add_popularity = {
					ideology = social_liberal
					popularity = 0.01
				}

				every_owned_state = { #National
							limit = { can_have_elections_in_state = yes }
					set_temp_variable = { popularity_bonus = 0.005 }
					add_to_variable = { RD_R_bonus_popularity = popularity_bonus }
					add_to_variable = { RD_popularity = popularity_bonus }
					subtract_from_variable = { NPP_popularity = popularity_bonus }
				}
			}
		}

		##### Unique Reward - Missile Base stuff

		if = { limit = { check_variable = { USA_GLN_Eros_Counter = 1 }}
			add_ideas = USA_GLN_Eros_Buff_1
		}

		if = { limit = { check_variable = { USA_GLN_Eros_Counter = 2 }}
			swap_ideas = {
				remove_idea = USA_GLN_Eros_Buff_1
				add_idea = USA_GLN_Eros_Buff_2
			}
		}

		if = { limit = { check_variable = { USA_GLN_Eros_Counter = 3 }}
			swap_ideas = {
				remove_idea = USA_GLN_Eros_Buff_2
				add_idea = USA_GLN_Eros_Buff_3
			}
		}

		if = { limit = { check_variable = { USA_GLN_Eros_Counter = 4 }}
			swap_ideas = {
				remove_idea = USA_GLN_Eros_Buff_3
				add_idea = USA_GLN_Eros_Buff_4
			}
		}

		if = { limit = { check_variable = { SA_UGLN_Eros_Counter = 5 }}
			swap_ideas = {
				remove_idea = USA_GLN_Eros_Buff_4
				add_idea = USA_GLN_Eros_Buff_5
			}
		}
	}


###################### MANNED

	###############################
	######### DAEDULUS
	##############################
	if =  {
		limit = { has_country_flag = USA_GLN_Daedulus_Program_Activated }

		##### Science Points
		random_list = {
			45 = {
				set_variable = { USA_GLN_Mission_Science_Points_Reward = 3 }

				set_temp_variable = { USA_GLN_Daedulus_Mission_Science_Rewards_Boost = 0 }
				add_to_temp_variable = { USA_GLN_Daedulus_Mission_Science_Rewards_Boost = USA_GLN_NASA_Manned_Missions_Rewards_Boost }
				multiply_variable = { USA_GLN_Mission_Science_Points_Reward = USA_GLN_Daedulus_Mission_Science_Rewards_Boost }
				add_to_variable = { USA_GLN_Mission_Science_Points_Reward = USA_GLN_NASA_Manned_Mission_Boost }

				round_variable = USA_GLN_Mission_Science_Points_Reward
			}
			35 = {
				set_variable = { USA_GLN_Mission_Science_Points_Reward = 5 }

				set_temp_variable = { USA_GLN_Daedulus_Mission_Science_Rewards_Boost = 0 }
				add_to_temp_variable = { USA_GLN_Daedulus_Mission_Science_Rewards_Boost = USA_GLN_NASA_Manned_Missions_Rewards_Boost }
				multiply_variable = { USA_GLN_Mission_Science_Points_Reward = USA_GLN_Daedulus_Mission_Science_Rewards_Boost }
				add_to_variable = { USA_GLN_Mission_Science_Points_Reward = USA_GLN_NASA_Manned_Mission_Boost }

				round_variable = USA_GLN_Mission_Science_Points_Reward
			}
			20 = {
				set_variable = { USA_GLN_Mission_Science_Points_Reward = 12 }

				set_temp_variable = { USA_GLN_Daedulus_Mission_Science_Rewards_Boost = 0 }
				add_to_temp_variable = { USA_GLN_Daedulus_Mission_Science_Rewards_Boost = USA_GLN_NASA_Manned_Missions_Rewards_Boost }
				multiply_variable = { USA_GLN_Mission_Science_Points_Reward = USA_GLN_Daedulus_Mission_Science_Rewards_Boost }
				add_to_variable = { USA_GLN_Mission_Science_Points_Reward = USA_GLN_NASA_Manned_Mission_Boost }

				round_variable = USA_GLN_Mission_Science_Points_Reward
			}
		}

		##### Public Support
		random_list = {
			50 = {
				set_variable = { USA_GLN_Mission_Public_Support_Reward = 10 }
				add_stability = 0.005
				add_political_power = 25
				add_popularity = {
					ideology = social_liberal
					popularity = 0.0025
				}

				every_owned_state = { #National
							limit = { can_have_elections_in_state = yes }
					set_temp_variable = { popularity_bonus = 0.005 }
					add_to_variable = { RD_R_bonus_popularity = popularity_bonus }
					add_to_variable = { RD_popularity = popularity_bonus }
					subtract_from_variable = { NPP_popularity = popularity_bonus }
				}
			}

			30 = {
				set_variable = { USA_GLN_Mission_Public_Support_Reward = 13 }
				add_stability = 0.01
				add_political_power = 40
				add_popularity = {
					ideology = social_liberal
					popularity = 0.005
				}

				every_owned_state = { #National
							limit = { can_have_elections_in_state = yes }
					set_temp_variable = { popularity_bonus = 0.005 }
					add_to_variable = { RD_R_bonus_popularity = popularity_bonus }
					add_to_variable = { RD_popularity = popularity_bonus }
					subtract_from_variable = { NPP_popularity = popularity_bonus }
				}
			}

			20 = {
				set_variable = { USA_GLN_Mission_Public_Support_Reward = 15 }
				add_stability = 0.015
				add_political_power = 50
				add_popularity = {
					ideology = social_liberal
					popularity = 0.01
				}

				every_owned_state = { #National
							limit = { can_have_elections_in_state = yes }
					set_temp_variable = { popularity_bonus = 0.005 }
					add_to_variable = { RD_R_bonus_popularity = popularity_bonus }
					add_to_variable = { RD_popularity = popularity_bonus }
					subtract_from_variable = { NPP_popularity = popularity_bonus }
				}
			}
		}

		##### Unique Reward - Base Prep up


		if = { 
			limit = { 
				check_variable = { USA_GLN_Daedulus_Counter > 0 }
				check_variable = { USA_GLN_Daedulus_Counter < 7 }
			}
			add_to_variable = { USA_GLN_NASA_Manned_Mission_Boost = 1 }
			add_to_variable = { USA_GLN_NASA_Unmanned_Mission_Boost = 1}
		}
	}


	###############################
	######### DIANA
	##############################

	if =  {
		limit = { has_country_flag = USA_GLN_Diana_Program_Activated }

		##### Science Points
		random_list = {
			45 = {
				set_variable = { USA_GLN_Mission_Science_Points_Reward = 15 }

				set_temp_variable = { USA_GLN_Diana_Mission_Science_Rewards_Boost = 0 }
				add_to_temp_variable = { USA_GLN_Diana_Mission_Science_Rewards_Boost = USA_GLN_NASA_Manned_Missions_Rewards_Boost }
				multiply_variable = { USA_GLN_Mission_Science_Points_Reward = USA_GLN_Diana_Mission_Science_Rewards_Boost }
				add_to_variable = { USA_GLN_Mission_Science_Points_Reward = USA_GLN_NASA_Manned_Mission_Boost }

				round_variable = USA_GLN_Mission_Science_Points_Reward
			}

			35 = {
				set_variable = { USA_GLN_Mission_Science_Points_Reward = 20 }

				set_temp_variable = { USA_GLN_Diana_Mission_Science_Rewards_Boost = 0 }
				add_to_temp_variable = { USA_GLN_Diana_Mission_Science_Rewards_Boost = USA_GLN_NASA_Manned_Missions_Rewards_Boost }
				multiply_variable = { USA_GLN_Mission_Science_Points_Reward = USA_GLN_Diana_Mission_Science_Rewards_Boost }
				add_to_variable = { USA_GLN_Mission_Science_Points_Reward = USA_GLN_NASA_Manned_Mission_Boost }

				round_variable =  USA_GLN_Mission_Science_Points_Reward
			}

			20 = {
				set_variable = { USA_GLN_Mission_Science_Points_Reward = 25 }

				set_temp_variable = { USA_GLN_Diana_Mission_Science_Rewards_Boost = 0 }
				add_to_temp_variable = { USA_GLN_Diana_Mission_Science_Rewards_Boost = USA_GLN_NASA_Manned_Missions_Rewards_Boost }
				multiply_variable = { USA_GLN_Mission_Science_Points_Reward = USA_GLN_Diana_Mission_Science_Rewards_Boost }
				add_to_variable = { USA_GLN_Mission_Science_Points_Reward = USA_GLN_NASA_Manned_Mission_Boost }

				round_variable =  USA_GLN_Mission_Science_Points_Reward
			}
		}

		##### Public Support
		random_list = {
			50 = {
				set_variable = { USA_GLN_Mission_Public_Support_Reward = 15 }
				add_stability = 0.01
				add_political_power = 50
				add_popularity = {
					ideology = social_liberal
					popularity = 0.005
				}

				every_owned_state = { #National
							limit = { can_have_elections_in_state = yes }
					set_temp_variable = { popularity_bonus = 0.005 }
					add_to_variable = { RD_R_bonus_popularity = popularity_bonus }
					add_to_variable = { RD_popularity = popularity_bonus }
					subtract_from_variable = { NPP_popularity = popularity_bonus }
				}
			}

			30 = {
				set_variable = { USA_GLN_Mission_Public_Support_Reward = 18 }
				add_stability = 0.01
				add_political_power = 40
				add_popularity = {
					ideology = social_liberal
					popularity = 0.01
				}

				every_owned_state = { #National
							limit = { can_have_elections_in_state = yes }
					set_temp_variable = { popularity_bonus = 0.005 }
					add_to_variable = { RD_R_bonus_popularity = popularity_bonus }
					add_to_variable = { RD_popularity = popularity_bonus }
					subtract_from_variable = { NPP_popularity = popularity_bonus }
				}
			}

			20 = {
				set_variable = { USA_GLN_Mission_Public_Support_Reward = 24 }
				add_stability = 0.015
				add_political_power = 50
				add_popularity = {
					ideology = social_liberal
					popularity = 0.015
				}

				every_owned_state = { #National
							limit = { can_have_elections_in_state = yes }
					set_temp_variable = { popularity_bonus = 0.005 }
					add_to_variable = { RD_R_bonus_popularity = popularity_bonus }
					add_to_variable = { RD_popularity = popularity_bonus }
					subtract_from_variable = { NPP_popularity = popularity_bonus }
				}
			}
		}

		##### Moon landing idea

		if = { 
			limit = { check_variable = { USA_GLN_Succsefull_Diana_Missions = 3 } }
			country_event = { id = glenn.space.9 days = 7 }
		}
	}

	###############################
	######### ARES
	##############################

	if =  {
		limit = { has_country_flag = USA_GLN_Ares_Program_Activated }

		##### Science Points
		random_list = {
			45 = {
				set_variable = { USA_GLN_Mission_Science_Points_Reward = 20 }

				set_temp_variable = { USA_GLN_Ares_Mission_Science_Rewards_Boost = 0 }
				add_to_temp_variable = { USA_GLN_Ares_Mission_Science_Rewards_Boost = USA_GLN_NASA_Manned_Missions_Rewards_Boost }
				multiply_variable = { USA_GLN_Mission_Science_Points_Reward = USA_GLN_Ares_Mission_Science_Rewards_Boost }
				add_to_variable = { USA_GLN_Mission_Science_Points_Reward = USA_GLN_NASA_Manned_Mission_Boost }

				round_variable = USA_GLN_Mission_Science_Points_Reward
			}

			35 = {
				set_variable = { USA_GLN_Mission_Science_Points_Reward =  30 }

				set_temp_variable = { USA_GLN_Ares_Mission_Science_Rewards_Boost = 0 }
				add_to_temp_variable = { USA_GLN_Ares_Mission_Science_Rewards_Boost = USA_GLN_NASA_Manned_Missions_Rewards_Boost }
				multiply_variable = { USA_GLN_Mission_Science_Points_Reward = USA_GLN_Ares_Mission_Science_Rewards_Boost }
				add_to_variable = { USA_GLN_Mission_Science_Points_Reward = USA_GLN_NASA_Manned_Mission_Boost }

				round_variable = USA_GLN_Mission_Science_Points_Reward
			}

			20 = {
				set_variable = { USA_GLN_Mission_Science_Points_Reward = 40 }

				set_temp_variable = { USA_GLN_Ares_Mission_Science_Rewards_Boost = 0 }
				add_to_temp_variable = { USA_GLN_Ares_Mission_Science_Rewards_Boost = USA_GLN_NASA_Manned_Missions_Rewards_Boost }
				multiply_variable = { USA_GLN_Mission_Science_Points_Reward = USA_GLN_Ares_Mission_Science_Rewards_Boost }
				add_to_variable = { USA_GLN_Mission_Science_Points_Reward = USA_GLN_NASA_Manned_Mission_Boost }

				round_variable =  USA_GLN_Mission_Science_Points_Reward
			}

		}

		##### Public Support
		random_list = {
			50 = {
				set_variable = { USA_GLN_Mission_Public_Support_Reward = 20 }
				add_stability = 0.015
				add_political_power = 40
				add_popularity = {
					ideology = social_liberal
					popularity = 0.005
				}

				every_owned_state = { #National
							limit = { can_have_elections_in_state = yes }
					set_temp_variable = { popularity_bonus = 0.005 }
					add_to_variable = { RD_R_bonus_popularity = popularity_bonus }
					add_to_variable = { RD_popularity = popularity_bonus }
					subtract_from_variable = { NPP_popularity = popularity_bonus }
				}
			}

			30 = {
				set_variable = { USA_GLN_Mission_Public_Support_Reward = 24 }
				add_stability = 0.02
				add_political_power = 50
				add_popularity = {
					ideology = social_liberal
					popularity = 0.01
				}

				every_owned_state = { #National
							limit = { can_have_elections_in_state = yes }
					set_temp_variable = { popularity_bonus = 0.005 }
					add_to_variable = { RD_R_bonus_popularity = popularity_bonus }
					add_to_variable = { RD_popularity = popularity_bonus }
					subtract_from_variable = { NPP_popularity = popularity_bonus }
				}
			}

			20 = {
				set_variable = { USA_GLN_Mission_Public_Support_Reward = 27 }
				add_stability = 0.025
				add_political_power = 75
				add_popularity = {
					ideology = social_liberal
					popularity = 0.015
				}

				every_owned_state = { #National
					limit = { can_have_elections_in_state = yes }
					
					set_temp_variable = { popularity_bonus = 0.005 }
					add_to_variable = { RD_R_bonus_popularity = popularity_bonus }
					add_to_variable = { RD_popularity = popularity_bonus }
					subtract_from_variable = { NPP_popularity = popularity_bonus }
				}
			}
		}

		##### Mars landing idea

		if = {
			limit = { check_variable = { USA_GLN_Succsefull_Ares_Missions = 4 } }
			country_event = { id = glenn.space.10 days = 2 }
		}
	}
}


	GLN_increase_nuclear_spending = {
		add_to_variable = { GLN_nuclear_spending = GLN_nuclear_expense }
		if = {
			limit = { has_country_flag = GLN_mine_chain_has_happened }
			if = { #Adjust cost based on the mine event chain
				limit = { has_country_flag = GLN_mine_chain_good_end }
				multiply_variable = { GLN_nuclear_expense = 0.75 }
			}
			else_if = {
				limit = { has_country_flag = GLN_mine_chain_bad_end }
				multiply_variable = { GLN_nuclear_expense = 1.25 }
				subtract_from_variable = { USA_GLN_Public_Support = 4 }
				clamp_variable = {
					var = USA_GLN_Public_Support
					min = 0
					max = 100
				}
			}
			else_if = { #Adjust cost based on the mine event chain
				limit = { has_country_flag = GLN_begin_mine_initial_move }
				multiply_variable = { GLN_nuclear_expense = 0.9 }
			}
		}
		add_to_variable = { misc_costs = GLN_nuclear_expense }
		set_variable = { GLN_nuclear_expense = 0 }
		hidden_effect = { #Event thresholds
			if = {
				limit = {
					NOT = { has_country_flag = GLN_dems_complained_about_spending }
					check_variable = { GLN_nuclear_spending > 499 }
				}
				country_event = { id = glenn.79 days = 4 }
				set_country_flag = GLN_dems_complained_about_spending
			}
			if = {
				limit = {
					NOT = { has_country_flag = GLN_mine_chain_has_happened }
					check_variable = { GLN_nuclear_spending > 999 }
				}
				country_event = { id = glenn.87 days = 7 }
				set_country_flag = GLN_dems_complained_about_spending
			}
		}
	}
	GLN_increase_sabotage_costs = {
		add_to_variable = { GLN_mine_fuckery_cost = 18 }
		add_to_variable = { GLN_fale_flag_cost = 15 }
		add_to_variable = { GLN_supplier_fuckery = 36 }
	}
#####################################
#  CURTIS LEMAY'S PRESIDENCY  #
#####################################
USA_LEMAY_LEGACY_OF_WALLACE_INTEGRATION = {

	if = {
		limit = {
		OR = {
		check_variable = { WAL_STATES_RIGHTS = 25 }
		check_variable = { WAL_STATES_RIGHTS = 24 }
		check_variable = { WAL_STATES_RIGHTS = 23 }
		check_variable = { WAL_STATES_RIGHTS = 22 }
		check_variable = { WAL_STATES_RIGHTS = 21 }
		check_variable = { WAL_STATES_RIGHTS = 20 }
		check_variable = { WAL_STATES_RIGHTS = 19 }
		check_variable = { WAL_STATES_RIGHTS = 18 }
		check_variable = { WAL_STATES_RIGHTS = 17 }
		check_variable = { WAL_STATES_RIGHTS = 16 }
		check_variable = { WAL_STATES_RIGHTS = 15 }
		check_variable = { WAL_STATES_RIGHTS = 14 }
		check_variable = { WAL_STATES_RIGHTS = 13 }
		check_variable = { WAL_STATES_RIGHTS = 12 }
			}
		}
		custom_effect_tooltip = LEMAY_USA_integration_pro_states_rights
		hidden_effect = {
			every_owned_state = {
				limit = {
					can_have_elections_in_state = yes
					OR = {
						check_variable = { nationality = 83 } #Dixie
						check_variable = { nationality = 84 } #African American
						check_variable = { nationality = 85 } #Steel Belt
					}
				}
				subtract_from_variable = { NPP_FR_bonus_popularity = 0.2 }
				add_to_variable = { NPP_Y_bonus_popularity = 0.2}
			}
			add_popularity = {
						ideology = national_socialism
						popularity = 0.02
			}
			add_popularity = {
						ideology = authoritarian_democrat
						popularity = -0.02
			}
		}
	}

	else_if = {
		limit = {
		OR = {
		check_variable = { WAL_STATES_RIGHTS = 11 }
		check_variable = { WAL_STATES_RIGHTS = 10 }
			}
		}
		custom_effect_tooltip = LEMAY_USA_integration_pro_states_rights
		hidden_effect = {
		every_owned_state = {
				limit = {
					can_have_elections_in_state = yes
					OR = {
						check_variable = { nationality = 83 } #Dixie
						check_variable = { nationality = 84 } #African American
						check_variable = { nationality = 85 } #Steel Belt
					}
				}
				subtract_from_variable = { NPP_FR_bonus_popularity = 0.2 }
				add_to_variable = { NPP_Y_bonus_popularity = 0.15}
				add_to_variable = { RD_D_bonus_popularity = 0.05 }
				subtract_from_variable = { NPP_popularity = 0.05 }
			}
			add_popularity = {
						ideology = national_socialism
						popularity = 0.015
				}
			add_popularity = {
						ideology = social_conservative
						popularity = 0.005
			}
			add_popularity = {
						ideology = authoritarian_democrat
						popularity = -0.02
			}
		}
	}

	else_if = {
		limit = {
		OR = {
		check_variable = { WAL_STATES_RIGHTS = 9 }
		check_variable = { WAL_STATES_RIGHTS = 8 }
		check_variable = { WAL_STATES_RIGHTS = 7 }
			}
		}
		custom_effect_tooltip = USA_add_NPP_popularity_low_north
		custom_effect_tooltip = LEMAY_USA_integration_neutral_states_rights
		hidden_effect = {
		every_owned_state = {
				limit = {
					can_have_elections_in_state = yes
					OR = {
						check_variable = { nationality = 82 } #Yankee
						check_variable = { nationality = 86 } #Southwestern
						check_variable = { nationality = 87 } #Rockies
						check_variable = { nationality = 88 } #Pacific
					}
				}
				add_to_variable = { NPP_popularity = 0.05}
				subtract_from_variable = { RD_popularity = 0.05}
			}
		every_owned_state = {
				limit = {
					can_have_elections_in_state = yes
					OR = {
						check_variable = { nationality = 83 } #Dixie
						check_variable = { nationality = 84 } #African American
						check_variable = { nationality = 85 } #Steel Belt
					}
				}
				subtract_from_variable = { NPP_FR_bonus_popularity = 0.2 }
				add_to_variable = { NPP_Y_bonus_popularity = 0.1}
				add_to_variable = { RD_D_bonus_popularity = 0.1 }
				subtract_from_variable = { NPP_popularity = 0.1 }
			}
			add_popularity = {
						ideology = national_socialism
						popularity = 0.01
				}
				add_popularity = {
						ideology = social_conservative
						popularity = 0.01
				}
			add_popularity = {
						ideology = authoritarian_democrat
						popularity = -0.02
				}
			}
		}
	else_if = {
		limit = {
			OR = {
				check_variable = { WAL_STATES_RIGHTS = 6 }
		check_variable = { WAL_STATES_RIGHTS = 5 }
			}
		}
		custom_effect_tooltip = LEMAY_USA_integration_anti_states_rights
		custom_effect_tooltip = USA_add_NPP_popularity_low_north
		hidden_effect = {
		every_owned_state = {
				limit = {
					can_have_elections_in_state = yes
					OR = {
						check_variable = { nationality = 82 } #Yankee
						check_variable = { nationality = 86 } #Southwestern
						check_variable = { nationality = 87 } #Rockies
						check_variable = { nationality = 88 } #Pacific
					}
				}
				add_to_variable = { NPP_popularity = 0.1}
				subtract_from_variable = { RD_popularity = 0.1}
			}
		every_owned_state = {
				limit = {
					can_have_elections_in_state = yes
					OR = {
						check_variable = { nationality = 83 } #Dixie
						check_variable = { nationality = 84 } #African American
						check_variable = { nationality = 85 } #Steel Belt
					}
				}
				subtract_from_variable = { NPP_FR_bonus_popularity = 0.15 }
				add_to_variable = { NPP_Y_bonus_popularity = 0.05}
				add_to_variable = { RD_D_bonus_popularity = 0.1 }
				subtract_from_variable = { NPP_popularity = 0.1 }
			}
			add_popularity = {
						ideology = national_socialism
						popularity = 0.005
				}
				add_popularity = {
						ideology = social_conservative
						popularity = 0.01
				}
			add_popularity = {
						ideology = authoritarian_democrat
						popularity = -0.015
			}
		}
	}
	else_if = {
		limit = {
		OR = {
		check_variable = { WAL_STATES_RIGHTS = 4 }
		check_variable = { WAL_STATES_RIGHTS = 3 }
			}
		}
		custom_effect_tooltip = LEMAY_USA_integration_anti_states_rights
		custom_effect_tooltip = USA_add_NPP_popularity_north
		hidden_effect = {
		every_owned_state = {
				limit = {
					can_have_elections_in_state = yes
					OR = {
						check_variable = { nationality = 82 } #Yankee
						check_variable = { nationality = 86 } #Southwestern
						check_variable = { nationality = 87 } #Rockies
						check_variable = { nationality = 88 } #Pacific
					}
				}
				add_to_variable = { NPP_popularity = 0.15}
				subtract_from_variable = { RD_popularity = 0.15}
			}
		every_owned_state = {
				limit = {
					can_have_elections_in_state = yes
					OR = {
						check_variable = { nationality = 83 } #Dixie
						check_variable = { nationality = 84 } #African American
						check_variable = { nationality = 85 } #Steel Belt
					}
				}
				subtract_from_variable = { NPP_FR_bonus_popularity = 0.2 }
				add_to_variable = { NPP_Y_bonus_popularity = 0.05}
				add_to_variable = { RD_D_bonus_popularity = 0.15 }
				subtract_from_variable = { NPP_popularity = 0.15 }
			}
			add_popularity = {
				ideology = national_socialism
				popularity = 0.005
			}
			add_popularity = {
				ideology = social_conservative
				popularity = 0.015
			}
			add_popularity = {
				ideology = authoritarian_democrat
				popularity = -0.02
			}
		}
	}
	else_if = {
		limit = {
		OR = {
		check_variable = { WAL_STATES_RIGHTS = 2 }
		check_variable = { WAL_STATES_RIGHTS = 1 }
		check_variable = { WAL_STATES_RIGHTS = 0 }
		}
			}
		custom_effect_tooltip = LEMAY_USA_integration_anti_states_rights
		custom_effect_tooltip = USA_add_NPP_popularity_north
		hidden_effect = {
			every_owned_state = {
				limit = {
					can_have_elections_in_state = yes
					OR = {
						check_variable = { nationality = 83 } #Dixie
						check_variable = { nationality = 84 } #African American
						check_variable = { nationality = 85 } #Steel Belt
					}
				}
				subtract_from_variable = { NPP_FR_bonus_popularity = 0.2 }
				add_to_variable = { RD_D_bonus_popularity = 0.2 }
				subtract_from_variable = { NPP_popularity = 0.2 }
			}
			every_owned_state = {
				limit = {
					can_have_elections_in_state = yes
					OR = {
						check_variable = { nationality = 82 } #Yankee
						check_variable = { nationality = 86 } #Southwestern
						check_variable = { nationality = 87 } #Rockies
						check_variable = { nationality = 88 } #Pacific
					}
				}
				add_to_variable = { NPP_popularity = 0.2}
				subtract_from_variable = { RD_popularity = 0.2}
			}
			add_popularity = {
				ideology = social_conservative
				popularity = 0.02
			}
			add_popularity = {
				ideology = authoritarian_democrat
				popularity = -0.02
			}
		}
	}
}

USA_LEMAY_LEGACY_OF_WALLACE_SEGREGATION = {
	if = {
		limit = {
		OR = {
		check_variable = { WAL_STATES_RIGHTS = 25 }
		check_variable = { WAL_STATES_RIGHTS = 24 }
		check_variable = { WAL_STATES_RIGHTS = 23 }
		check_variable = { WAL_STATES_RIGHTS = 22 }
		check_variable = { WAL_STATES_RIGHTS = 21 }
		check_variable = { WAL_STATES_RIGHTS = 20 }
		check_variable = { WAL_STATES_RIGHTS = 19 }
		check_variable = { WAL_STATES_RIGHTS = 18 }
		check_variable = { WAL_STATES_RIGHTS = 17 }
		check_variable = { WAL_STATES_RIGHTS = 16 }
		check_variable = { WAL_STATES_RIGHTS = 15 }
		check_variable = { WAL_STATES_RIGHTS = 14 }
		check_variable = { WAL_STATES_RIGHTS = 13 }
		check_variable = { WAL_STATES_RIGHTS = 12 }
			}
		}
		custom_effect_tooltip = LEMAY_USA_segregation_pro_states_rights
		hidden_effect = {
			every_owned_state = {
				limit = {
					can_have_elections_in_state = yes
					OR = {
						check_variable = { nationality = 82 } #Yankee
						check_variable = { nationality = 86 } #Southwestern
						check_variable = { nationality = 87 } #Rockies
						check_variable = { nationality = 88 } #Pacific
					}
				}
				subtract_from_variable = { NPP_C_bonus_popularity = 0.2 }
				add_to_variable = { NPP_L_bonus_popularity = 0.2}
			}
			add_popularity = {
						ideology = communist
						popularity = 0.02
			}
			add_popularity = {
						ideology = social_democrat
						popularity = -0.02
			}
		}
	}

	else_if = {
		limit = {
		OR = {
		check_variable = { WAL_STATES_RIGHTS = 11 }
		check_variable = { WAL_STATES_RIGHTS = 10 }
			}
		}
		custom_effect_tooltip = LEMAY_USA_segregation_pro_states_rights
		hidden_effect = {
		every_owned_state = {
				limit = {
					can_have_elections_in_state = yes
					OR = {
						check_variable = { nationality = 83 } #Dixie
						check_variable = { nationality = 84 } #African American
						check_variable = { nationality = 85 } #Steel Belt
					}
				}
				add_to_variable = { NPP_FR_bonus_popularity = 0.15}
				add_to_variable = { NPP_popularity = 0.1 }
			}
			every_owned_state = {
				limit = {
					can_have_elections_in_state = yes
					OR = {
						check_variable = { nationality = 82 } #Yankee
						check_variable = { nationality = 86 } #Southwestern
						check_variable = { nationality = 87 } #Rockies
						check_variable = { nationality = 88 } #Pacific
					}
				}
				subtract_from_variable = { NPP_C_bonus_popularity = 0.15 }
				add_to_variable = { NPP_L_bonus_popularity = 0.1}
				add_to_variable = { RD_R_bonus_popularity = 0.05}
			}
			add_popularity = {
				ideology = communist
				popularity = 0.015
			}
			add_popularity = {
				ideology = social_liberal
				popularity = 0.005
			}
			add_popularity = {
				ideology = authoritarian_democrat
				popularity = 0.02
			}
		}
	}

	else_if = {
		limit = {
			OR = {
				check_variable = { WAL_STATES_RIGHTS = 9 }
				check_variable = { WAL_STATES_RIGHTS = 8 }
				check_variable = { WAL_STATES_RIGHTS = 7 }
			}
		}
		custom_effect_tooltip = LEMAY_USA_segregation_anti_states_rights
		custom_effect_tooltip = USA_add_NPP_popularity_south
		hidden_effect = {
			every_owned_state = {
				limit = {
					can_have_elections_in_state = yes
					OR = {
						check_variable = { nationality = 83 } #Dixie
						check_variable = { nationality = 84 } #African American
						check_variable = { nationality = 85 } #Steel Belt
					}
				}
				add_to_variable = { NPP_FR_bonus_popularity = 0.1}
				add_to_variable = { NPP_popularity = 0.05 }
			}
			every_owned_state = {
				limit = {
					can_have_elections_in_state = yes
					OR = {
						check_variable = { nationality = 82 } #Yankee
						check_variable = { nationality = 86 } #Southwestern
						check_variable = { nationality = 87 } #Rockies
						check_variable = { nationality = 88 } #Pacific
					}
				}
				subtract_from_variable = { NPP_C_bonus_popularity = 0.1 }
				add_to_variable = { NPP_L_bonus_popularity = 0.05 }
				add_to_variable = { RD_R_bonus_popularity = 0.05}
			}
			add_popularity = {
				ideology = communist
				popularity = 0.01
			}
			add_popularity = {
				ideology = social_liberal
				popularity = 0.01
			}
			add_popularity = {
				ideology = authoritarian_democrat
				popularity = 0.02
			}
		}
	}
	else_if = {
		limit = {
			OR = {
				check_variable = { WAL_STATES_RIGHTS = 6 }
				check_variable = { WAL_STATES_RIGHTS = 5 }
			}
		}
		custom_effect_tooltip = LEMAY_USA_segregation_anti_states_rights
		custom_effect_tooltip = USA_add_NPP_popularity_south
		hidden_effect = {
			every_owned_state = {
				limit = {
					can_have_elections_in_state = yes
					OR = {
						check_variable = { nationality = 83 } #Dixie
						check_variable = { nationality = 84 } #African American
						check_variable = { nationality = 85 } #Steel Belt
					}
				}
				add_to_variable = { NPP_FR_bonus_popularity = 0.1}
				add_to_variable = { NPP_popularity = 0.05 }
			}
			every_owned_state = {
				limit = {
					can_have_elections_in_state = yes
					OR = {
						check_variable = { nationality = 82 } #Yankee
						check_variable = { nationality = 86 } #Southwestern
						check_variable = { nationality = 87 } #Rockies
						check_variable = { nationality = 88 } #Pacific
					}
				}
				subtract_from_variable = { NPP_C_bonus_popularity = 0.15 }
				subtract_from_variable = { NPP_popularity = 0.15 }
				add_to_variable = { NPP_L_bonus_popularity = 0.05}
				add_to_variable = { RD_R_bonus_popularity = 0.1}
			}
			add_popularity = {
				ideology = communist
				popularity = 0.005
			}
			add_popularity = {
				ideology = social_liberal
				popularity = 0.01
			}
			add_popularity = {
				ideology = authoritarian_democrat
				popularity = 0.015
			}
		}
	}
	else_if = {
		limit = {
		OR = {
		check_variable = { WAL_STATES_RIGHTS = 4 }
		check_variable = { WAL_STATES_RIGHTS = 3 }
			}
		}
		custom_effect_tooltip = LEMAY_USA_segregation_anti_states_rights
		custom_effect_tooltip = USA_add_NPP_popularity_south
		hidden_effect = {
		every_owned_state = {
				limit = {
					can_have_elections_in_state = yes
					OR = {
						check_variable = { nationality = 83 } #Dixie
						check_variable = { nationality = 84 } #African American
						check_variable = { nationality = 85 } #Steel Belt
					}
				}
				add_to_variable = { NPP_FR_bonus_popularity = 0.1}
				add_to_variable = { NPP_popularity = 0.05 }
			}
			every_owned_state = {
				limit = {
					can_have_elections_in_state = yes
					OR = {
						check_variable = { nationality = 82 } #Yankee
						check_variable = { nationality = 86 } #Southwestern
						check_variable = { nationality = 87 } #Rockies
						check_variable = { nationality = 88 } #Pacific
					}
				}
				subtract_from_variable = { NPP_C_bonus_popularity = 0.1 }
				subtract_from_variable = { NPP_popularity = 0.1 }
				add_to_variable = { NPP_L_bonus_popularity = 0.05}
				add_to_variable = { RD_R_bonus_popularity = 0.1}
			}
			add_popularity = {
						ideology = communist
						popularity = 0.005
				}
			add_popularity = {
						ideology = social_liberal
						popularity = 0.015
				}
			add_popularity = {
						ideology = authoritarian_democrat
						popularity = 0.01
			}
		}
	}
	else_if = {
		limit = {
			OR = {
				check_variable = { WAL_STATES_RIGHTS = 2 }
				check_variable = { WAL_STATES_RIGHTS = 1 }
				check_variable = { WAL_STATES_RIGHTS = 0 }
			}
		}
		custom_effect_tooltip = LEMAY_USA_segregation_anti_states_rights
		custom_effect_tooltip = USA_add_NPP_popularity_south
		hidden_effect = {
			every_owned_state = {
				limit = {
					can_have_elections_in_state = yes
					OR = {
						check_variable = { nationality = 83 } #Dixie
						check_variable = { nationality = 84 } #African American
						check_variable = { nationality = 85 } #Steel Belt
					}
				}
				add_to_variable = { NPP_FR_bonus_popularity = 0.1}
				add_to_variable = { NPP_popularity = 0.05 }
			}
			every_owned_state = {
				limit = {
					can_have_elections_in_state = yes
					OR = {
						check_variable = { nationality = 82 } #Yankee
						check_variable = { nationality = 86 } #Southwestern
						check_variable = { nationality = 87 } #Rockies
						check_variable = { nationality = 88 } #Pacific
					}
				}
				subtract_from_variable = { NPP_C_bonus_popularity = 0.2 }
				subtract_from_variable = { NPP_popularity = 0.2 }
				add_to_variable = { RD_R_bonus_popularity = 0.2}
			}
			add_popularity = {
				ideology = social_liberal
				popularity = 0.02
				}
			add_popularity = {
				ideology = authoritarian_democrat
				popularity = 0.01
			}
		}
	}
}
#####################################
#  MICHAEL HARRINGTON'S PRESIDENCY  #
#####################################

USA_HAR_fatigue_pulse = {
	clamp_variable = {
		var = USA_HAR_fatigue
		min = 0
		max = 100
	}
	clamp_variable = {
		var = USA_HAR_enthusiasm
		min = 0
		max = 100
	}
}
USA_HAR_fatigue_test = {
	hidden_effect = {
		if = {
			limit = { check_variable = { USA_HAR_fatigue > 79 } }
			if = {
				limit = { check_variable = { USA_HAR_fatigue_event_count < 8 } }
				if = {
					limit = { check_variable = { USA_HAR_fatigue_event_count = 0 } }
					country_event = { id = harrington.31 days = 3 random = 60 }
				}
				else_if = {
					limit = { check_variable = { USA_HAR_fatigue_event_count = 1 } }
					country_event = { id = harrington.32 days = 3 random = 60 }
				}
				else_if = {
					limit = { check_variable = { USA_HAR_fatigue_event_count = 2 } }
					country_event = { id = harrington.33 days = 3 random = 60 }
				}
				else_if = {
					limit = { check_variable = { USA_HAR_fatigue_event_count = 3 } }
					country_event = { id = harrington.34 days = 3 random = 60 }
				}
				else_if = {
					limit = { check_variable = { USA_HAR_fatigue_event_count = 4 } }
					country_event = { id = harrington.35 days = 3 random = 60 }
				}
				else_if = {
					limit = { check_variable = { USA_HAR_fatigue_event_count = 5 } }
					country_event = { id = harrington.36 days = 3 random = 60 }
				}
				else_if = {
					limit = { check_variable = { USA_HAR_fatigue_event_count = 6 } }
					country_event = { id = harrington.37 days = 3 random = 60 }
				}
				else = {
					country_event = { id = harrington.38 days = 3 random = 60 }
				}
				add_to_variable = { USA_HAR_fatigue_event_count = 1 }
				divide_variable = { USA_HAR_fatigue = 2 }
			}
		}
		clamp_variable = {
			var = USA_HAR_fatigue
			min = 0
		}
	}
}

USA_HAR_calculate_enthusiasm = {
	set_variable = { USA_HAR_enthusiasm = 0 }
	clamp_variable = {
		var = USA_HAR_rich_enthusiasm
		min = 0
		max = 100
	}
	clamp_variable = {
		var = USA_HAR_middle_enthusiasm
		min = 0
		max = 100
	}
	clamp_variable = {
		var = USA_HAR_poor_enthusiasm
		min = 0
		max = 100
	}
	clamp_variable = {
		var = USA_HAR_poverty_enthusiasm
		min = 0
		max = 100
	}
	clamp_variable = {
		var = USA_HAR_rich_influence
		min = 0
		max = 100
	}
	clamp_variable = {
		var = USA_HAR_middle_influence
		min = 0
		max = 100
	}
	clamp_variable = {
		var = USA_HAR_poor_influence
		min = 0
		max = 100
	}
	clamp_variable = {
		var = USA_HAR_poverty_influence
		min = 0
		max = 100
	}
	set_temp_variable = { USA_HAR_rich_effect = USA_HAR_rich_enthusiasm }
	multiply_temp_variable = { USA_HAR_rich_effect = USA_HAR_rich_influence }
	add_to_variable = { USA_HAR_enthusiasm = USA_HAR_rich_effect }

	set_temp_variable = { USA_HAR_middle_effect = USA_HAR_middle_enthusiasm }
	multiply_temp_variable = { USA_HAR_middle_effect = USA_HAR_middle_influence }
	add_to_variable = { USA_HAR_enthusiasm = USA_HAR_middle_effect }

	set_temp_variable = { USA_HAR_poor_effect = USA_HAR_poor_enthusiasm }
	multiply_temp_variable = { USA_HAR_poor_effect = USA_HAR_poor_influence }
	add_to_variable = { USA_HAR_enthusiasm = USA_HAR_poor_effect }

	set_temp_variable = { USA_HAR_poverty_effect = USA_HAR_poverty_enthusiasm }
	multiply_temp_variable = { USA_HAR_poverty_effect = USA_HAR_poverty_influence }
	add_to_variable = { USA_HAR_enthusiasm = USA_HAR_poverty_effect }

	divide_variable = { USA_HAR_enthusiasm = 400 }
	round_variable = USA_HAR_enthusiasm
	clamp_variable = {
		var = USA_HAR_enthusiasm
		min = 0
		max = 100
	}

}
USA_HAR_fatigue_hit_1 = {
	set_temp_variable = { USA_HAR_fatigue_cost = 15 }
	USA_HAR_fatigue_hit = yes
}

USA_HAR_fatigue_hit_2 = {
	set_temp_variable = { USA_HAR_fatigue_cost = 30 }
	USA_HAR_fatigue_hit = yes
}

USA_HAR_fatigue_hit_3 = {
	set_temp_variable = { USA_HAR_fatigue_cost = 60 }
	USA_HAR_fatigue_hit = yes
}

USA_HAR_fatigue_hit_4 = {
	set_temp_variable = { USA_HAR_fatigue_cost = 90 }
	USA_HAR_fatigue_hit = yes
}

USA_HAR_fatigue_hit_5 = {
	set_temp_variable = { USA_HAR_fatigue_cost = 150 }
	USA_HAR_fatigue_hit = yes
}

USA_HAR_lower_fatigue = {
	custom_effect_tooltip = USA_HAR_reduce_fatigue
	set_temp_variable = { USA_HAR_fatigue_reduction = USA_HAR_fatigue }
	divide_temp_variable = { USA_HAR_fatigue_reduction = 4 }
	subtract_from_variable = { USA_HAR_fatigue = USA_HAR_fatigue_reduction }
}

USA_HAR_fatigue_hit = {
	USA_HAR_calculate_enthusiasm = yes
	set_temp_variable = { USA_HAR_fatigue_modifier = 105 }
	subtract_from_temp_variable = { USA_HAR_fatigue_modifier = USA_HAR_enthusiasm }
	divide_temp_variable = { USA_HAR_fatigue_modifier = 100 }
	multiply_temp_variable = { USA_HAR_fatigue_cost = USA_HAR_fatigue_modifier }
	add_to_variable = { USA_HAR_fatigue = USA_HAR_fatigue_cost}
	USA_HAR_fatigue_test = yes
}

USA_HAR_fading_enthusiaism = {
	set_temp_variable = { USA_HAR_fatigue_modifier = USA_HAR_fatigue }
	divide_temp_variable = { USA_HAR_fatigue_modifier = 50 } #This deteremines how much of your potential loss you will actually suffer

	set_temp_variable = { USA_HAR_rich_decay = USA_HAR_rich_enthusiasm }
	set_temp_variable = { USA_HAR_middle_decay = USA_HAR_middle_enthusiasm }
	set_temp_variable = { USA_HAR_poor_decay = USA_HAR_poor_enthusiasm }

	if = { #People Harrington can more effectively retain support
		limit = { has_country_flag = USA_HAR_Close_To_The_People }
		divide_temp_variable = { USA_HAR_rich_decay = 7.5 }
		divide_temp_variable = { USA_HAR_middle_decay = 15 }
		divide_temp_variable = { USA_HAR_poor_decay = 16 }
	}
	else = {
		divide_temp_variable = { USA_HAR_rich_decay = 5 }
		divide_temp_variable = { USA_HAR_middle_decay = 10 }
		divide_temp_variable = { USA_HAR_poor_decay = 12.5 }
	}

	multiply_temp_variable = { USA_HAR_rich_decay = USA_HAR_fatigue_modifier }
	subtract_from_variable = { USA_HAR_rich_enthusiasm = USA_HAR_rich_decay }
	round_variable = USA_HAR_rich_enthusiasm

	multiply_temp_variable = { USA_HAR_middle_decay = USA_HAR_fatigue_modifier }
	subtract_from_variable = { USA_HAR_middle_enthusiasm = USA_HAR_middle_decay }
	round_variable = USA_HAR_middle_enthusiasm

	multiply_temp_variable = { USA_HAR_poor_decay = USA_HAR_fatigue_modifier }
	subtract_from_variable = { USA_HAR_poor_enthusiasm = USA_HAR_poor_decay }
	round_variable = USA_HAR_poor_enthusiasm

	#The poorest don't really have any options so their enthusiaism never decays

	USA_HAR_calculate_enthusiasm = yes
}

###########################
#  Goldwater Presidencey  #
###########################

USA_GLD_Reganomics_Popularity_Effect = {
	
	#Conservatives like conservatism
	every_owned_state = {
		limit = {
			can_have_elections_in_state = yes
			OR = {
				check_variable = { nationality = 83 } #Dixie
				check_variable = { nationality = 84 } #African America
				check_variable = { nationality = 86 } #Southwestern
				check_variable = { nationality = 87 } #Rockies
				state = 951 #New Hampshire
				state = 952 #Maine
			}	
		}	
		add_to_variable = { RD_popularity = 0.025 }
		subtract_from_variable = { RD_R_bonus_popularity = 0.05 }
		US_underdog_NPP_2_2 = yes
	}
	
	#Liberals like liberalism
	if = {
		limit = { has_country_flag = GLD68_went_wit_regan }
	every_owned_state = {
		limit = {
			can_have_elections_in_state = yes
			OR = {
				check_variable = { nationality = 82 } #Yankee
				check_variable = { nationality = 85 } #Steel Belt
				check_variable = { nationality = 88 } #Pacific
				AND = {
					NOT = { state = 951 } #New Hampshire 
					check_variable = { nationality = 82 } #Yankee
					check_variable = { nationality = 85 } #Steel Belt
					check_variable = { nationality = 88 } #Pacific
				}
				AND = {
					NOT = { state = 952 } #Maine
					check_variable = { nationality = 82 } #Yankee
					check_variable = { nationality = 85 } #Steel Belt
					check_variable = { nationality = 88 } #Pacific
				}
			}	
		}	
		add_to_variable = { NPP_popularity = 0.025 }
		add_to_variable = { NPP_C_bonus_popularity = 0.05 }
		US_underdog_RD_2_2 = yes
		}
	}
	
	if = {
		limit = { has_country_flag = GLD68_toned_it_down }
	every_owned_state = {
		limit = {
			can_have_elections_in_state = yes
			OR = {
				check_variable = { nationality = 82 } #Yankee
				check_variable = { nationality = 85 } #Steel Belt
				AND = {
					NOT = { state = 951 } #New Hampshire 
					check_variable = { nationality = 82 } #Yankee
					check_variable = { nationality = 85 } #Steel Belt
					check_variable = { nationality = 88 } #Pacific
				}
				AND = {
					NOT = { state = 952 } #Maine
					check_variable = { nationality = 82 } #Yankee
					check_variable = { nationality = 85 } #Steel Belt
					check_variable = { nationality = 88 } #Pacific
				}
			}	
		}	
		add_to_variable = { NPP_popularity = 0.01 }
		add_to_variable = { NPP_C_bonus_popularity = 0.1 }
		US_underdog_RD_2_2 = yes
		}
	}
	
	if = {
		limit = { has_country_flag = USA_THURMOND_FR_NPP_Past }
		every_owned_state = { #The NPP is unifying around Hall
			limit = {
				can_have_elections_in_state = yes
				OR = {
					check_variable = { NPP_L_bonus_popularity = 0.05 }
					check_variable = { nationality = 82 } #Yankee
						}
					}
				subtract_from_variable = { NPP_C_bonus_popularity = 0.1 }
				add_to_variable = { NPP_L_bonus_popularity = 0.1 }
				US_underdog_RD_2_2 = yes
				#Total NPPL Boost of 0.1
		}
	}
	
	every_owned_state = { #LNPP is more LNPP
		limit = {
			can_have_elections_in_state = yes
			check_variable = { NPP_L_bonus_popularity > NPP_C_bonus_popularity } 
			check_variable = { NPP_L_bonus_popularity > NPP_FR_bonus_popularity } 
		}
		subtract_from_variable = { NPP_C_bonus_popularity = 0.1 }
		add_to_variable = { NPP_L_bonus_popularity = 0.1 }
		#Total NPPL Boost of 0.1
	}
}

USA_GLD_Bennett_Popularity_Effect = {
	
	#Conservatives like conservatism
	every_owned_state = {
		limit = {
			can_have_elections_in_state = yes
			OR = {
				check_variable = { nationality = 85 } #Steel Belt
				check_variable = { nationality = 88 } #Pacific
				state = 951 #New Hampshire
				state = 952 #Maine
			}	
		}	
		add_to_variable = { RD_popularity = 0.1 }
		add_to_variable = { RD_D_bonus_popularity = 0.1 }
	}
	
	#Dixiecrats like dixiecratism
	every_owned_state = {
		limit = {
			can_have_elections_in_state = yes
			OR = {
				check_variable = { nationality = 83 } #Dixie
				check_variable = { nationality = 84 } #African American
			}	
		}	
		add_to_variable = { NPP_popularity = 0.1 }
		add_to_variable = { NPP_FR_bonus_popularity = 0.1 }
	}
	#Conservatives dislike conservatism
	every_owned_state = {
		limit = {
			can_have_elections_in_state = yes
			check_variable = { nationality = 86 } #Southwestern	
		}	
		add_to_variable = { NPP_popularity = 0.05 }
		add_to_variable = { NPP_FR_bonus_popularity = 0.1 }
	}
}

USA_GLD_discovery_check = {

	set_variable = { GLD_union_busting_discovery_risk_progress_max = GLD_union_busting_discovery_risk_progress_base_max }

	set_temp_variable = { GLD_union_busting_expenses_temp = GLD_union_busting_expenses }
	divide_temp_variable = { GLD_union_busting_expenses_temp = 2.5 }
	add_to_variable = { GLD_union_busting_discovery_risk_progress_max = GLD_union_busting_expenses_temp }
	
	set_temp_variable = { GLD_AFL_strength_temp = GLD_AFL_strength }
	multiply_temp_variable = { GLD_AFL_strength_temp = -1 }
	
	add_to_variable = { GLD_union_busting_discovery_risk_progress = GLD_union_busting_discovery_risk_progress_other }
	
	add_to_variable = { GLD_union_busting_discovery_risk_progress_max = GLD_AFL_strength_temp }
	
	add_to_variable = { GLD_union_busting_discovery_risk_progress = GLD_AFL_strength }
	add_to_variable = { GLD_union_busting_discovery_risk_progress = GLD_shady_stuff }
	
	hidden_effect = {
		if = {
			limit = { 
				check_variable = { GLD_union_busting_discovery_risk_progress > GLD_union_busting_discovery_risk_progress_max }
				}
		country_event = { id = GLD.union.107 }
		set_country_flag = GLD_union_busting_over
		}
	}
	
}
USA_GLD_discovery_recalc = {

	set_variable = { GLD_union_busting_discovery_risk_progress_max = GLD_union_busting_discovery_risk_progress_base_max }

	set_temp_variable = { GLD_union_busting_expenses_temp = GLD_union_busting_expenses }
	divide_temp_variable = { GLD_union_busting_expenses_temp = 2.5 }
	add_to_variable = { GLD_union_busting_discovery_risk_progress_max = GLD_union_busting_expenses_temp }
	
}

USA_GLD_discovery_backlash = {
	if = {
		limit = { has_idea = GLD68_war_against_the_afl }
		remove_ideas = GLD68_war_against_the_afl
	}
	if = {
		limit = { has_idea = GLD68_anti_corruption_crusade }
		remove_ideas = GLD68_anti_corruption_crusade
	}
	else_if = {
		limit = { has_idea = GLD68_anti_corruption_crusade_2 }
		remove_ideas = GLD68_anti_corruption_crusade_2
	}
	if = {
		limit = { #Goldwater hasn't been too bad of a boy and so only the north suffers noticable loses
			check_variable = { GLD_shady_stuff < 3 }
		}
		custom_effect_tooltip = USA_subtract_RD_unity
		add_to_variable = { USA_unity = -1 }
		custom_effect_tooltip = USA_subtract_societal_unity
		hidden_effect = {
			subtract_from_variable = { USA_RD_Unity = 1 }
			every_owned_state = { #North is angry
				limit = {
					can_have_elections_in_state = yes
					OR = {
						check_variable = { nationality = 82 } #Yankee
						check_variable = { nationality = 85 } #Steel Belt
						check_variable = { nationality = 88 } #Pacific
					}
				}
				set_temp_variable = { popularity_bonus = 0.08 }
				subtract_from_variable = { RD_D_bonus_popularity = popularity_bonus } #Democrats discredited
				subtract_from_variable = { RD_R_bonus_popularity = popularity_bonus } #Republicans discredited
				subtract_from_temp_variable = { popularity_bonus = 0.02 } #Adjust
				subtract_from_variable = { RD_popularity = popularity_bonus } #RDs loose face
				add_to_variable = { NPP_popularity = popularity_bonus } #NPP gains
				subtract_from_temp_variable = { popularity_bonus = 0.02 }
				add_to_variable = { NPP_C_bonus_popularity = popularity_bonus }
				subtract_from_temp_variable = { popularity_bonus = 0.01 }
				add_to_variable = { NPP_L_bonus_popularity = popularity_bonus }
			}
			every_owned_state = { #Rest of the country goes meh
				limit = {
					can_have_elections_in_state = yes
					NOT = {
						OR = {
							check_variable = { nationality = 82 } #Yankee
							check_variable = { nationality = 85 } #Steel Belt
							check_variable = { nationality = 88 } #Pacific
						}
					}
				}
				set_temp_variable = { popularity_bonus = 0.04 }
				subtract_from_variable = { RD_D_bonus_popularity = popularity_bonus } #Democrats discredited
				subtract_from_variable = { RD_R_bonus_popularity = popularity_bonus } #Republicans discredited
				subtract_from_temp_variable = { popularity_bonus = 0.01 } #Adjust
				subtract_from_variable = { RD_popularity = popularity_bonus } #RDs loose face
				add_to_variable = { NPP_popularity = popularity_bonus } #NPP gains
				subtract_from_temp_variable = { popularity_bonus = 0.01 }
				add_to_variable = { NPP_C_bonus_popularity = popularity_bonus }
				add_to_variable = { NPP_L_bonus_popularity = popularity_bonus }
			}
		}
	}
	else_if = {
		limit = { #Goldwater has done some pretty reprehensible stuff major loss of support in the North and noticable blows elsewhere.
			AND = {
				check_variable = { GLD_shady_stuff > 2 }
				check_variable = { GLD_shady_stuff < 7 }
			}
		}
		custom_effect_tooltip = USA_subtract_RD_unity
		add_to_variable = { USA_unity = -1 }
		custom_effect_tooltip = USA_subtract_societal_unity
		hidden_effect = {
			subtract_from_variable = { USA_RD_Unity = 2 }
			every_owned_state = { #North is angry
				limit = {
					can_have_elections_in_state = yes
					OR = {
						check_variable = { nationality = 82 } #Yankee
						check_variable = { nationality = 85 } #Steel Belt
						check_variable = { nationality = 88 } #Pacific
					}
				}
				set_temp_variable = { popularity_bonus = 0.14 }
				subtract_from_variable = { RD_D_bonus_popularity = popularity_bonus } #Democrats discredited
				subtract_from_variable = { RD_R_bonus_popularity = popularity_bonus } #Republicans discredited
				subtract_from_temp_variable = { popularity_bonus = 0.03 } #Adjust
				subtract_from_variable = { RD_popularity = popularity_bonus } #RDs loose face
				add_to_variable = { NPP_popularity = popularity_bonus } #NPP gains
				subtract_from_temp_variable = { popularity_bonus = 0.04 }
				add_to_variable = { NPP_C_bonus_popularity = popularity_bonus }
				subtract_from_temp_variable = { popularity_bonus = 0.05 }
				add_to_variable = { NPP_L_bonus_popularity = popularity_bonus }
			}
			every_owned_state = { #Rest of the country is less mad
				limit = {
					can_have_elections_in_state = yes
					NOT = {
						OR = {
							check_variable = { nationality = 82 } #Yankee
							check_variable = { nationality = 85 } #Steel Belt
							check_variable = { nationality = 88 } #Pacific
						}
					}
				}
				set_temp_variable = { popularity_bonus = 0.11 }
				subtract_from_variable = { RD_D_bonus_popularity = popularity_bonus } #Democrats discredited
				subtract_from_variable = { RD_R_bonus_popularity = popularity_bonus } #Republicans discredited
				subtract_from_temp_variable = { popularity_bonus = 0.03 } #Adjust
				subtract_from_variable = { RD_popularity = popularity_bonus } #RDs loose face
				add_to_variable = { NPP_popularity = popularity_bonus } #NPP gains
				subtract_from_temp_variable = { popularity_bonus = 0.03 }
				add_to_variable = { NPP_FR_bonus_popularity = popularity_bonus } #Look we are the true conservatives here
				subtract_from_temp_variable = { popularity_bonus = 0.01 }
				add_to_variable = { NPP_Y_bonus_popularity = popularity_bonus } #Small Yockeyite gains amidst the general chaos
			}
		}
	}
	else_if = {
		limit = { #Major crisis. RDs suffer severe blows everywhere, the North is pretty much a lost cause and things aren't much better elsewhere.
			AND = {
				check_variable = { GLD_shady_stuff > 6 }
				check_variable = { GLD_shady_stuff < 10 }
			}
		}
		custom_effect_tooltip = USA_subtract_RD_unity
		add_to_variable = { USA_unity = -1 }
		custom_effect_tooltip = USA_subtract_societal_unity
		hidden_effect = {
			subtract_from_variable = { USA_RD_Unity = 3 }
			every_owned_state = { #North is angry
				limit = {
					can_have_elections_in_state = yes
					OR = {
						check_variable = { nationality = 82 } #Yankee
						check_variable = { nationality = 85 } #Steel Belt
						check_variable = { nationality = 88 } #Pacific
					}
				}
				set_temp_variable = { popularity_bonus = 0.21 }
				subtract_from_variable = { RD_D_bonus_popularity = popularity_bonus } #Democrats discredited
				subtract_from_variable = { RD_R_bonus_popularity = popularity_bonus } #Republicans discredited
				subtract_from_temp_variable = { popularity_bonus = 0.1 } #Adjust
				subtract_from_variable = { RD_popularity = popularity_bonus } #RDs loose face
				add_to_variable = { NPP_popularity = popularity_bonus } #NPP gains
				add_to_variable = { NPP_L_bonus_popularity = popularity_bonus } #NPP-L pulls ahead
				subtract_from_temp_variable = { popularity_bonus = 0.05 }
				add_to_variable = { NPP_C_bonus_popularity = popularity_bonus }
			}
			every_owned_state = { #Rest of the country is less mad
				limit = {
					can_have_elections_in_state = yes
					NOT = {
						OR = {
							check_variable = { nationality = 82 } #Yankee
							check_variable = { nationality = 85 } #Steel Belt
							check_variable = { nationality = 88 } #Pacific
						}
					}
				}
				set_temp_variable = { popularity_bonus = 0.16 }
				subtract_from_variable = { RD_D_bonus_popularity = popularity_bonus } #Democrats discredited
				subtract_from_variable = { RD_R_bonus_popularity = popularity_bonus } #Republicans discredited
				subtract_from_temp_variable = { popularity_bonus = 0.06 } #Adjust
				subtract_from_variable = { RD_popularity = popularity_bonus } #RDs loose face
				add_to_variable = { NPP_popularity = popularity_bonus } #NPP gains
				subtract_from_temp_variable = { popularity_bonus = 0.03 }
				add_to_variable = { NPP_FR_bonus_popularity = popularity_bonus } #Look we are the true conservatives here
				subtract_from_temp_variable = { popularity_bonus = 0.01 }
				add_to_variable = { NPP_Y_bonus_popularity = popularity_bonus } #Small Yockeyite gains amidst the general chaos
			}
		}
	}
	else_if = {
		limit = { #You could have just done a repeat of watergate you know. It probably would have hurt you less
			check_variable = { GLD_shady_stuff > 9 }
		}
		custom_effect_tooltip = USA_subtract_RD_unity
		add_to_variable = { USA_unity = -2 }
		custom_effect_tooltip = USA_subtract_societal_unity_large
		hidden_effect = {
			subtract_from_variable = { USA_RD_Unity = 4 }
			every_owned_state = { #North is angry
				limit = {
					can_have_elections_in_state = yes
					OR = {
						check_variable = { nationality = 82 } #Yankee
						check_variable = { nationality = 85 } #Steel Belt
						check_variable = { nationality = 88 } #Pacific
					}
				}
				set_temp_variable = { popularity_bonus = 0.27 }
				subtract_from_variable = { RD_D_bonus_popularity = popularity_bonus } #Democrats discredited
				subtract_from_variable = { RD_R_bonus_popularity = popularity_bonus } #Republicans discredited
				subtract_from_temp_variable = { popularity_bonus = 0.04 } #Adjust
				subtract_from_variable = { RD_popularity = popularity_bonus } #RDs loose face
				add_to_variable = { NPP_popularity = popularity_bonus } #NPP gains
				subtract_from_temp_variable = { popularity_bonus = 0.03 }
				add_to_variable = { NPP_L_bonus_popularity = popularity_bonus } #NPP-L are the main ones who benefit
				subtract_from_temp_variable = { popularity_bonus = 0.14 } #NPP-C make some small gains
				add_to_variable = { NPP_C_bonus_popularity = popularity_bonus }
			}
			every_owned_state = { #Rest of the country is less mad
				limit = {
					can_have_elections_in_state = yes
					NOT = {
						OR = {
							check_variable = { nationality = 82 } #Yankee
							check_variable = { nationality = 85 } #Steel Belt
							check_variable = { nationality = 88 } #Pacific
						}
					}
				}
				set_temp_variable = { popularity_bonus = 0.21 }
				subtract_from_variable = { RD_D_bonus_popularity = popularity_bonus } #Democrats discredited
				subtract_from_variable = { RD_R_bonus_popularity = popularity_bonus } #Republicans discredited
				subtract_from_temp_variable = { popularity_bonus = 0.06 } #Adjust
				subtract_from_variable = { RD_popularity = popularity_bonus } #RDs loose face
				add_to_variable = { NPP_popularity = popularity_bonus } #NPP gains
				subtract_from_temp_variable = { popularity_bonus = 0.04 }
				add_to_variable = { NPP_FR_bonus_popularity = popularity_bonus } #Look we are the true conservatives here
				subtract_from_temp_variable = { popularity_bonus = 0.02 }
				add_to_variable = { NPP_Y_bonus_popularity = popularity_bonus } #Small Yockeyite gains amidst the general chaos
			}
		}
	}
	US_pie_adjustment_effect = yes
}

#####################################
#  LBJ RESPONSE TREE EFFECTS  # started by BT09, delete name later
#####################################

###almost 100% a copy of RFK's Republican Goodwill stuff for tracking NPP_FR support
USA_NPP_FR_Response_Vote_Count = {

if = {
	limit = {
	check_variable = {
	var = USA_NPP_FR_Response_Vote_Count
	value = 10
	compare = greater_than
		}
	}
	set_variable = { USA_NPP_FR_Response_Vote_Count = 10 }
	set_temp_variable = { NPP_FR_temp_votes = NPP_FR_senators}
	divide_variable = { USA_NPP_FR_Response_Vote_Count  = 10 }
	multiply_temp_variable = { NPP_FR_temp_votes = USA_NPP_FR_Response_Vote_Count }
	round_variable = NPP_FR_temp_votes
	add_to_variable = {temporary_congress_votes = NPP_FR_temp_votes}
	round_variable = temporary_congress_votes
	}

else_if = {
	limit = {
	check_variable = {
	var = USA_NPP_FR_Response_Vote_Count
	value = 0
	compare = greater_than_or_equals
		}
		check_variable = {
		var = USA_NPP_FR_Response_Vote_Count
		value = 10
		compare = less_than_or_equals
			}
	}
	set_temp_variable = { NPP_FR_temp_votes = NPP_FR_senators}
	divide_variable = { USA_NPP_FR_Response_Vote_Count = 10 }
	multiply_temp_variable = { NPP_FR_temp_votes = USA_NPP_FR_Response_Vote_Count }
	add_to_variable = {temporary_congress_votes = NPP_FR_temp_votes }
	round_variable = temporary_congress_votes
	}

else_if = {
	limit = {
	check_variable = {
	var = USA_NPP_FR_Response_Vote_Count
	value = 0
	compare = less_than
		}
	}
	set_variable = { USA_NPP_FR_Response_Vote_Count = 1 }
	set_temp_variable = { NPP_FR_temp_votes = NPP_FR_senators}
	divide_variable = { USA_NPP_FR_Response_Vote_Count = 10 }
	multiply_temp_variable = { NPP_FR_temp_votes = USA_NPP_FR_Response_Vote_Count }
	round_variable = NPP_FR_temp_votes
	add_to_variable = {temporary_congress_votes = NPP_FR_temp_votes}
	round_variable = temporary_congress_votes
	}
}


#####################################
#  WALLLACE RESPONSE TREE EFFECTS  #
#####################################

USA_WAL_response_pass_civil_rights = { #Effect for passing CRA after a Wallace presidency. Effects based on the RFK version 3 of the CRA, effect does not account for NPP_FR passing the act since they have their own tree dealing with this

		### Change Military Integration
		tno_racial_integration_improve = yes

		### Change Minority Rights
		if = {
			limit = { NOT = { has_idea = tno_minorities_equal_rights } }
			tno_minorities_improve = yes
			}

		### Regular Effects:

		add_stability = 0.05
		if = {
			limit = { USA = { has_country_flag = USA_68_D_RD } } #Democrats become more prominent in the party while the Far Right wanes
			add_popularity = {
				ideology = social_conservative
				popularity = 0.05
			}

			add_popularity = {
				ideology = authoritarian_democrat
				popularity = -0.02
			}

			add_popularity = {
				ideology = social_liberal
				popularity = -0.03
			}
		}
		else_if = {
			limit = { USA = { has_country_flag = USA_68_R_RD } }#Republicans get the popularity boost instead
			add_popularity = {
				ideology = social_liberal
				popularity = 0.05
			}

			add_popularity = {
				ideology = authoritarian_democrat
				popularity = -0.02
			}

			add_popularity = {
				ideology = social_conservative
				popularity = -0.03
			}
		}
		else_if = {
			limit = { USA = { has_country_flag = USA_68_C_NPP } } #NPP Center makes a comeback at the expanse of the far right and the democrats
			add_popularity = {
				ideology = social_democrat
				popularity = 0.05
			}

			add_popularity = {
				ideology = authoritarian_democrat
				popularity = -0.03
			}

			add_popularity = {
				ideology = social_conservative
				popularity = -0.02
			}
		}
		hidden_effect = { #Less clutter in the effects description
			### Goodbye South! Hello African Americans!

			every_owned_state = { #Dixies
				limit = {
						check_variable = { nationality = 83 }
				}
				set_temp_variable = { popularity_bonus = 0.13 }
				if = {
					limit = { USA = { has_country_flag = USA_68_D_RD } }
					subtract_from_variable = {RD_D_bonus_popularity = popularity_bonus }
					add_to_variable = { NPP_popularity = 0.1 }
					add_to_variable = { NPP_Y_bonus_popularity = 0.1 }
				}
				else_if = {
					limit = { USA = { has_country_flag = USA_68_R_RD } }
					subtract_from_variable = {RD_R_bonus_popularity = popularity_bonus }
					add_to_variable = { NPP_popularity = 0.1 }
					add_to_variable = { NPP_Y_bonus_popularity = 0.1 }
				}
				else_if = {
					limit = { USA = { has_country_flag = USA_68_C_NPP } }
					subtract_from_variable = {NPP_C_bonus_popularity = popularity_bonus }
					add_to_variable = { NPP_popularity = 0.1 }
					add_to_variable = { NPP_Y_bonus_popularity = 0.1 }
				}
				add_to_variable = { NPP_FR_bonus_popularity = popularity_bonus }
			}

			every_owned_state = { #African Americans
				limit = {
						check_variable = { nationality = 84 }
				}
				set_temp_variable = { popularity_bonus = 0.07 }
				if = {
					limit = { USA = { has_country_flag = USA_68_D_RD } }
					subtract_from_variable = {RD_D_bonus_popularity = popularity_bonus }
					add_to_variable = { NPP_popularity = 0.05}
					add_to_variable = { NPP_Y_bonus_popularity = 0.05 }
				}
				else_if = {
					limit = { USA = { has_country_flag = USA_68_R_RD } }
					subtract_from_variable = {RD_R_bonus_popularity = popularity_bonus }
					add_to_variable = { NPP_popularity = 0.05}
					add_to_variable = { NPP_Y_bonus_popularity = 0.05 }
				}
				else_if = {
					limit = { USA = { has_country_flag = USA_68_C_NPP } }
					subtract_from_variable = {NPP_C_bonus_popularity = popularity_bonus }
					add_to_variable = { NPP_popularity = 0.05}
					add_to_variable = { NPP_Y_bonus_popularity = 0.05 }
				}
				add_to_variable = { NPP_FR_bonus_popularity = popularity_bonus }
			}

			### The North Approves too, but a little less so

			every_owned_state = { #Yankees
				limit = {
						check_variable = { nationality = 82 }
				}
				set_temp_variable = { popularity_bonus = 0.13 }
				if = {
					limit = { USA = { has_country_flag = USA_68_D_RD } }
					add_to_variable = { RD_D_bonus_popularity = popularity_bonus }
					add_to_variable = { RD_popularity = popularity_bonus }
					subtract_from_variable = { NPP_popularity = popularity_bonus }
				}
				else_if = {
					limit = { USA = { has_country_flag = USA_68_R_RD } }
					add_to_variable = { RD_R_bonus_popularity = popularity_bonus }
					add_to_variable = { RD_popularity = popularity_bonus }
					subtract_from_variable = { NPP_popularity = popularity_bonus }
				}
				else_if = {
					limit = { USA = { has_country_flag = USA_68_C_NPP } }
					add_to_variable = { NPP_C_bonus_popularity = popularity_bonus }
					add_to_variable = { NPP_popularity = popularity_bonus }
					subtract_from_variable = { RD_popularity = popularity_bonus }
				}
			}

			### The Midwest says cool

			every_owned_state = { #Midwesterners
				limit = {
						check_variable = { nationality = 85 }
				}
				set_temp_variable = { popularity_bonus = 0.13 }
				if = {
					limit = { USA= { has_country_flag = USA_68_D_RDD } }
					add_to_variable = { RD_D_bonus_popularity = popularity_bonus }
					add_to_variable = { RD_popularity = popularity_bonus }
					subtract_from_variable = { NPP_popularity = popularity_bonus }
				}
				else_if = {
					limit = { USA = { has_country_flag = USA_68_R_RDD } }
					add_to_variable = { RD_R_bonus_popularity = popularity_bonus }
					add_to_variable = { RD_popularity = popularity_bonus }
					subtract_from_variable = { NPP_popularity = popularity_bonus }
				}
				else_if = {
					limit = { USA = { has_country_flag = USA_68_C_NPP } }
					add_to_variable = { NPP_C_bonus_popularity = popularity_bonus }
					add_to_variable = { NPP_popularity = popularity_bonus }
					subtract_from_variable = { RD_popularity = popularity_bonus }
				}
			}

			# The Southwest and Rockies Get indifferent but a little less annoyed

			every_owned_state = { #Southwestern
				limit = {
						check_variable = { nationality = 86 }
				}
				set_temp_variable = { popularity_bonus = 0.07 }
				if = {
					limit = { USA = { has_country_flag = USA_68_D_RDD } }
					subtract_from_variable = { RD_D_bonus_popularity = popularity_bonus }
					subtract_from_variable = { RD_popularity = popularity_bonus }
					add_to_variable = { NPP_popularity = popularity_bonus }
				}
				else_if = {
					limit = { USA = { has_country_flag = USA_68_R_RDD } }
					subtract_from_variable = { RD_R_bonus_popularity = popularity_bonus }
					subtract_from_variable = { RD_popularity = popularity_bonus }
					add_to_variable = { NPP_popularity = popularity_bonus }
				}
				else_if = {
					limit = { USA = { has_country_flag = USA_68_C_NPP } }
					subtract_from_variable = { NPP_C_bonus_popularity = popularity_bonus }
					subtract_from_variable = { NPP_popularity = popularity_bonus }
					add_to_variable = { RD_popularity = popularity_bonus }
				}
			}

			every_owned_state = { #Rockies
				limit = {
						check_variable = { nationality = 87 }
				}
				set_temp_variable = { popularity_bonus = 0.06 }
				if = {
					limit = { USA = { has_country_flag = USA_68_D_RDD } }
					subtract_from_variable = { RD_D_bonus_popularity = popularity_bonus }
					subtract_from_variable = { RD_popularity = popularity_bonus }
					add_to_variable = { NPP_popularity = popularity_bonus }
				}
				else_if = {
					limit = { USA = { has_country_flag = USA_68_R_RDD } }
					subtract_from_variable = { RD_R_bonus_popularity = popularity_bonus }
					subtract_from_variable = { RD_popularity = popularity_bonus }
					add_to_variable = { NPP_popularity = popularity_bonus }
				}
				else_if = {
					limit = { USA = { has_country_flag = USA_68_C_NPP } }
					subtract_from_variable = { NPP_C_bonus_popularity = popularity_bonus }
					subtract_from_variable = { NPP_popularity = popularity_bonus }
					add_to_variable = { RD_popularity = popularity_bonus }
				}
			}
		}
}
USA_WAL_response_veto_civil_rights = { #Effects for vetoeing the civil rights act after a Wallace presidency. Effect based on the Nixon veto. If you do this you are a bad person
	hidden_effect = {
		every_owned_state = {
			limit = {
				can_have_elections_in_state = yes
				OR = {
					check_variable = { nationality = 82 } #Yankee
					check_variable = { nationality = 85 } #Steel Belt
					check_variable = { nationality = 88 } #Pacific
				}
			}
			set_temp_variable = { popularity_bonus = 0.5 }
			if = { #Give a bigger bonus to Yankee states
				limit = { check_variable = { nationality = 82 } }
				multiply_temp_variable = { popularity_bonus = 0.8 }
				add_to_variable = { NPP_C_bonus_popularity = popularity_bonus }
				multiply_temp_variable = { popularity_bonus = 0.1 }
				add_to_variable = { NPP_L_bonus_popularity = popularity_bonus }
			}
			else = {
				multiply_temp_variable = { popularity_bonus = 0.9 }
				add_to_variable = { NPP_C_bonus_popularity = popularity_bonus }
				multiply_temp_variable = { popularity_bonus = 0.1 }
				add_to_variable = { NPP_L_bonus_popularity = popularity_bonus }
			}
		}
		#Progressive wing of your party suffers major blows in the south
		every_owned_state = {
			limit = {
				can_have_elections_in_state = yes
				OR = {
					check_variable = { nationality = 83 } #Dixie
					check_variable = { nationality = 84 } #African-American
					check_variable = { nationality = 86 } #Southwestern
				}
			}
			set_temp_variable = { popularity_bonus = 0.25 }
			if = { #Bigger hit in Dixie states
				limit = { check_variable = { nationality = 83 } }
				multiply_temp_variable = { popularity_bonus = 0.3 }
				subtract_from_variable = { RD_R_bonus_popularity = popularity_bonus }
				multiply_temp_variable = { popularity_bonus = 0.1 }
				subtract_from_variable = { NPP_L_bonus_popularity = popularity_bonus }
			}
			else = {
				multiply_temp_variable = { popularity_bonus = 0.1 }
				subtract_from_variable = { RD_R_bonus_popularity = popularity_bonus }
				multiply_temp_variable = { popularity_bonus = 0.1 }
				subtract_from_variable = { NPP_L_bonus_popularity = popularity_bonus }
			}
		}
		every_owned_state = { #The Republicans are weaker everywhere, which the Democrats make up for
			limit = { can_have_elections_in_state = yes }
			set_temp_variable = { popularity_bonus = 0.05 }

			add_to_variable = { RD_D_bonus_popularity = popularity_bonus }
			subtract_from_variable = { RD_R_bonus_popularity = popularity_bonus }
		}
		every_owned_state = { #NPP-C attracts prevcious Republican voters
			limit = {
				can_have_elections_in_state = yes
				OR = {
					check_variable = { nationality = 82 } #Yankee
					check_variable = { nationality = 85 } #Steel Belt
					check_variable = { nationality = 88 } #Pacific
				}
			}
			set_temp_variable = { popularity_bonus = 0.25 }
			if = { #Give a bigger bonus to Yankee states
				limit = { check_variable = { nationality = 83 } }
				multiply_temp_variable = { popularity_bonus = 0.6 }
				add_to_variable = { NPP_C_bonus_popularity = popularity_bonus }
				multiply_temp_variable = { popularity_bonus = 0.1 }
				add_to_variable = { NPP_L_bonus_popularity = popularity_bonus }
			}
			else = {
				multiply_temp_variable = { popularity_bonus = 0.4 }
				add_to_variable = { NPP_C_bonus_popularity = popularity_bonus }
				multiply_temp_variable = { popularity_bonus = 0.1 }
				add_to_variable = { NPP_L_bonus_popularity = popularity_bonus }
			}
		}
		every_owned_state = {
			limit = {
				can_have_elections_in_state = yes
			}
			set_temp_variable = { popularity_bonus = 0.1 }
			add_to_variable = { NPP_popularity = popularity_bonus }
			subtract_from_variable = { RD_popularity = popularity_bonus }
		}
		every_owned_state = {
			limit = {
				can_have_elections_in_state = yes
			}
			set_temp_variable = { popularity_bonus = 0.3 }
			add_to_variable = { NPP_C_bonus_popularity = popularity_bonus }
		}
		396 = { # Indiana
			add_to_variable = { NPP_popularity = 0.5 }
			subtract_from_variable = { RD_popularity = 0.5 }
		}
		393 = { # Michigan
			add_to_variable = { NPP_popularity = 0.5 }
			subtract_from_variable = { RD_popularity = 0.5 }
		}
		391 = { # Minnesota
			add_to_variable = { NPP_popularity = 0.5 }
			subtract_from_variable = { RD_popularity = 0.5 }
		}
		388 = { # Montana
			add_to_variable = { NPP_popularity = 0.5 }
			subtract_from_variable = { RD_popularity = 0.5 }
		}
		359 = { # New Jersey
			add_to_variable = { NPP_popularity = 0.5 }
			subtract_from_variable = { RD_popularity = 0.5 }
		}
		374 = { # Oklahoma
			add_to_variable = { NPP_popularity = 0.5 }
			subtract_from_variable = { RD_popularity = 0.5 }
		}
		360 = { # Pennsylvania
			add_to_variable = { NPP_popularity = 0.5 }
			subtract_from_variable = { RD_popularity = 0.5 }
		}
	}
	add_popularity = {
		ideology = communist
		popularity = 0.02
	}
	add_popularity = {
		ideology = social_democrat
		popularity = 0.07
	}
}

######################################
#  Response Mission Failure Effects  #
######################################
#Effects placed here in order to avoid cluttering up the response mission
USA_response_anger_north = {
	hidden_effect = { #Check for the party in control and severly damage their popularity in the north
		if = { #Republicans
			limit = { has_government = social_liberal }
			every_owned_state = {
				limit = {
					can_have_elections_in_state = yes
					OR = {
						check_variable = { nationality = 82 } #Yankee
						check_variable = { nationality = 85 } #Steel Belt
						check_variable = { nationality = 88 } #Pacific
					}
				}
				set_temp_variable = { popularity_bonus = 0.1 }
				subtract_from_variable = { RD_R_bonus_popularity = popularity_bonus }
				multiply_temp_variable = { popularity_bonus = 0.5 }
				subtract_from_variable = { RD_popularity = popularity_bonus }
			}
		}
		else_if = { #Democrats
			limit = { has_government = social_conservative }
			every_owned_state = {
				limit = {
					can_have_elections_in_state = yes
					OR = {
						check_variable = { nationality = 82 } #Yankee
						check_variable = { nationality = 85 } #Steel Belt
						check_variable = { nationality = 88 } #Pacific
					}
				}
				set_temp_variable = { popularity_bonus = 0.1 }
				subtract_from_variable = { RD_D_bonus_popularity = popularity_bonus }
				multiply_temp_variable = { popularity_bonus = 0.5 }
				subtract_from_variable = { RD_popularity = popularity_bonus }
			}
		}
		else_if = { #C-NPP
			limit = { has_government = social_democrat }
			every_owned_state = {
				limit = {
					can_have_elections_in_state = yes
					OR = {
						check_variable = { nationality = 82 } #Yankee
						check_variable = { nationality = 85 } #Steel Belt
						check_variable = { nationality = 88 } #Pacific
					}
				}
				set_temp_variable = { popularity_bonus = 0.1 }
				subtract_from_variable = { NPP_C_bonus_popularity = popularity_bonus }
				multiply_temp_variable = { popularity_bonus = 0.5 }
				subtract_from_variable = { NPP_popularity = popularity_bonus }
			}
		}
		else_if = { #FR-NPP
			limit = { has_government = authoritarian_democrat }
			every_owned_state = {
				limit = {
					can_have_elections_in_state = yes
					OR = {
						check_variable = { nationality = 82 } #Yankee
						check_variable = { nationality = 85 } #Steel Belt
						check_variable = { nationality = 88 } #Pacific
					}
				}
				set_temp_variable = { popularity_bonus = 0.1 }
				subtract_from_variable = { NPP_FR_bonus_popularity = popularity_bonus }
				multiply_temp_variable = { popularity_bonus = 0.5 }
				subtract_from_variable = { NPP_popularity = popularity_bonus }
			}
		}
		else_if = { #L-NPP
			limit = { has_government = communist }
			every_owned_state = {
				limit = {
					can_have_elections_in_state = yes
					OR = {
						check_variable = { nationality = 82 } #Yankee
						check_variable = { nationality = 85 } #Steel Belt
						check_variable = { nationality = 88 } #Pacific
					}
				}
				set_temp_variable = { popularity_bonus = 0.1 }
				subtract_from_variable = { NPP_L_bonus_popularity = popularity_bonus }
				multiply_temp_variable = { popularity_bonus = 0.5 }
				subtract_from_variable = { NPP_popularity = popularity_bonus }
			}
		}
		else_if = { #Y-NPP
			limit = { has_government = national_socialism }
			every_owned_state = {
				limit = {
					can_have_elections_in_state = yes
					OR = {
						check_variable = { nationality = 82 } #Yankee
						check_variable = { nationality = 85 } #Steel Belt
						check_variable = { nationality = 88 } #Pacific
					}
				}
				set_temp_variable = { popularity_bonus = 0.1 }
				subtract_from_variable = { NPP_Y_bonus_popularity = popularity_bonus }
				multiply_temp_variable = { popularity_bonus = 0.5 }
				subtract_from_variable = { NPP_popularity = popularity_bonus }
			}
		}
	}
}
USA_response_anger_south = {
	hidden_effect = { #Check for the party in control and severly damage their popularity in the south
		if = { #Republicans
			limit = { has_government = social_liberal }
			every_owned_state = {
				limit = {
					can_have_elections_in_state = yes
					OR = {
						check_variable = { nationality = 83 } #Dixie
						check_variable = { nationality = 84 } #African-American
						check_variable = { nationality = 86 } #Southwestern
					}
				}
				set_temp_variable = { popularity_bonus = 0.1 }
				subtract_from_variable = { RD_R_bonus_popularity = popularity_bonus }
				multiply_temp_variable = { popularity_bonus = 0.5 }
				subtract_from_variable = { RD_popularity = popularity_bonus }
			}
		}
		else_if = { #Democrats
			limit = { has_government = social_conservative }
			every_owned_state = {
				limit = {
					can_have_elections_in_state = yes
					OR = {
						check_variable = { nationality = 83 } #Dixie
						check_variable = { nationality = 84 } #African-American
						check_variable = { nationality = 86 } #Southwestern
					}
				}
				set_temp_variable = { popularity_bonus = 0.1 }
				subtract_from_variable = { RD_D_bonus_popularity = popularity_bonus }
				multiply_temp_variable = { popularity_bonus = 0.5 }
				subtract_from_variable = { RD_popularity = popularity_bonus }
			}
		}
		else_if = { #C-NPP
			limit = { has_government = social_democrat }
			every_owned_state = {
				limit = {
					can_have_elections_in_state = yes
					OR = {
						check_variable = { nationality = 83 } #Dixie
						check_variable = { nationality = 84 } #African-American
						check_variable = { nationality = 86 } #Southwestern
					}
				}
				set_temp_variable = { popularity_bonus = 0.1 }
				subtract_from_variable = { NPP_C_bonus_popularity = popularity_bonus }
				multiply_temp_variable = { popularity_bonus = 0.5 }
				subtract_from_variable = { NPP_popularity = popularity_bonus }
			}
		}
		else_if = { #FR-NPP
			limit = { has_government = authoritarian_democrat }
			every_owned_state = {
				limit = {
					can_have_elections_in_state = yes
					OR = {
						check_variable = { nationality = 83 } #Dixie
						check_variable = { nationality = 84 } #African-American
						check_variable = { nationality = 86 } #Southwestern
					}
				}
				set_temp_variable = { popularity_bonus = 0.1 }
				subtract_from_variable = { NPP_FR_bonus_popularity = popularity_bonus }
				multiply_temp_variable = { popularity_bonus = 0.5 }
				subtract_from_variable = { NPP_popularity = popularity_bonus }
			}
		}
		else_if = { #L-NPP
			limit = { has_government = communist }
			every_owned_state = {
				limit = {
					can_have_elections_in_state = yes
					OR = {
						check_variable = { nationality = 83 } #Dixie
						check_variable = { nationality = 84 } #African-American
						check_variable = { nationality = 86 } #Southwestern
					}
				}
				set_temp_variable = { popularity_bonus = 0.1 }
				subtract_from_variable = { NPP_L_bonus_popularity = popularity_bonus }
				multiply_temp_variable = { popularity_bonus = 0.5 }
				subtract_from_variable = { NPP_popularity = popularity_bonus }
			}
		}
		else_if = { #Y-NPP
			limit = { has_government = national_socialism }
			every_owned_state = {
				limit = {
					can_have_elections_in_state = yes
					OR = {
						check_variable = { nationality = 83 } #Dixie
						check_variable = { nationality = 84 } #African-American
						check_variable = { nationality = 86 } #Southwestern
					}
				}
				set_temp_variable = { popularity_bonus = 0.1 }
				subtract_from_variable = { NPP_Y_bonus_popularity = popularity_bonus }
				multiply_temp_variable = { popularity_bonus = 0.5 }
				subtract_from_variable = { NPP_popularity = popularity_bonus }
			}
		}
	}
}
#####################################
#			MCS Unity			  #
#####################################
# Old version- updated to new version which should be more user friendly
# USA_setup_NPP_unity_multiplier =
# {
# 	set_variable = {NPP_gap = NPP_C_senators}
# 	add_to_variable = {NPP_gap = NPP_L_senators}
# 	subtract_from_variable = {NPP_gap = NPP_FR_senators}
# 	subtract_from_variable = {NPP_gap = NPP_R_senators}
# 	divide_variable = {NPP_gap = 4}
# }
# USA_unity_update = { #updates the unity multipier based on the importance of the bill.
# 	set_temp_variable = {new_unity = importance}
# 	multiply_temp_variable = {new_unity = NPP_unity_multiplier}
# 	add_to_variable = {USA_NPP_Unity = new_unity}
# 	divide_variable = {importance = 4}
# 	subtract_from_variable = {NPP_gap = importance}
# 	fake_normal_distribution_integral = yes
# 	clear_variable = importance
# }
# fake_normal_distribution_integral = {
# 	if = {
# 		limit = {check_variable = {NPP_gap < -0.85}}
# 		set_temp_variable = {inverse_input = NPP_gap}
# 		set_variable = {NPP_unity_multiplier = -1}
# 		subtract_from_temp_variable = {inverse_input = 0.951} #this number is there so that that the function is continuos
# 		divide_variable = {NPP_unity_multiplier = inverse_input}
# 		subtract_from_variable = {NPP_unity_multiplier = 1}
# 	}
# 	else_if = {
# 		limit = {check_variable = {NPP_gap > 0.85}}
# 		set_temp_variable = {inverse_input = NPP_gap}
# 		set_variable = {NPP_unity_multiplier = -1}
# 		add_to_temp_variable = {inverse_input = 0.951} #this number is there so that that the function is continuos
# 		divide_variable = {NPP_unity_multiplier = inverse_input}
# 		add_to_variable = {NPP_unity_multiplier = 1}
# 	}
# 	else = {
# 		set_temp_variable = {two_n_plus_one = 1}
# 		add_to_array = {exp_dummy_array_one = 0}
# 		resize_array = {exp_dummy_array_one = 6}
# 		set_variable = {NPP_unity_multiplier = 0}
# 		set_variable = {pos_or_neg = 1}
# 		for_each_loop = {
# 			array = exp_dummy_array_one
# 			set_variable = {to_the_power_of = two_n_plus_one}
# 			set_variable = {answer = NPP_gap}
# 			positive_exponent = yes
# 			divide_variable = {answer = two_n_plus_one}
# 			multiply_variable = {answer = pos_or_neg}
# 			add_to_variable = {NPP_unity_multiplier = answer}
# 			clear_variable = answer
# 			add_to_temp_variable = {two_n_plus_one = 2}
# 			multiply_variable = {pos_or_neg = -1}
# 		}
# 		multiply_variable = {NPP_unity_multiplier = 0.637}
# 	}

# }
# positive_exponent = {
# 	add_to_temp_array = {exp_dummy_array = 12}
# 	set_temp_variable = {root_of_exp = answer}
# 	subtract_from_variable = {to_the_power_of = 1}
# 	if = {
# 		limit = {check_variable = {to_the_power_of > 0}}
# 		resize_temp_array = {exp_dummy_array = to_the_power_of}
# 		for_each_loop = {
# 			array = exp_dummy_array
# 			multiply_variable = {answer = root_of_exp}
# 		}
# 	}
# 	clear_variable = to_the_power_of
# }



# How Margaret Chase Smith's "Break the NPP or don't" mechanic works
# This mechanic isn't designed so you can make the whole party happy.
# It's designed to reward you for making concessions to factions that are pissed off.
# The formula used is (satisfaction change)(influence-satisfaction+1)x(divisiveness factor)
# Satisfaction change and divisiveness factor are determined in effects.
# Satisfaction change is how much the satisfaction levels of the party have changed. Guidelines are roughly the same as Lazer's for popularity
# 0.2 is for things that really piss off/make happy one side.
# 0.1 is for stuff that would normally oppose
# 0.05 is for stuff they don't care about too much
# 0.01 is for little stuff like event chains and decisions
mcs_faction_setup = {
	set_variable = { mcs_unity_senator_importance = 0.5 }
	set_variable = { mcs_unity_national_importance = 0.2 }
	set_variable = { mcs_unity_state_importance = 0.3 }
	# The racist factor is used to calculate the percentage of FR-NPP voters in a state
	# that are voting more on segregation than supporting big business, it varies by region.
	# The higher it is, the more racists there are.
	# It's used to help calculate the segregationist national and state influence.
	set_variable = { racist_factor_south = 0.7 } #Dixie and African American states
	set_variable = { racist_factor_plains = 0.3 } #Plains, Southwest and Rockies
	set_variable = { racist_factor_north = 0.15 } #The North, Midwest, and West Coast
	set_variable = { mcs_left_influence = 0 }
	set_variable = { mcs_center_influence = 0 }
	set_variable = { mcs_right_influence = 0 }
	set_variable = { mcs_south_influence = 0 }
	set_variable = { mcs_fascist_influence = 0 }
	clamp_variable = {
		var = mcs_left_influence
		min = 0
		max = 1
	}
	clamp_variable = {
		var = mcs_center_influence
		min = 0
		max = 1
	}
	clamp_variable = {
		var = mcs_right_influence
		min = 0
		max = 1
	}
	clamp_variable = {
		var = mcs_south_influence
		min = 0
		max = 1
	}
	clamp_variable = {
		var = mcs_fascist_influence
		min = 0
		max = 1
	}
	#extremists start here because they're angry about everything
	set_variable = { mcs_left_satisfaction = -0.3 }
	set_variable = { mcs_center_satisfaction = 0 }
	set_variable = { mcs_right_satisfaction = 0 }
	set_variable = { mcs_south_satisfaction = 0 }
	set_variable = { mcs_fascist_satisfaction = -0.3 }
	clamp_variable = {
		var = mcs_left_satisfaction
		min = -1
		max = 1
	}
	clamp_variable = {
		var = mcs_center_satisfaction
		min = -1
		max = 1
	}
	clamp_variable = {
		var = mcs_right_satisfaction
		min = -1
		max = 1
	}
	clamp_variable = {
		var = mcs_south_satisfaction
		min = -1
		max = 1
	}
	clamp_variable = {
		var = mcs_fascist_satisfaction
		min = -1
		max = 1
	}

	set_variable = { mcs_left_influence_display = 0 }
	set_variable = { mcs_center_influence_display = 0 }
	set_variable = { mcs_right_influence_display = 0 }
	set_variable = { mcs_south_influence_display = 0 }
	set_variable = { mcs_fascist_influence_display = 0 }

	#used to account for other changes in the influence of the factions- add to this value in effects
	set_variable = { mcs_change_influence_left = 0 }
	set_variable = { mcs_change_influence_center = 0 }
	set_variable = { mcs_change_influence_right = 0 }
	set_variable = { mcs_change_influence_south = 0 }
	set_variable = { mcs_change_influence_fascist = 0 }
}

mcs_influence_calculation = {

	# How this works
	# 1. Get the percentage of senators from that faction in the party.
	# 2. Get the percentage of popularity of that faction.
	# 3. Get the percentage of popularity at state level.
	# 4. Do some simple math to put them onto a scale from 0 to 1

	# Q.What the fuck do all these variables do?
	# A. Okay, first don't panic. There's a lot of variables here but I promise they all do something.
	# There are three parts to calculating the influence of a wing of the party
	# There are five wings, the far left, the center, the business wing (often called right in the variables),
	# the segregationist wing, and the fascist wing (Yockey and friends)
	# 1. Senators. We set senator_influence_calculator for each of the five wings equal to the number of senators they have.
	set_temp_variable = { left_senator_influence_calculator = NPP_L_senators }
	# 2. National popularity (the party wheel) equal to the popularity of the party faction
	# (the right and segregationists are a special case, we'll get to that later)
	set_temp_variable = { left_national_popularity_influence_calculator = party_popularity@communist }
	# 3. This is an empty variable to be used later, but we'll be filling it with state popularity values.
	set_temp_variable = { left_state_popularity_influence_calculator = 0 }
	# 4. The final value will go here.
	set_temp_variable = { left_influence_calculator = 0 }
	#and now we set these for every faction
	set_temp_variable = { center_senator_influence_calculator = NPP_C_senators }
	set_temp_variable = { center_national_popularity_influence_calculator = party_popularity@social_democrat }
	set_temp_variable = { center_state_popularity_influence_calculator = 0 }
	set_temp_variable = { center_influence_calculator = 0 }

	# Okay, remember how the FR-NPP is a special case? Here's how we deal with it.
	set_temp_variable = { NPP_FR_in_south = 0 }
	set_temp_variable = { NPP_FR_in_north = NPP_FR_senators }
	every_owned_state = {
		limit = {# We find all the Southern states
			can_have_elections_in_state = yes
			OR = {
				check_variable = { nationality = 83 } #Dixie
				check_variable = { nationality = 84 } #African_American
			}
		}
		#Check for FR-NPP senators
		if = {
			limit = { check_variable = { senator_1 = 6 } }
			add_to_temp_variable = { USA.NPP_FR_in_south = 1 }
		   }
		if = {
			limit = {check_variable = { senator_2 = 6} }
			add_to_temp_variable = { USA.NPP_FR_in_south = 1 }
		   }
	}
	#the business wing gets all the non-southern FR-NPP senators
	subtract_from_temp_variable = { NPP_FR_in_north = NPP_FR_in_south }

	set_temp_variable = { right_senator_influence_calculator = NPP_FR_in_north }
	set_temp_variable = { right_national_popularity_influence_calculator = party_popularity@authoritarian_democrat }
	set_temp_variable = { right_state_popularity_influence_calculator = 0 }
	set_temp_variable = { right_influence_calculator = 0 }

	set_temp_variable = { south_senator_influence_calculator = NPP_FR_in_south }
	set_temp_variable = { south_national_popularity_influence_calculator = party_popularity@authoritarian_democrat }
	set_temp_variable = { south_state_popularity_influence_calculator = 0 }
	set_temp_variable = { south_influence_calculator = 0 }

	set_temp_variable = { fascist_senator_influence_calculator = NPP_R_senators }
	set_temp_variable = { fascist_national_popularity_influence_calculator = party_popularity@national_socialism }
	set_temp_variable = { fascist_state_popularity_influence_calculator = 0 }
	set_temp_variable = { fascist_influence_calculator = 0 }

	set_temp_variable = { total_electoral_votes = 534 }
	set_temp_variable = { south_popularity = 0 }

	every_owned_state = {
		limit = {
			can_have_elections_in_state = yes
		}
		set_temp_variable = { local_tankie_popularity = NPP_L_bonus_popularity }
		set_temp_variable = { local_center_popularity = NPP_C_bonus_popularity }
		set_temp_variable = { local_business_popularity = NPP_FR_bonus_popularity }
		set_temp_variable = { local_racist_popularity = NPP_FR_bonus_popularity }
		set_temp_variable = { local_fascist_popularity = NPP_Y_bonus_popularity }

		# This block calculates how much of the local population is supporting the FR-NPP becaus they're racist
		if = {
			limit = {
				OR = {
					check_variable = { nationality = 83 } #Dixie
					check_variable = { nationality = 84 } #African_American
				}
			}
			multiply_temp_variable = { local_racist_popularity = USA.racist_factor_south }
		}
		if = {
			limit = {
				OR = {
					check_variable = { nationality = 86 } #Southwest
					check_variable = { nationality = 87 } #Rockies
				}
			}
			multiply_temp_variable = { local_racist_popularity = USA.racist_factor_plains }
		}
		if = {
			limit = {
				OR = {
					check_variable = { nationality = 82 } #North
					check_variable = { nationality = 85 } #Midwest
					check_variable = { nationality = 88 } #West Coast
				}
			}
			multiply_temp_variable = { local_racist_popularity = USA.racist_factor_north }
		}


		# and this line checks how much is supporting it because of their economic policies
		subtract_from_temp_variable = { local_business_popularity = local_racist_popularity }
		log = "racist popularity is [?local_racist_popularity]"
		log = "business popularity is [?local_business_popularity]"


		#Multiply the state popularity by the number of electoral votes in that state (being popular in California means a lot more than being popular in Rhode Island)
		multiply_temp_variable = { local_tankie_popularity = electoral_votes }
		multiply_temp_variable = { local_center_popularity = electoral_votes }
		multiply_temp_variable = { local_racist_popularity = electoral_votes }
		multiply_temp_variable = { local_business_popularity = electoral_votes }
		multiply_temp_variable = { local_fascist_popularity = electoral_votes }

		log = "tankie pop = [?local_tankie_popularity]"
		log = "center pop = [?local_center_popularity]"
		log = "south pop = [?local_racist_popularity]"
		log = "business pop = [?local_business_popularity]"
		log = "fascist pop = [?local_fascist_popularity]"
		#add the results to the calculation variables
		add_to_temp_variable = { USA.left_state_popularity_influence_calculator = local_tankie_popularity }
		add_to_temp_variable = { USA.center_state_popularity_influence_calculator = local_center_popularity }
		add_to_temp_variable = { USA.south_state_popularity_influence_calculator = local_racist_popularity }
		add_to_temp_variable = { USA.right_state_popularity_influence_calculator = local_business_popularity }
		add_to_temp_variable = { USA.fascist_state_popularity_influence_calculator = local_fascist_popularity }
		#and repeat for all states
	}
		log = "tankie pop = [?left_state_popularity_influence_calculator]"
		log = "center pop = [?center_state_popularity_influence_calculator]"
		log = "south pop = [?south_state_popularity_influence_calculator]"
		log = "business pop = [?right_state_popularity_influence_calculator]"
		log = "fascist pop = [?fascist_state_popularity_influence_calculator]"

	#divide by the total number of electoral votes
	divide_temp_variable = { left_state_popularity_influence_calculator = total_electoral_votes }
	divide_temp_variable = { center_state_popularity_influence_calculator = total_electoral_votes }
	divide_temp_variable = { right_state_popularity_influence_calculator = total_electoral_votes }
	divide_temp_variable = { south_state_popularity_influence_calculator = total_electoral_votes }
	divide_temp_variable = { fascist_state_popularity_influence_calculator = total_electoral_votes }

		log = "tankie pop = [?left_state_popularity_influence_calculator]"
		log = "center pop = [?center_state_popularity_influence_calculator]"
		log = "south pop = [?south_state_popularity_influence_calculator]"
		log = "business pop = [?right_state_popularity_influence_calculator]"
		log = "fascist pop = [?fascist_state_popularity_influence_calculator]"

	#calculate the split of FR-NPP popularity on the wheel by finding the percentage of state popularities for the racists and the business wing, then dividing by their total
	set_temp_variable  = { right_national_popularity_influence_calculator = right_state_popularity_influence_calculator }

	set_temp_variable = { mcs_fr_npp_split_calculator = right_national_popularity_influence_calculator }
	add_to_temp_variable = { mcs_fr_npp_split_calculator = south_national_popularity_influence_calculator }

	divide_temp_variable = { right_national_popularity_influence_calculator = mcs_fr_npp_split_calculator }
	divide_temp_variable = { south_national_popularity_influence_calculator = mcs_fr_npp_split_calculator }

	if = {#This is so the game doesn't break if there are no NPP senators. How did you make this happen while getting MCS elected? Fuck you. Also send me your game log.
		limit = {
			check_variable = { NPP_senators = 0 }
		}
		set_variable = { left_senator_influence_calculator = 0 }
		set_variable = { center_senator_influence_calculator = 0 }
		set_variable = { right_senator_influence_calculator = 0 }
		set_variable = { south_senator_influence_calculator = 0 }
		set_variable = { fascist_senator_influence_calculator = 0 }
	}
	else = {#Final calculation of senator importance- divide number of faction's senators by the total number of senators.
		divide_temp_variable = { left_senator_influence_calculator = NPP_senators }
		divide_temp_variable = { center_senator_influence_calculator = NPP_senators }
		divide_temp_variable = { right_senator_influence_calculator = NPP_senators }
		divide_temp_variable = { south_senator_influence_calculator = NPP_senators }
		divide_temp_variable = { fascist_senator_influence_calculator = NPP_senators }
	}

	log = "tankie senator = [?left_senator_influence_calculator]"
	log = "center senator = [?center_senator_influence_calculator]"
	log = "south senator = [?south_senator_influence_calculator]"
	log = "business senator = [?right_senator_influence_calculator]"
	log = "fascist senator = [?fascist_senator_influence_calculator]"
	# final calculation- multiply by the importance of the senators for influence
	multiply_temp_variable = { left_senator_influence_calculator = mcs_unity_senator_importance }
	multiply_temp_variable = { center_senator_influence_calculator = mcs_unity_senator_importance }
	multiply_temp_variable = { right_senator_influence_calculator = mcs_unity_senator_importance }
	multiply_temp_variable = { south_senator_influence_calculator = mcs_unity_senator_importance }
	multiply_temp_variable = { fascist_senator_influence_calculator = mcs_unity_senator_importance }

	log = "tankie senator = [?left_senator_influence_calculator]"
	log = "center senator = [?center_senator_influence_calculator]"
	log = "south senator = [?south_senator_influence_calculator]"
	log = "business senator = [?right_senator_influence_calculator]"
	log = "fascist senator = [?fascist_senator_influence_calculator]"

	# Probably gonna delete this
	# divide_temp_variable = { left_national_popularity_influence_calculator = 100 }
	# divide_temp_variable = { center_national_popularity_influence_calculator = 100 }
	# divide_temp_variable = { right_national_popularity_influence_calculator = 100 }
	# divide_temp_variable = { south_national_popularity_influence_calculator = 100 }
	# divide_temp_variable = { fascist_national_popularity_influence_calculator = 100 }

	# log = "tankie natpop = [?left_national_popularity_influence_calculator]"
	# log = "center natpop = [?center_national_popularity_influence_calculator]"
	# log = "south natpop = [?south_national_popularity_influence_calculator]"
	# log = "business natpop = [?right_national_popularity_influence_calculator]"
	# log = "fascist natpop = [?fascist_national_popularity_influence_calculator]"

	# Final calculation of national importance
	multiply_temp_variable = { left_national_popularity_influence_calculator = mcs_unity_national_importance }
	multiply_temp_variable = { center_national_popularity_influence_calculator = mcs_unity_national_importance }
	multiply_temp_variable = { right_national_popularity_influence_calculator = mcs_unity_national_importance }
	multiply_temp_variable = { south_national_popularity_influence_calculator = mcs_unity_national_importance }
	multiply_temp_variable = { fascist_national_popularity_influence_calculator = mcs_unity_national_importance }

	log = "tankie natpop = [?left_national_popularity_influence_calculator]"
	log = "center natpop = [?center_national_popularity_influence_calculator]"
	log = "south natpop = [?south_national_popularity_influence_calculator]"
	log = "business natpop = [?right_national_popularity_influence_calculator]"
	log = "fascist natpop = [?fascist_national_popularity_influence_calculator]"

	#Final calculation of state importance
	multiply_temp_variable = { left_state_popularity_influence_calculator = mcs_unity_state_importance }
	multiply_temp_variable = { center_state_popularity_influence_calculator = mcs_unity_state_importance }
	multiply_temp_variable = { right_state_popularity_influence_calculator = mcs_unity_state_importance }
	multiply_temp_variable = { south_state_popularity_influence_calculator = mcs_unity_state_importance }
	multiply_temp_variable = { fascist_state_popularity_influence_calculator = mcs_unity_state_importance }

		log = "tankie pop = [?left_state_popularity_influence_calculator]"
		log = "center pop = [?center_state_popularity_influence_calculator]"
		log = "south pop = [?south_state_popularity_influence_calculator]"
		log = "business pop = [?right_state_popularity_influence_calculator]"
		log = "fascist pop = [?fascist_state_popularity_influence_calculator]"

	#Add it all together
	add_to_variable = { mcs_left_influence = left_senator_influence_calculator }
	add_to_variable = { mcs_left_influence = left_national_influence_calculator }
	add_to_variable = { mcs_left_influence = left_state_influence_calculator }
	add_to_variable = { mcs_center_influence = center_senator_influence_calculator }
	add_to_variable = { mcs_center_influence = center_national_popularity_influence_calculator }
	add_to_variable = { mcs_center_influence = center_state_popularity_influence_calculator }
	add_to_variable = { mcs_right_influence = right_senator_influence_calculator }
	add_to_variable = { mcs_right_influence = right_national_popularity_influence_calculator }
	add_to_variable = { mcs_right_influence = right_state_popularity_influence_calculator }
	add_to_variable = { mcs_south_influence = south_senator_influence_calculator }
	add_to_variable = { mcs_south_influence = south_national_popularity_influence_calculator }
	add_to_variable = { mcs_south_influence = south_state_popularity_influence_calculator }
	add_to_variable = { mcs_fascist_influence = fascist_senator_influence_calculator }
	add_to_variable = { mcs_fascist_influence = fascist_national_popularity_influence_calculator }
	add_to_variable = { mcs_fascist_influence = fascist_state_popularity_influence_calculator }

	log = "left influence = [?mcs_left_influence]"
	log = "center influence = [?mcs_center_influence]"
	log = "right influence = [?mcs_right_influence]"
	log = "south influence = [?mcs_south_influence]"
	log = "fascist influence = [?mcs_fascist_influence]"
	#factor in any changes that have happened in game
	add_to_variable = { mcs_left_influence = mcs_change_influence_left }
	add_to_variable = { mcs_center_influence = mcs_change_influence_center }
	add_to_variable = { mcs_right_influence = mcs_change_influence_right }
	add_to_variable = { mcs_south_influence = mcs_change_influence_south }
	add_to_variable = { mcs_fascist_influence = mcs_change_influence_fascist }

	#Normalize the values
	set_temp_variable = { mcs_total_influence = mcs_left_influence }
	add_to_temp_variable = { mcs_total_influence = mcs_center_influence }
	add_to_temp_variable = { mcs_total_influence = mcs_right_influence }
	add_to_temp_variable = { mcs_total_influence = mcs_south_influence }
	add_to_temp_variable = { mcs_total_influence = mcs_fascist_influence }

	divide_variable = { mcs_left_influence = mcs_total_influence }
	divide_variable = { mcs_center_influence = mcs_total_influence }
	divide_variable = { mcs_right_influence = mcs_total_influence }
	divide_variable = { mcs_south_influence = mcs_total_influence }
	divide_variable = { mcs_fascist_influence = mcs_total_influence }
}

mcs_unity_check = {# ALWAYS RUN THIS AFTER ANY SATISFACTION CHANGES
# this modifies the unity- you need to set the satisfaction change and divisiveness variables in the effect or they default to zero-
# divisiveness should be 5 for minor issues, 10 for normal issues, 15 for aggravating issues, 20 for the biggest issues to affect the NPP
	set_variable = { mcs_left_unity_change = 0 }
	set_variable = { mcs_center_unity_change = 0 }
	set_variable = { mcs_right_unity_change = 0 }
	set_variable = { mcs_south_unity_change = 0 }
	set_variable = { mcs_fascist_unity_change = 0 }
	set_variable = { MCS_starting_unity = USA_NPP_unity }
	set_variable = { MCS_magic_balance_number = 1.2 } #This will adjust the effects of unity shifts

	#add influence, subtract satisfaction (they don't give a fuck if they're already happy with you), add one so there's no unexpected negatives
	add_to_variable = { mcs_left_unity_change = mcs_left_influence }
	add_to_variable = { mcs_center_unity_change	 = mcs_center_influence }
	add_to_variable = { mcs_right_unity_change = mcs_right_influence }
	add_to_variable = { mcs_south_unity_change = mcs_south_influence }
	add_to_variable = { mcs_fascist_unity_change = mcs_fascist_influence }


	subtract_from_variable = { mcs_left_unity_change = mcs_left_satisfaction }
	subtract_from_variable = { mcs_center_unity_change = mcs_center_satisfaction }
	subtract_from_variable = { mcs_right_unity_change = mcs_right_satisfaction }
	subtract_from_variable = { mcs_south_unity_change = mcs_south_satisfaction }
	subtract_from_variable = { mcs_fascist_unity_change = mcs_fascist_satisfaction }

	add_to_variable = { mcs_left_unity_change = 1 }
	add_to_variable = { mcs_center_unity_change	 = 1 }
	add_to_variable = { mcs_right_unity_change = 1 }
	add_to_variable = { mcs_south_unity_change = 1 }
	add_to_variable = { mcs_fascist_unity_change = 1 }

	#multiply by influence
	multiply_variable = { mcs_left_unity_change = mcs_left_influence }
	multiply_variable = { mcs_center_unity_change = mcs_center_influence }
	multiply_variable = { mcs_right_unity_change = mcs_right_influence }
	multiply_variable = { mcs_south_unity_change = mcs_south_influence }
	multiply_variable = { mcs_fascist_unity_change = mcs_fascist_influence }

	#multiply by satisfaction change to see how important this is to them

	multiply_variable = { mcs_left_unity_change = mcs_left_satisfaction_change }
	multiply_variable = { mcs_center_unity_change = mcs_center_satisfaction_change }
	multiply_variable = { mcs_right_unity_change = mcs_right_satisfaction_change }
	multiply_variable = { mcs_south_unity_change = mcs_south_satisfaction_change }
	multiply_variable = { mcs_fascist_unity_change = mcs_fascist_satisfaction_change }
	#multiply by divisiveness- basically how important this issue is
	multiply_variable = { mcs_left_unity_change = mcs_divisiveness }
	multiply_variable = { mcs_center_unity_change = mcs_divisiveness }
	multiply_variable = { mcs_right_unity_change = mcs_divisiveness }
	multiply_variable = { mcs_south_unity_change = mcs_divisiveness }
	multiply_variable = { mcs_fascist_unity_change = mcs_divisiveness }

	#multiply by magic number- basically how important this issue is
	multiply_variable = { mcs_left_unity_change = MCS_magic_balance_number }
	multiply_variable = { mcs_center_unity_change = MCS_magic_balance_number }
	multiply_variable = { mcs_right_unity_change = MCS_magic_balance_number }
	multiply_variable = { mcs_south_unity_change = MCS_magic_balance_number }
	multiply_variable = { mcs_fascist_unity_change = MCS_magic_balance_number }

	# add it all up
	log = "Left influence is [?mcs_left_influence]"
	log = "Center influence is [?mcs_center_influence]"
	log = "Business influence is [?mcs_right_influence]"
	log = "Segregationists influence is [?mcs_south_influence]"
	log = "Yockeys influence is [?mcs_fascist_influence]"
	log = "Left changes happiness by [?mcs_left_satisfaction_change]"
	log = "Center changes happiness by [?mcs_center_satisfaction_change]"
	log = "Business wing changes happiness by [?mcs_right_satisfaction_change]"
	log = "Segregationists change happiness by [?mcs_south_satisfaction_change]"
	log = "Yockeys change happiness by [?mcs_fascist_satisfaction_change]"
	log = "Left changes unity by [?mcs_left_unity_change]"
	log = "Center changes unity by [?mcs_center_unity_change]"
	log = "Business wing changes unity by [?mcs_right_unity_change]"
	log = "Segregationists change unity by [?mcs_south_unity_change]"
	log = "Yockeys change unity by [?mcs_fascist_unity_change]"
	set_temp_variable = { total_unity_change = 0 }
	add_to_temp_variable = { total_unity_change = mcs_left_unity_change }
	add_to_temp_variable = { total_unity_change = mcs_center_unity_change }
	add_to_temp_variable = { total_unity_change = mcs_right_unity_change }
	add_to_temp_variable = { total_unity_change = mcs_south_unity_change }
	add_to_temp_variable = { total_unity_change = mcs_fascist_unity_change }
	log = "Total change in unity is [?total_unity_change]"
	multiply_temp_variable = { total_unity_change = 10 }
	add_to_variable = { USA_NPP_unity = total_unity_change }

	#factor in satisfaction changes
	multiply_variable = { mcs_left_satisfaction_change = 2 }
	multiply_variable = { mcs_center_satisfaction_change = 2 }
	multiply_variable = { mcs_right_satisfaction_change = 2 }
	multiply_variable = { mcs_south_satisfaction_change = 2 }
	multiply_variable = { mcs_fascist_satisfaction_change = 2 }

	add_to_variable = { mcs_left_satisfaction = mcs_left_satisfaction_change }
	add_to_variable = { mcs_center_satisfaction = mcs_center_satisfaction_change }
	add_to_variable = { mcs_right_satisfaction = mcs_right_satisfaction_change }
	add_to_variable = { mcs_south_satisfaction = mcs_south_satisfaction_change }
	add_to_variable = { mcs_fascist_satisfaction = mcs_fascist_satisfaction_change }

	log = "Left influence is [?mcs_left_satisfaction]"
	log = "Center influence is [?mcs_center_satisfaction]"
	log = "Business influence is [?mcs_right_satisfaction]"
	log = "Segregationists influence is [?mcs_south_satisfaction]"
	log = "Yockeys influence is [?mcs_fascist_satisfaction]"

	clamp_variable = {
		var = mcs_left_satisfaction
		min = -1
		max = 1
	}
	clamp_variable = {
		var = mcs_center_satisfaction
		min = -1
		max = 1
	}
	clamp_variable = {
		var = mcs_right_satisfaction
		min = -1
		max = 1
	}
	clamp_variable = {
		var = mcs_south_satisfaction
		min = -1
		max = 1
	}
	clamp_variable = {
		var = mcs_fascist_satisfaction
		min = -1
		max = 1
	}

	#set the satisfaction changes to zero again
	set_variable = { mcs_left_satisfaction_change = 0 }
	set_variable = { mcs_center_satisfaction_change = 0 }
	set_variable = { mcs_right_satisfaction_change = 0 }
	set_variable = { mcs_south_satisfaction_change = 0 }
	set_variable = { mcs_fascist_satisfaction_change = 0 }
	if = {
		limit = {
			check_variable = { USA_NPP_unity < 12.5}
		}
		country_event = {
			id = chase.pol.5
			days = 5
		}
	}
	if = {
		limit = {
			AND = {
				check_variable = { USA_NPP_unity > 25}
				check_variable = { MCS_starting_unity < 25}
			}
		}
		if = {
			limit = {
				has_country_flag = MCS_no_great_unity
			}
			country_event = {
				id = chase.1000
				days = 1
			}
		}
		else = {
			country_event = {
				id = chase.1004
				days = 1
			}
		}
	}
	if = {
		limit = {
			AND = {
				check_variable = { USA_NPP_unity > 15}
				check_variable = { MCS_starting_unity < 15}
			}
		}
		if = {
			limit = {
				has_country_flag = MCS_no_good_unity
			}
			country_event = {
				id = chase.1001
				days = 1
			}
			#set
		}
		else = {
			country_event = {
				id = chase.1005
				days = 1
			}
		}
	}
	if = {
		limit = {
			AND = {
				check_variable = { USA_NPP_unity < 15}
				check_variable = { MCS_starting_unity > 15}
			}
		}
		if = {
			limit = {
				has_country_flag = MCS_no_bad_unity
			}
			country_event = {
				id = chase.1002
				days = 1
			}
		}
		else = {
			country_event = {
				id = chase.1006
				days = 1
			}
		}
	}
	if = {
		limit = {
			AND = {
				check_variable = { USA_NPP_unity < 10}
				check_variable = { MCS_starting_unity > 10}
			}
		}
		if = {
			limit = {
				has_country_flag = MCS_no_terrible_unity
			}
			country_event = {
				id = chase.1003
				days = 1
			}
		}
		else = {
			country_event = {
				id = chase.1007
				days = 1
			}
		}
	}

	set_variable = { MCS_starting_unity = 0 }
	clamp_variable = {
		var = USA_NPP_unity
		min = 0
		max = 30
	}
}

mcs_update_party_display_debug = {
 	set_variable = { mcs_left_influence_display = mcs_left_influence }
	set_variable = { mcs_center_influence_display = mcs_center_influence }
	set_variable = { mcs_right_influence_display = mcs_right_influence }
	set_variable = { mcs_south_influence_display = mcs_south_influence }
	set_variable = { mcs_fascist_influence_display = mcs_fascist_influence }
	# multiply_variable = { mcs_left_influence_display = 100 }
	# multiply_variable = { mcs_center_influence_display = 100 }
	# multiply_variable = { mcs_right_influence_display = 100 }
	# multiply_variable = { mcs_south_influence_display = 100 }
	# multiply_variable = { mcs_fascist_influence_display = 100 }
}

#MCS goes to space
mcs_setup_space_program = {
	set_variable = { mcs_space_funding = 0 }
	set_variable = { mcs_space_program_scope = 0 }
	set_variable = { mcs_surveillance_focus = 0 }
	clamp_variable = {
		var = mcs_surveillance_focus
		min = 0
		max = 1
	}
	set_variable = { mcs_missile_focus = 0 }
	clamp_variable = {
		var = mcs_missile_focus
		min = 0
		max = 1
	}
	set_variable = { mcs_exploration_focus = 0 }
	clamp_variable = {
		var = mcs_exploration_focus
		min = 0
		max = 1
	}
	set_variable = { mcs_launch_failure = 0 }
	set_variable = { mcs_launch_total = 0 }
	set_variable = { mcs_space_failure_rate = 0 }
	set_variable = { mcs_space_failure_modifier = 0 }

	set_variable = { mcs_space_surveillance_launches = 0 }
	set_variable = { mcs_space_missile_launches = 0 }
	set_variable = { mcs_space_exploration_launches = 0 }

	set_country_flag = MCS_space_active
}


mcs_normalize_space_variables = {
	set_temp_variable = { mcs_space_focus_total = mcs_surveillance_focus }
	add_to_temp_variable = { mcs_space_focus_total = mcs_missile_focus }
	add_to_temp_variable = { mcs_space_focus_total = mcs_exploration_focus }
	divide_variable = { mcs_surveillance_focus = mcs_space_focus_total }
	divide_variable = { mcs_missile_focus = mcs_space_focus_total }
	divide_variable = { mcs_exploration_focus = mcs_space_focus_total }
}

mcs_check_launch = {
	clr_country_flag = MCS_good_launch
	clr_country_flag = MCS_bad_launch

	set_temp_variable = { funding_scope_ratio = mcs_space_funding }
	divide_temp_variable = { funding_scope_ratio = mcs_space_program_scope }
	set_temp_variable = { mcs_space_launch_failure_chance = 0.05 }
	multiply_temp_variable = { mcs_space_launch_failure_chance = funding_scope_ratio }
	add_to_temp_variable = { mcs_space_launch_failure_chance = mcs_space_failure_modifier }
	set_temp_variable = { mcs_space_launch_failure_chance_burgundy_interferance_temp = mcs_space_launch_failure_chance_burgundy_interferance }
	add_to_temp_variable = { mcs_space_launch_failure_chance = mcs_space_launch_failure_chance_burgundy_interferance }
	set_temp_variable = { mcs_space_launch_success_chance = 1 }
	subtract_from_temp_variable = { mcs_space_launch_success_chance = mcs_space_launch_failure_chance }


	random_list = {
		mcs_space_launch_success_chance = {
			set_country_flag = MCS_good_launch
			add_to_variable = { mcs_launch_total = 1 }
		}
		mcs_space_launch_failure_chance = {
			set_country_flag = MCS_bad_launch
			add_to_variable = { mcs_launch_total = 1 }
			add_to_variable = { mcs_failure_total = 1 }
		}
	}
	set_variable = { mcs_space_failure_rate = mcs_failure_total }
	divide_variable = { mcs_space_failure_rate = mcs_launch_total }
	if = {
		limit = {
			AND = {
				has_country_flag = mcs_space_warning
				has_country_flag = MCS_bad_launch
			}

		}
		set_country_flag = mcs_space_shut_it_down

	}
	if = {
		limit = {
			AND = {
				check_variable = { mcs_space_failure_rate > 0.3 }
				check_variable = { mcs_launch_total > 4 }
			}
		}
		set_country_flag = mcs_space_warning
	}
}
mcs_worsen_revolt = {
	if = {
		limit = { has_idea = USA_mcs_revolt_of_the_generals_stage_1 }
		swap_ideas = {
			remove_idea = USA_mcs_revolt_of_the_generals_stage_1
			add_idea = USA_mcs_revolt_of_the_generals_stage_2
		}
	}
	else_if = {
		limit = { has_idea = USA_mcs_revolt_of_the_generals_stage_2 }
		swap_ideas = {
			remove_idea = USA_mcs_revolt_of_the_generals_stage_2
			add_idea = USA_mcs_revolt_of_the_generals_stage_3
		}
	}
	else_if = {
		limit = { has_idea = USA_mcs_revolt_of_the_generals_stage_3 }
		swap_ideas = {
			remove_idea = USA_mcs_revolt_of_the_generals_stage_3
			add_idea = USA_mcs_revolt_of_the_generals_stage_4
		}
	}
	else_if = {
		limit = { has_idea = USA_mcs_revolt_of_the_generals_stage_4 }
		swap_ideas = {
			remove_idea = USA_mcs_revolt_of_the_generals_stage_4
			add_idea = USA_mcs_revolt_of_the_generals_stage_5
		}
	}
}
mcs_improve_revolt = {
	if = {
		limit = { has_idea = USA_mcs_revolt_of_the_generals_stage_1 }
		remove_ideas = USA_mcs_revolt_of_the_generals_stage_1
	}
	else_if = {
		limit = { has_idea = USA_mcs_revolt_of_the_generals_stage_2 }
		swap_ideas = {
			remove_idea = USA_mcs_revolt_of_the_generals_stage_2
			add_idea = USA_mcs_revolt_of_the_generals_stage_1
		}
	}
	else_if = {
		limit = { has_idea = USA_mcs_revolt_of_the_generals_stage_3 }
		swap_ideas = {
			remove_idea = USA_mcs_revolt_of_the_generals_stage_3
			add_idea = USA_mcs_revolt_of_the_generals_stage_2
		}
	}
	else_if = {
		limit = { has_idea = USA_mcs_revolt_of_the_generals_stage_4 }
		swap_ideas = {
			remove_idea = USA_mcs_revolt_of_the_generals_stage_4
			add_idea = USA_mcs_revolt_of_the_generals_stage_3
		}
	}
	else_if = {
		limit = { has_idea = USA_mcs_revolt_of_the_generals_stage_5 }
		swap_ideas = {
			remove_idea = USA_mcs_revolt_of_the_generals_stage_5
			add_idea = USA_mcs_revolt_of_the_generals_stage_4
		}
	}
}




#####################################
# CIA International Fuckery Effects #
#####################################

# _influence indicates covert support
# _support indicates overt, public support


# MAKE SURE YOU SET target_CIA_nation BEFORE YOU FIRE THE EFFECT
# SERIOUSLY YOU NEED TO DO IT FOR IT TO WORK I'M NOT KIDDING

#Covert Support

USA_CIA_increase_political_influence = {
	var:target_CIA_nation = {
		if = {
			limit = { NOT = { has_variable = US_political_influence } }
			set_variable = { US_political_influence = 1 }
		}
		else = {
			add_to_variable = { US_political_influence = 1 }
		}
		clamp_variable = {
			var = US_political_influence
			min = 1
			max = 10
		}
	}
	clear_variable = target_CIA_nation
}

USA_CIA_increase_economic_influence = {
	var:target_CIA_nation = {
		if = {
			limit = { NOT = { has_variable = US_economic_influence } }
			set_variable = { US_economic_influence = 1 }
		}
		else = {
			add_to_variable = { US_economic_influence = 1 }
		}
		clamp_variable = {
			var = US_economic_influence
			min = 1
			max = 10
		}
	}
	clear_variable = target_CIA_nation
}

USA_CIA_increase_seperatist_influence = {
	var:target_CIA_nation = {
		if = {
			limit = { NOT = { has_variable = US_seperatist_influence } }
			set_variable = { US_seperatist_influence = 1 }
		}
		else = {
			add_to_variable = { US_seperatist_influence = 1 }
		}
		clamp_variable = {
			var = US_seperatist_influence
			min = 1
			max = 10
		}
	}
	clear_variable = target_CIA_nation
}
#Wallace impeachment scripted effects
USA_wallace_impeachment_support_small_decrease = {
	custom_effect_tooltip = wallace.impeachment.support.decrease.tt
	add_to_variable = {USA_wallace_impeachment_support = -5}
	clamp_variable = {var = USA_wallace_impeachment_support min = 0 max = 98}
}
USA_wallace_impeachment_support_small_increase = {
	custom_effect_tooltip = wallace.impeachment.support.small.increase.tt
	add_to_variable = {USA_wallace_impeachment_support = 5}
	clamp_variable = {var = USA_wallace_impeachment_support min = 0 max = 98}
}
USA_wallace_impeachment_support_increase = {
	custom_effect_tooltip = wallace.impeachment.support.increase.tt
	add_to_variable = {USA_wallace_impeachment_support = 10}
	clamp_variable = {var = USA_wallace_impeachment_support min = 0 max = 98}
}
USA_wallace_impeachment_support_massive_increase = {
	custom_effect_tooltip = wallace.impeachment.support.massive.increase.tt
	add_to_variable = {USA_wallace_impeachment_support = 20}
	clamp_variable = {var = USA_wallace_impeachment_support min = 0 max = 98}
}
USA_wallace_impeachment_support_guaranteed_removal = {
	add_to_variable = {USA_wallace_impeachment_support = 80}
	clamp_variable = {var = USA_wallace_impeachment_support min = 0 max = 98}
}
USA_wallace_impeachment_support_decrease = {
	custom_effect_tooltip = wallace.impeachment.support.decrease.tt
	subtract_from_variable = {USA_wallace_impeachment_support = 10}
	clamp_variable = {var = USA_wallace_impeachment_support min = 0 max = 98}
}







################################################### TREATY PORTS


TP_Initial_Calc = {


### USA

	if = { limit = { has_country_flag = USA_64_D_RD} #Bennett
		set_variable = { USA_Negotiating_Power = 7 }
	}

	if = { limit = { has_country_flag = USA_64_R_RD } #LBJ
		set_variable = { USA_Negotiating_Power = 7 }
	}

	if = { limit = { has_country_flag = USA_64_C_NPP } #RFK
		set_variable = { USA_Negotiating_Power = 7 }
	}

	if = { limit = { has_country_flag = USA_64_FR_NPP } #Wallace
		set_variable = { USA_Negotiating_Power = 5 }
	}

	if = { limit = { has_country_flag = USA_68_D_RD } #Goldie
		set_variable = { USA_Negotiating_Power = 6 }
	}

	if = { limit = { has_country_flag = USA_68_R_RD } # Glenn
		set_variable = { USA_Negotiating_Power = 7 }
	}

	if = { limit = { has_country_flag = USA_68_C_NPP } # Harrington
		set_variable = { USA_Negotiating_Power = 6 }
	}

	if = { limit = { has_country_flag = USA_68_FR_NPP } # MCS
		set_variable = { USA_Negotiating_Power = 6 }
	}


	### JAP

	if = { limit = { JAP = { has_country_flag = JAP_Kido_Prime_Minister } } #Kido
		set_variable = { JAP_Negotiating_Power = 8 }
	}
	if = { limit = { JAP = { has_country_flag = JAP_Kaya_Prime_Minister } } #Kaya
		set_variable = { JAP_Negotiating_Power = 8 }
	}
	if = { limit = { JAP = { has_country_flag = JAP_Ikeda_Prime_Minister } } #Ikeda
		set_variable = { JAP_Negotiating_Power = 8 }
	}
	if = { limit = { JAP = { has_country_flag = JAP_Takagi_Prime_Minister } } #Tagaki
		set_variable = { JAP_Negotiating_Power = 8 }
	}
	if = { limit = { JAP = { has_country_flag = JAP_Tanaka_Prime_Minister } } #Tanaka
		set_variable = { JAP_Negotiating_Power = 8 }
	}
	if = { limit = { JAP = { has_country_flag = JAP_Sasakawa_Prime_Minister } } #Sasakawa
		set_variable = { JAP_Negotiating_Power = 8 }
	}
	if = { limit = { JAP = { has_country_flag = JAP_Konoe_Prime_Minister } } #Konoe
		set_variable = { JAP_Negotiating_Power = 8 }
	}


}



TP_Location_Effect = {

	if = {  limit = {has_global_flag =  JAP_TP_picked_honolulu }
		add_to_variable = { JAP_Negotiating_Power = 3 }
	}

	if = {  limit = {has_global_flag =  USA_TP_picked_USA_carrier }
		add_to_variable = { USA_Negotiating_Power = 2 }
	}

	if = {  limit = {has_global_flag = JAP_TP_picked_JAP_carrier }
		add_to_variable = { JAP_Negotiating_Power = 2 }
	}

	if = {  limit = {has_global_flag = 	TP_picked_Mexico }
		add_to_variable = { JAP_Negotiating_Power = 1 }
		add_to_variable = { USA_Negotiating_Power = 1 }
	}
}

TP_Oil_Subsidies_Effect_calculator = {

if = {
	limit = { has_global_flag = TP_Oil_Clause_Agreed_to }

	if = {
		limit = { has_global_flag = TP_Sub_Oil_US_Gives_Little_Oil }
		add_ideas = USA_TP_Jap_Little_Oil
	}

	if = {
		limit = { has_global_flag = TP_Sub_Oil_US_Gives_Medium_Oil}
		add_ideas = USA_TP_Jap_Middle_Oil
	}

	if = {
		limit = { has_global_flag = TP_Sub_Oil_US_Gives_Lots_Of_Oil }
		add_ideas = USA_TP_Jap_Lot_Oil
		}
	}
}
honolulu_accords_militarization_clause_win = {
	if = {
		limit = { has_global_flag = honolulu_accords_militarization_clause_high }
		629 = { set_demilitarized_zone = yes }
	}

	if = {
		limit = { has_global_flag = honolulu_accords_militarization_clause_medium }
		629 = { set_demilitarized_zone = yes }
		768 = { set_demilitarized_zone = yes }
		769 = { set_demilitarized_zone = yes }
	}

	if = {
		limit = { has_global_flag = honolulu_accords_ports_demilitarization } #low clause
		768 = { set_demilitarized_zone = yes }
		769 = { set_demilitarized_zone = yes }
	}

	if = {
		limit = { has_global_flag = honolulu_accords_ports_japanese_militarization } #very low clause
		add_to_variable = { misc_costs = 30 }
		JAP = { subtract_from_variable = { misc_costs = 30 }
			}
		}
	}
TP_trade_calculator = {

if = {
	limit = { has_global_flag = TP_Trade_Clause_Agreed_to }

	if = {
		limit = { has_global_flag = TP_Trade_No_More_Embargo }

		remove_opinion_modifier = { target = JAP modifier = embargo }

		hidden_effect = {
		remove_opinion_modifier = { target = CHI modifier = embargo }
		remove_opinion_modifier = { target = PHI modifier = embargo }
		remove_opinion_modifier = { target = INS modifier = embargo }
		remove_opinion_modifier = { target = BUR modifier = embargo }
		remove_opinion_modifier = { target = SIA modifier = embargo }
		remove_opinion_modifier = { target = CAM modifier = embargo }
		remove_opinion_modifier = { target = LAO modifier = embargo }
		remove_opinion_modifier = { target = VIN modifier = embargo }
		remove_opinion_modifier = { target = SYO modifier = embargo }
		remove_opinion_modifier = { target = HUI modifier = embargo }
		remove_opinion_modifier = { target = GXC modifier = embargo }
		remove_opinion_modifier = { target = MAN modifier = embargo }
		remove_opinion_modifier = { target = SIC modifier = embargo }
		remove_opinion_modifier = { target = GUZ modifier = embargo }
		remove_opinion_modifier = { target = SHX modifier = embargo }
		remove_opinion_modifier = { target = BEN modifier = embargo }
		remove_opinion_modifier = { target = GNG modifier = embargo }
		remove_opinion_modifier = { target = YUN modifier = embargo }
		remove_opinion_modifier = { target = BHU modifier = embargo }

		JAP = { remove_opinion_modifier = { target = USA modifier = embargo } }
			}
	}

	if = {
		limit = { has_global_flag = TP_Trade_Us_Gets_Cash_And_No_Embargo }

		add_to_variable = { miscs_income = 1000 }

		remove_opinion_modifier = { target = JAP modifier = embargo }

		hidden_effect = {
		remove_opinion_modifier = { target = CHI modifier = embargo }
		remove_opinion_modifier = { target = PHI modifier = embargo }
		remove_opinion_modifier = { target = INS modifier = embargo }
		remove_opinion_modifier = { target = BUR modifier = embargo }
		remove_opinion_modifier = { target = SIA modifier = embargo }
		remove_opinion_modifier = { target = CAM modifier = embargo }
		remove_opinion_modifier = { target = LAO modifier = embargo }
		remove_opinion_modifier = { target = VIN modifier = embargo }
		remove_opinion_modifier = { target = SYO modifier = embargo }
		remove_opinion_modifier = { target = HUI modifier = embargo }
		remove_opinion_modifier = { target = GXC modifier = embargo }
		remove_opinion_modifier = { target = MAN modifier = embargo }
		remove_opinion_modifier = { target = SIC modifier = embargo }
		remove_opinion_modifier = { target = GUZ modifier = embargo }
		remove_opinion_modifier = { target = SHX modifier = embargo }
		remove_opinion_modifier = { target = BEN modifier = embargo }
		remove_opinion_modifier = { target = GNG modifier = embargo }
		remove_opinion_modifier = { target = YUN modifier = embargo }
		remove_opinion_modifier = { target = BHU modifier = embargo }

		JAP = { remove_opinion_modifier = { target = USA modifier = embargo } }
			}
	}

	if = {
		limit = { has_global_flag = TP_Trade_No_More_Embargo_US_Buys_Stuff }

		create_import = {
    	resource = chromium
    	amount = 80
    	exporter = JAP
				}

		JAP = { add_to_variable = { miscs_income = 250 } }

		remove_opinion_modifier = { target = JAP modifier = embargo }

		hidden_effect = {
		remove_opinion_modifier = { target = CHI modifier = embargo }
		remove_opinion_modifier = { target = PHI modifier = embargo }
		remove_opinion_modifier = { target = INS modifier = embargo }
		remove_opinion_modifier = { target = BUR modifier = embargo }
		remove_opinion_modifier = { target = SIA modifier = embargo }
		remove_opinion_modifier = { target = CAM modifier = embargo }
		remove_opinion_modifier = { target = LAO modifier = embargo }
		remove_opinion_modifier = { target = VIN modifier = embargo }
		remove_opinion_modifier = { target = SYO modifier = embargo }
		remove_opinion_modifier = { target = HUI modifier = embargo }
		remove_opinion_modifier = { target = GXC modifier = embargo }
		remove_opinion_modifier = { target = MAN modifier = embargo }
		remove_opinion_modifier = { target = SIC modifier = embargo }
		remove_opinion_modifier = { target = GUZ modifier = embargo }
		remove_opinion_modifier = { target = SHX modifier = embargo }
		remove_opinion_modifier = { target = BEN modifier = embargo }
		remove_opinion_modifier = { target = GNG modifier = embargo }
		remove_opinion_modifier = { target = YUN modifier = embargo }
		remove_opinion_modifier = { target = BHU modifier = embargo }

		JAP = { remove_opinion_modifier = { target = USA modifier = embargo } }
			}
		}

	if = {
		limit = { has_global_flag = TP_Trade_No_More_Embargo_US_Pays_For_Ports }

		JAP = { add_to_variable = { miscs_income = 1000 } }

		remove_opinion_modifier = { target = JAP modifier = embargo }

		hidden_effect = {
		remove_opinion_modifier = { target = CHI modifier = embargo }
		remove_opinion_modifier = { target = PHI modifier = embargo }
		remove_opinion_modifier = { target = INS modifier = embargo }
		remove_opinion_modifier = { target = BUR modifier = embargo }
		remove_opinion_modifier = { target = SIA modifier = embargo }
		remove_opinion_modifier = { target = CAM modifier = embargo }
		remove_opinion_modifier = { target = LAO modifier = embargo }
		remove_opinion_modifier = { target = VIN modifier = embargo }
		remove_opinion_modifier = { target = SYO modifier = embargo }
		remove_opinion_modifier = { target = HUI modifier = embargo }
		remove_opinion_modifier = { target = GXC modifier = embargo }
		remove_opinion_modifier = { target = MAN modifier = embargo }
		remove_opinion_modifier = { target = SIC modifier = embargo }
		remove_opinion_modifier = { target = GUZ modifier = embargo }
		remove_opinion_modifier = { target = SHX modifier = embargo }
		remove_opinion_modifier = { target = BEN modifier = embargo }
		remove_opinion_modifier = { target = GNG modifier = embargo }
		remove_opinion_modifier = { target = YUN modifier = embargo }
		remove_opinion_modifier = { target = BHU modifier = embargo }

		JAP = { remove_opinion_modifier = { target = USA modifier = embargo } }
			}
		}
	}
}

######################################################################

############# SAF WAR EFFECTS - By DocOverbuild

######################################################################


USA_SAF_WAR_Discontent_Monthly_Effect = {

	add_to_variable = { USA_SAF_WAR_Discontent = 1 }

	if = { ### Not bad at all
		limit = { check_variable = { USA_SAF_WAR_Discontent > -100 } check_variable = { var = USA_SAF_WAR_Discontent value = 10 compare = less_than_or_equals } }

		if = {
		 	limit = { NOT = { has_idea = USA_SAF_WAR_Insurgency_Domestic_Discontent_1  } }

			add_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_1

			hidden_effect = {
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_2
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_3
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_4
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_5
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_6
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_7
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_8
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_9
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_10
				}
		}
	}

	if = { ### Not too bad
		limit = { check_variable = { USA_SAF_WAR_Discontent > 10 } check_variable = { var = USA_SAF_WAR_Discontent value = 20 compare = less_than_or_equals } }

		if = {
			limit = { NOT = { has_idea = USA_SAF_WAR_Insurgency_Domestic_Discontent_2  } }

			add_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_2

			hidden_effect = {
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_1
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_3
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_4
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_5
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_6
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_7
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_8
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_9
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_10
				}
		}
	}

	if = { ### Mild at best
		limit = { check_variable = { USA_SAF_WAR_Discontent > 20 } check_variable = { var = USA_SAF_WAR_Discontent value = 30 compare = less_than_or_equals } }

		if = {
			limit = { NOT = { has_idea = USA_SAF_WAR_Insurgency_Domestic_Discontent_3  } }

			add_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_3

			hidden_effect = {
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_1
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_2
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_4
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_5
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_6
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_7
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_8
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_9
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_10
				}
		}
	}

	if = { ### Becoming worrying
		limit = { check_variable = { USA_SAF_WAR_Discontent > 30 } check_variable = { var = USA_SAF_WAR_Discontent value = 40 compare = less_than_or_equals } }

		if = {
			limit = { NOT = { has_idea = USA_SAF_WAR_Insurgency_Domestic_Discontent_4 } }

			add_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_3

			hidden_effect = {
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_1
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_2
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_3
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_5
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_6
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_7
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_8
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_9
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_10
				}
		}

	}

	if = { ### Minor Protests
		limit = { check_variable = { USA_SAF_WAR_Discontent > 40 } check_variable = { var = USA_SAF_WAR_Discontent value = 50 compare = less_than_or_equals } }

		if = {
			limit = { NOT = { has_idea = USA_SAF_WAR_Insurgency_Domestic_Discontent_5 } }

			add_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_5

			hidden_effect = {
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_1
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_2
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_3
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_4
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_6
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_7
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_8
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_9
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_10
				}
		}

		if = {
			limit = { NOT = { has_country_flag = USA_SAF_WAR_Insurgency_Discontent_Minor_Protests_Go } }

			country_event = { id = USA.saf.effects.12 days = 5 }

			set_country_flag = USA_SAF_WAR_Insurgency_Discontent_Minor_Protests_Go
			clr_country_flag = USA_SAF_WAR_Insurgency_Discontent_Common_Protests_Go
			clr_country_flag = USA_SAF_WAR_Insurgency_Discontent_Huge_Protests_Go
			clr_country_flag = USA_SAF_WAR_Insurgency_Discontent_1968_Democratic_Convetion_Go
			clr_country_flag = USA_SAF_WAR_Insurgency_Discontent_Burned_Out_Cities_Go
			clr_country_flag = USA_SAF_WAR_Insurgency_Discontent_MLK_Riots_But_Hundred_Times_Worse_Go

		}

	}

	if = { ### Common protests
		limit = { check_variable = { USA_SAF_WAR_Discontent > 50 } check_variable = { var = USA_SAF_WAR_Discontent value = 60 compare = less_than_or_equals } }

		if = {
			limit = { NOT = { has_idea = USA_SAF_WAR_Insurgency_Domestic_Discontent_6 } }

			add_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_6

				hidden_effect = {
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_1
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_2
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_3
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_4
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_5
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_7
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_8
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_9
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_10
				}
		}

		if = {
			limit = { NOT = { has_country_flag = USA_SAF_WAR_Insurgency_Discontent_Common_Protests_Go } }

			country_event = { id = USA.saf.effects.13 days = 5 }

			clr_country_flag = USA_SAF_WAR_Insurgency_Discontent_Minor_Protests_Go
			set_country_flag = USA_SAF_WAR_Insurgency_Discontent_Common_Protests_Go
			clr_country_flag = USA_SAF_WAR_Insurgency_Discontent_Huge_Protests_Go
			clr_country_flag = USA_SAF_WAR_Insurgency_Discontent_1968_Democratic_Convetion_Go
			clr_country_flag = USA_SAF_WAR_Insurgency_Discontent_Burned_Out_Cities_Go
			clr_country_flag = USA_SAF_WAR_Insurgency_Discontent_MLK_Riots_But_Hundred_Times_Worse_Go

		}

	}

	if = { ### Huge protests
		limit = { check_variable = { USA_SAF_WAR_Discontent > 60 } check_variable = { var = USA_SAF_WAR_Discontent value = 70 compare = less_than_or_equals } }

		if = {
			limit = { NOT = { has_idea = USA_SAF_WAR_Insurgency_Domestic_Discontent_7 } }

			add_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_7


			hidden_effect = {
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_1
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_2
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_3
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_4
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_5
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_6
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_8
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_9
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_10
				}
		}

		if = {
			limit = { NOT = { has_country_flag = USA_SAF_WAR_Insurgency_Discontent_Huge_Protests_Go } }

			country_event = { id = USA.saf.effects.14 days = 5 }

			clr_country_flag = USA_SAF_WAR_Insurgency_Discontent_Minor_Protests_Go
			clr_country_flag = USA_SAF_WAR_Insurgency_Discontent_Common_Protests_Go
			set_country_flag = USA_SAF_WAR_Insurgency_Discontent_Huge_Protests_Go
			clr_country_flag = USA_SAF_WAR_Insurgency_Discontent_1968_Democratic_Convetion_Go
			clr_country_flag = USA_SAF_WAR_Insurgency_Discontent_Burned_Out_Cities_Go
			clr_country_flag = USA_SAF_WAR_Insurgency_Discontent_MLK_Riots_But_Hundred_Times_Worse_Go

		}

	}

	if = { ### 1968 Democratic Convention
		limit = { check_variable = { USA_SAF_WAR_Discontent > 70 } check_variable = { var = USA_SAF_WAR_Discontent value = 80 compare = less_than_or_equals } }

		if = {
			limit = { NOT = { has_idea = USA_SAF_WAR_Insurgency_Domestic_Discontent_8 } }

			add_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_8

			hidden_effect = {
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_1
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_2
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_3
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_4
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_5
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_6
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_7
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_9
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_10
				}
		}

		if = {
			limit = { NOT = { has_country_flag = USA_SAF_WAR_Insurgency_Discontent_1968_Democratic_Convetion_Go } }

			country_event = { id = USA.saf.effects.15 days = 5 }

			clr_country_flag = USA_SAF_WAR_Insurgency_Discontent_Minor_Protests_Go
			clr_country_flag = USA_SAF_WAR_Insurgency_Discontent_Common_Protests_Go
			clr_country_flag = USA_SAF_WAR_Insurgency_Discontent_Huge_Protests_Go
			set_country_flag = USA_SAF_WAR_Insurgency_Discontent_1968_Democratic_Convetion_Go
			clr_country_flag = USA_SAF_WAR_Insurgency_Discontent_Burned_Out_Cities_Go
			clr_country_flag = USA_SAF_WAR_Insurgency_Discontent_MLK_Riots_But_Hundred_Times_Worse_Go

		}

	}

	if = { ### Cities are being burned out
		limit = { check_variable = { USA_SAF_WAR_Discontent > 80 } check_variable = { var = USA_SAF_WAR_Discontent value = 90 compare = less_than_or_equals } }

		if = {
			limit = { NOT = { has_idea = USA_SAF_WAR_Insurgency_Domestic_Discontent_9 } }

			add_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_9

			hidden_effect = {
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_1
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_2
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_3
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_4
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_5
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_6
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_7
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_8
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_10
				}
		}

		if = {
			limit = { NOT = { has_country_flag = USA_SAF_WAR_Insurgency_Discontent_Burned_Out_Cities_Go } }

			country_event = { id = USA.saf.effects.16 days = 5 }

			clr_country_flag = USA_SAF_WAR_Insurgency_Discontent_Minor_Protests_Go
			clr_country_flag = USA_SAF_WAR_Insurgency_Discontent_Common_Protests_Go
			clr_country_flag = USA_SAF_WAR_Insurgency_Discontent_Huge_Protests_Go
			clr_country_flag = USA_SAF_WAR_Insurgency_Discontent_1968_Democratic_Convetion_Go
			set_country_flag = USA_SAF_WAR_Insurgency_Discontent_Burned_Out_Cities_Go
			clr_country_flag = USA_SAF_WAR_Insurgency_Discontent_MLK_Riots_But_Hundred_Times_Worse_Go

		}

	}

	if = { ### MLK assassination riots turned up to a ten
		limit = { check_variable = { USA_SAF_WAR_Discontent > 90 } check_variable = { var = USA_SAF_WAR_Discontent value = 1000 compare = less_than_or_equals } }

		if = {
			limit = { NOT = { has_idea = USA_SAF_WAR_Insurgency_Domestic_Discontent_10 } }

			add_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_10

			hidden_effect = {
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_1
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_2
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_3
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_4
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_5
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_6
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_7
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_8
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_9
				}
		}

		if = {
			limit = { NOT = { has_country_flag = USA_SAF_WAR_Insurgency_Discontent_MLK_Riots_But_Hundred_Times_Worse_Go } }

			country_event = { id = USA.saf.effects.17 days = 5 }

			clr_country_flag = USA_SAF_WAR_Insurgency_Discontent_Minor_Protests_Go
			clr_country_flag = USA_SAF_WAR_Insurgency_Discontent_Common_Protests_Go
			clr_country_flag = USA_SAF_WAR_Insurgency_Discontent_Huge_Protests_Go
			clr_country_flag = USA_SAF_WAR_Insurgency_Discontent_1968_Democratic_Convetion_Go
			clr_country_flag = USA_SAF_WAR_Insurgency_Discontent_Burned_Out_Cities_Go
			set_country_flag = USA_SAF_WAR_Insurgency_Discontent_MLK_Riots_But_Hundred_Times_Worse_Go

		}
	}
}


######################################################################

############# SAF INSURGENCY EFFECTS - By DocOverbuild

######################################################################

USA_SAF_WAR_Insurgency_Discontent_Monthly_Effect_Calculator = {

set_temp_variable = { USA_SAF_WAR_Investment_To_Discontent = USA_SAF_WAR_Investment }
divide_temp_variable = { USA_SAF_WAR_Investment_To_Discontent = 4 }
add_to_variable = { USA_SAF_WAR_Discontent = USA_SAF_WAR_Investment_To_Discontent }


############### Discontent Effects

	if = { ### Not bad at all
		limit = { check_variable = { USA_SAF_WAR_Discontent > -100 } check_variable = { var = USA_SAF_WAR_Discontent value = 10 compare = less_than_or_equals } }

		if = {
		 	limit = { NOT = { has_idea = USA_SAF_WAR_Insurgency_Domestic_Discontent_1  } }

			add_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_1

			hidden_effect = {
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_2
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_3
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_4
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_5
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_6
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_7
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_8
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_9
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_10
				}
		}
	}

	if = { ### Not too bad
		limit = { check_variable = { USA_SAF_WAR_Discontent > 10 } check_variable = { var = USA_SAF_WAR_Discontent value = 20 compare = less_than_or_equals } }

		if = {
			limit = { NOT = { has_idea = USA_SAF_WAR_Insurgency_Domestic_Discontent_2  } }

			add_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_2

			hidden_effect = {
				remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_1
				remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_3
				remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_4
				remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_5
				remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_6
				remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_7
				remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_8
				remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_9
				remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_10
			}
		}
	}

	if = { ### Mild at best
		limit = { check_variable = { USA_SAF_WAR_Discontent > 20 } check_variable = { var = USA_SAF_WAR_Discontent value = 30 compare = less_than_or_equals } }

		if = {
			limit = { NOT = { has_idea = USA_SAF_WAR_Insurgency_Domestic_Discontent_3  } }

			add_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_3

			hidden_effect = {
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_1
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_2
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_4
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_5
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_6
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_7
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_8
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_9
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_10
				}
		}
	}

	if = { ### Becoming worrying
		limit = { check_variable = { USA_SAF_WAR_Discontent > 30 } check_variable = { var = USA_SAF_WAR_Discontent value = 40 compare = less_than_or_equals } }

		if = {
			limit = { NOT = { has_idea = USA_SAF_WAR_Insurgency_Domestic_Discontent_4 } }

			add_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_3

			hidden_effect = {
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_1
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_2
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_3
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_5
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_6
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_7
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_8
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_9
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_10
				}
		}

	}

	if = { ### Minor Protests
		limit = { check_variable = { USA_SAF_WAR_Discontent > 40 } check_variable = { var = USA_SAF_WAR_Discontent value = 50 compare = less_than_or_equals } }

		if = {
			limit = { NOT = { has_idea = USA_SAF_WAR_Insurgency_Domestic_Discontent_5 } }

			add_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_5

			hidden_effect = {
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_1
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_2
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_3
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_4
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_6
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_7
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_8
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_9
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_10
				}
		}

		if = {
			limit = { NOT = { has_country_flag = USA_SAF_WAR_Insurgency_Discontent_Minor_Protests_Go } }

			country_event = { id = USA.saf.effects.12 days = 5 }

			set_country_flag = USA_SAF_WAR_Insurgency_Discontent_Minor_Protests_Go
			clr_country_flag = USA_SAF_WAR_Insurgency_Discontent_Common_Protests_Go
			clr_country_flag = USA_SAF_WAR_Insurgency_Discontent_Huge_Protests_Go
			clr_country_flag = USA_SAF_WAR_Insurgency_Discontent_1968_Democratic_Convetion_Go
			clr_country_flag = USA_SAF_WAR_Insurgency_Discontent_Burned_Out_Cities_Go
			clr_country_flag = USA_SAF_WAR_Insurgency_Discontent_MLK_Riots_But_Hundred_Times_Worse_Go

		}

	}

	if = { ### Common protests
		limit = { check_variable = { USA_SAF_WAR_Discontent > 50 } check_variable = { var = USA_SAF_WAR_Discontent value = 60 compare = less_than_or_equals } }

		if = {
			limit = { NOT = { has_idea = USA_SAF_WAR_Insurgency_Domestic_Discontent_6 } }

			add_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_6

				hidden_effect = {
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_1
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_2
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_3
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_4
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_5
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_7
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_8
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_9
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_10
				}
		}

		if = {
			limit = { NOT = { has_country_flag = USA_SAF_WAR_Insurgency_Discontent_Common_Protests_Go } }

			country_event = { id = USA.saf.effects.13 days = 5 }

			clr_country_flag = USA_SAF_WAR_Insurgency_Discontent_Minor_Protests_Go
			set_country_flag = USA_SAF_WAR_Insurgency_Discontent_Common_Protests_Go
			clr_country_flag = USA_SAF_WAR_Insurgency_Discontent_Huge_Protests_Go
			clr_country_flag = USA_SAF_WAR_Insurgency_Discontent_1968_Democratic_Convetion_Go
			clr_country_flag = USA_SAF_WAR_Insurgency_Discontent_Burned_Out_Cities_Go
			clr_country_flag = USA_SAF_WAR_Insurgency_Discontent_MLK_Riots_But_Hundred_Times_Worse_Go

		}

	}

	if = { ### Huge protests
		limit = { check_variable = { USA_SAF_WAR_Discontent > 60 } check_variable = { var = USA_SAF_WAR_Discontent value = 70 compare = less_than_or_equals } }

		if = {
			limit = { NOT = { has_idea = USA_SAF_WAR_Insurgency_Domestic_Discontent_7 } }

			add_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_7


			hidden_effect = {
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_1
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_2
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_3
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_4
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_5
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_6
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_8
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_9
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_10
				}
		}

		if = {
			limit = { NOT = { has_country_flag = USA_SAF_WAR_Insurgency_Discontent_Huge_Protests_Go } }

			country_event = { id = USA.saf.effects.14 days = 5 }

			clr_country_flag = USA_SAF_WAR_Insurgency_Discontent_Minor_Protests_Go
			clr_country_flag = USA_SAF_WAR_Insurgency_Discontent_Common_Protests_Go
			set_country_flag = USA_SAF_WAR_Insurgency_Discontent_Huge_Protests_Go
			clr_country_flag = USA_SAF_WAR_Insurgency_Discontent_1968_Democratic_Convetion_Go
			clr_country_flag = USA_SAF_WAR_Insurgency_Discontent_Burned_Out_Cities_Go
			clr_country_flag = USA_SAF_WAR_Insurgency_Discontent_MLK_Riots_But_Hundred_Times_Worse_Go

		}

	}

	if = { ### 1968 Democratic Convention
		limit = { check_variable = { USA_SAF_WAR_Discontent > 70 } check_variable = { var = USA_SAF_WAR_Discontent value = 80 compare = less_than_or_equals } }

		if = {
			limit = { NOT = { has_idea = USA_SAF_WAR_Insurgency_Domestic_Discontent_8 } }

			add_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_8

			hidden_effect = {
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_1
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_2
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_3
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_4
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_5
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_6
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_7
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_9
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_10
				}
		}

		if = {
			limit = { NOT = { has_country_flag = USA_SAF_WAR_Insurgency_Discontent_1968_Democratic_Convetion_Go } }

			country_event = { id = USA.saf.effects.15 days = 5 }

			clr_country_flag = USA_SAF_WAR_Insurgency_Discontent_Minor_Protests_Go
			clr_country_flag = USA_SAF_WAR_Insurgency_Discontent_Common_Protests_Go
			clr_country_flag = USA_SAF_WAR_Insurgency_Discontent_Huge_Protests_Go
			set_country_flag = USA_SAF_WAR_Insurgency_Discontent_1968_Democratic_Convetion_Go
			clr_country_flag = USA_SAF_WAR_Insurgency_Discontent_Burned_Out_Cities_Go
			clr_country_flag = USA_SAF_WAR_Insurgency_Discontent_MLK_Riots_But_Hundred_Times_Worse_Go

		}
	}

	if = { ### Cities are being burned out
		limit = { check_variable = { USA_SAF_WAR_Discontent > 80 } check_variable = { var = USA_SAF_WAR_Discontent value = 90 compare = less_than_or_equals } }

		if = {
			limit = { NOT = { has_idea = USA_SAF_WAR_Insurgency_Domestic_Discontent_9 } }

			add_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_9

			hidden_effect = {
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_1
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_2
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_3
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_4
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_5
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_6
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_7
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_8
			remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_10
				}
		}

		if = {
			limit = { NOT = { has_country_flag = USA_SAF_WAR_Insurgency_Discontent_Burned_Out_Cities_Go } }

			country_event = { id = USA.saf.effects.16 days = 5 }

			clr_country_flag = USA_SAF_WAR_Insurgency_Discontent_Minor_Protests_Go
			clr_country_flag = USA_SAF_WAR_Insurgency_Discontent_Common_Protests_Go
			clr_country_flag = USA_SAF_WAR_Insurgency_Discontent_Huge_Protests_Go
			clr_country_flag = USA_SAF_WAR_Insurgency_Discontent_1968_Democratic_Convetion_Go
			set_country_flag = USA_SAF_WAR_Insurgency_Discontent_Burned_Out_Cities_Go
			clr_country_flag = USA_SAF_WAR_Insurgency_Discontent_MLK_Riots_But_Hundred_Times_Worse_Go

		}

	}

	if = { ### MLK assassination riots turned up to a ten
		limit = { check_variable = { USA_SAF_WAR_Discontent > 90 } check_variable = { var = USA_SAF_WAR_Discontent value = 1000 compare = less_than_or_equals } }

		if = {
			limit = { NOT = { has_idea = USA_SAF_WAR_Insurgency_Domestic_Discontent_10 } }

			add_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_10

			hidden_effect = {
				remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_1
				remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_2
				remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_3
				remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_4
				remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_5
				remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_6
				remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_7
				remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_8
				remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_9
			}
		}

		if = {
			limit = { NOT = { has_country_flag = USA_SAF_WAR_Insurgency_Discontent_MLK_Riots_But_Hundred_Times_Worse_Go } }
			country_event = { id = USA.saf.effects.17 days = 5 }
			clr_country_flag = USA_SAF_WAR_Insurgency_Discontent_Minor_Protests_Go
			clr_country_flag = USA_SAF_WAR_Insurgency_Discontent_Common_Protests_Go
			clr_country_flag = USA_SAF_WAR_Insurgency_Discontent_Huge_Protests_Go
			clr_country_flag = USA_SAF_WAR_Insurgency_Discontent_1968_Democratic_Convetion_Go
			clr_country_flag = USA_SAF_WAR_Insurgency_Discontent_Burned_Out_Cities_Go
			set_country_flag = USA_SAF_WAR_Insurgency_Discontent_MLK_Riots_But_Hundred_Times_Worse_Go
		}
	}
}

USA_SAF_WAR_Insurgency_Investment_Monthly_Effect_Calculator = {
	if =  {
		limit = { NOT = { has_country_flag = USA_SAF_WAR_Insurgency_War_Crime_Timer_On} } #Checks to make sure a war crime is not being fired back to back

		set_temp_variable = { USA_SAF_WAR_Insurgency_war_crime_chance = USA_SAF_WAR_Investment }
		divide_temp_variable = { USA_SAF_WAR_Insurgency_war_crime_chance = 4 }

		set_temp_variable = { USA_SAF_WAR_Insurgency_war_crime_not_occuring_chance = 100 }
		subtract_from_temp_variable = { USA_SAF_WAR_Insurgency_war_crime_not_occuring_chance = USA_SAF_WAR_Insurgency_war_crime_chance  }

		random_list = {
			temp_var:USA_SAF_WAR_Insurgency_war_crime_chance = {
				USA_SAF_WAR_Insurgency_war_crime_event_chooser = yes
			}

			temp_var:USA_SAF_WAR_Insurgency_war_crime_not_occuring_chance = {

			}
		}
	}
}

USA_SAF_WAR_Insurgency_war_crime_event_chooser = {

	#fixed_random_seed = no #this is only for decisions -uncountably

	random_list = {

		13 = { country_event = { id = USA.saf.effects.4 days = 3 } }

		13 = { country_event = { id = USA.saf.effects.5 days = 3 } }

		12 = { country_event = { id = USA.saf.effects.6 days = 3 }  modifier = { factor = 1.1 has_country_flag = USA_SAF_WAR_Insurgency_Bring_Out_Napalm_Tooltip } }

		12 = { country_event = { id = USA.saf.effects.7 days = 3 }  modifier = { factor = 1.1 has_country_flag = USA_SAF_WAR_Insurgency_War_Crime_Massacared_Village } }

		12 = { country_event = { id = USA.saf.effects.8 days = 3 } }

		12 = { country_event = { id = USA.saf.effects.9 days = 3 } }

		13 = { country_event = { id = USA.saf.effects.10 days = 3 } }

		13 = { country_event = { id = USA.saf.effects.11 days = 3 } }

	}

}

USA_SAF_remove_insurgency_discontent = {
	hidden_effect = {
		remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_1
		remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_2
		remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_3
		remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_4
		remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_5
		remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_6
		remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_7
		remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_8
		remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_9
		remove_ideas = USA_SAF_WAR_Insurgency_Domestic_Discontent_10
	}
}

USA_SAF_WAR_Insurgency_Pulling_Out_Effect = {

	custom_effect_tooltip = USA_pull_out_tt
	set_country_flag = USA_SAF_WAR_Insurgency_Pulled_Out
	clr_country_flag = USA_SAF_WAR_Insurgency_Activated

	USA_SAF_remove_insurgency_discontent = yes

	set_variable = { USA_Pulled_Out_Backlash_Effect_Base = 3 }
	set_variable = { USA_Pulled_Out_Backlash_Effect_Political_Power = 0 }
	set_variable = { USA_Pulled_Out_Backlash_Effect_Stability = 0 }
	set_variable = { USA_Pulled_Out_Backlash_Effect_War_Support = 0 }
	set_variable = { USA_Pulled_Out_Backlash_Effect_Popularity = 0 }
	set_variable = { USA_Pull_Out_Effect_Angola_Mandate = 0 }
	set_variable = { USA_Pull_Out_Effect_Congo_Mandate = 0 }
	set_variable = { USA_Pull_Out_Effect_Mozamb_Mandate = 0 }
	set_variable = { USA_Mandates_Overall_Stability = 0 }


	###########################################################################################
	#### Angola
	###########################################################################################

	if = { limit = { ANG = { has_government = authoritarian_democrat } }
		set_variable = { USA_Pull_Out_Effect_Angola_Mandate = ANG.OFN_MANDATE_rebel_stability }
	}

	if = { limit = { ANG = { NOT = {  has_government = authoritarian_democrat } } }
		set_variable = { USA_Pull_Out_Effect_Angola_Mandate = 0 }
	}

	###########################################################################################
	#### Congo/CAR
	###########################################################################################

	if = { limit = { COG = { has_government = authoritarian_democrat } }
		set_variable = { USA_Pull_Out_Effect_Congo_Mandate = COG.OFN_MANDATE_rebel_stability }
	}

	if = { limit = { COG = { NOT = {  has_government = authoritarian_democrat } } }
		set_variable = { USA_Pull_Out_Effect_Congo_Mandate = 0 }
	}

	###########################################################################################
	#### Mozambique
	###########################################################################################

	if = { limit = { MZB = { has_government = authoritarian_democrat } }
		set_variable = { USA_Pull_Out_Effect_Mozamb_Mandate = MZB.OFN_MANDATE_rebel_stability }
	}

	if = { limit = { MZB = { NOT = {  has_government = authoritarian_democrat } } }
		set_variable = { USA_Pull_Out_Effect_Mozamb_Mandate = 0 }
	}

	###########################################################################################
	#### Calculation time
	###########################################################################################

	add_to_variable = { USA_Mandates_Overall_Stability = USA_Pull_Out_Effect_Angola_Mandate }
	add_to_variable = { USA_Mandates_Overall_Stability = USA_Pull_Out_Effect_Congo_Mandate }
	add_to_variable = { USA_Mandates_Overall_Stability = USA_Pull_Out_Effect_Mozamb_Mandate }


	subtract_from_variable = { USA_Pulled_Out_Backlash_Effect_Base = USA_Mandates_Overall_Stability } #This should be a decimal between 3 and 0

	if = {
		limit = {
			ANG = { has_government = authoritarian_democrat }
			MZB = { has_government = authoritarian_democrat }
			COG = { has_government = authoritarian_democrat }
		}
		divide_variable = { USA_Pulled_Out_Backlash_Effect_Base = 3 }
	}

	if = {
		limit = {
			AND = {
				COG = { has_government = authoritarian_democrat }
				NOT = {
					ANG = { has_government = authoritarian_democrat}
					MZB = { has_government = authoritarian_democrat }
				}
			}
		}
		divide_variable = { USA_Pulled_Out_Backlash_Effect_Base = 1 }
	}

	set_variable = { USA_Pulled_Out_Backlash_Effect_Political_Power = USA_Pulled_Out_Backlash_Effect_Base }
	set_variable = { USA_Pulled_Out_Backlash_Effect_Stability = USA_Pulled_Out_Backlash_Effect_Base }
	set_variable = { USA_Pulled_Out_Backlash_Effect_War_Support = USA_Pulled_Out_Backlash_Effect_Base }
	set_variable = { USA_Pulled_Out_Backlash_Effect_Popularity = USA_Pulled_Out_Backlash_Effect_Base }


	###########################################################################################
	#### Political Power
	###########################################################################################

	multiply_variable = { USA_Pulled_Out_Backlash_Effect_Political_Power = -50 }

	add_political_power = var:USA_Pulled_Out_Backlash_Effect_Political_Power

	###########################################################################################
	#### Stability/War Support
	###########################################################################################

	multiply_variable = { USA_Pulled_Out_Backlash_Effect_War_Support = -0.5}
	multiply_variable = { USA_Pulled_Out_Backlash_Effect_Stability = -0.5}

	add_stability = var:USA_Pulled_Out_Backlash_Effect_Stability
	add_war_support = var:USA_Pulled_Out_Backlash_Effect_War_Support

	###########################################################################################
	#### Popularity
	###########################################################################################

	set_variable = { USA_Pulled_Out_Backlash_Effect_Popularity_But_Pie_Chat = USA_Pulled_Out_Backlash_Effect_Popularity }
	set_variable = { USA_Pulled_Out_Backlash_Effect_Popularity_But_Pie_Chat_Subtract = USA_Pulled_Out_Backlash_Effect_Popularity_But_Pie_Chat }
	set_variable = { USA_Pulled_Out_Extremist_Popularity_Pie_Chart_Addition = USA_Pulled_Out_Backlash_Effect_Popularity }

	multiply_variable = { USA_Pulled_Out_Backlash_Effect_Popularity_But_Pie_Chat_Subtract = -0.1 }
	multiply_variable = { USA_Pulled_Out_Backlash_Effect_Popularity_But_Pie_Chat = 0.1 }
	multiply_variable = { USA_Pulled_Out_Extremist_Popularity_Pie_Chart_Addition = 0.025 }
	multiply_variable = { USA_Pulled_Out_Backlash_Effect_Popularity = -0.1 }

	### Add in the state level stuff (should subtract from the south, west, southwest, and add to the North and Midwest)

	### Popularity is simply adding the variable

	hidden_effect = {
		if = {
			limit = { has_country_flag = USA_64_R_RD }
			every_owned_state = {
				add_to_variable = { NPP_popularity = USA_Pulled_Out_Backlash_Effect_Popularity }
				subtract_from_variable = { RD_popularity = USA_Pulled_Out_Backlash_Effect_Popularity }
			}
	
		}
	
		if = {
			limit = { has_country_flag = USA_64_D_RD }
			every_owned_state = {
				add_to_variable = { NPP_popularity = USA_Pulled_Out_Backlash_Effect_Popularity }
				subtract_from_variable = { RD_popularity = USA_Pulled_Out_Backlash_Effect_Popularity }
			}
		}
	
		if = {
			limit = { has_country_flag = USA_64_C_NPP }
			every_owned_state = {
				subtract_from_variable = { NPP_popularity = USA_Pulled_Out_Backlash_Effect_Popularity }
				add_to_variable = { RD_popularity = USA_Pulled_Out_Backlash_Effect_Popularity }
			}
		}
		if = {
			limit = { has_country_flag = USA_64_FR_NPP }
			every_owned_state = {
				subtract_from_variable = { NPP_popularity = USA_Pulled_Out_Backlash_Effect_Popularity }
				add_to_variable = { RD_popularity = USA_Pulled_Out_Backlash_Effect_Popularity }
			}
		}
		
		if = {
			limit = { has_country_flag = USA_68_R_RD }
			every_owned_state = {
				add_to_variable = { NPP_popularity = USA_Pulled_Out_Backlash_Effect_Popularity }
				subtract_from_variable = { RD_popularity = USA_Pulled_Out_Backlash_Effect_Popularity }
			}
	
		}
	
		if = {
			limit = { has_country_flag = USA_68_D_RD }
			every_owned_state = {
				add_to_variable = { NPP_popularity = USA_Pulled_Out_Backlash_Effect_Popularity }
				subtract_from_variable = { RD_popularity = USA_Pulled_Out_Backlash_Effect_Popularity }
			}
		}
	
		if = {
			limit = { has_country_flag = USA_68_C_NPP }
			every_owned_state = {
				subtract_from_variable = { NPP_popularity = USA_Pulled_Out_Backlash_Effect_Popularity }
				add_to_variable = { RD_popularity = USA_Pulled_Out_Backlash_Effect_Popularity }
			}
		}
		if = {
			limit = { has_country_flag = USA_68_FR_NPP }
			every_owned_state = {
				subtract_from_variable = { NPP_popularity = USA_Pulled_Out_Backlash_Effect_Popularity }
				add_to_variable = { RD_popularity = USA_Pulled_Out_Backlash_Effect_Popularity }
			}
		}
	}

}



USA_calculate_OFN_Unity = { #I fucking hate git #wow rude

if = { ### Not bad at all
	limit = { check_variable = { OFN_unity > -100 } check_variable = { var = OFN_unity value = 3 compare = less_than_or_equals } }

	if = {
	 	limit = { NOT = { has_idea = USA_OFN_Buffs_1  } }

		add_ideas = USA_OFN_Buffs_1

		remove_ideas = USA_OFN_Buffs_2
		remove_ideas = USA_OFN_Buffs_3
		remove_ideas = USA_OFN_Buffs_4
		remove_ideas = USA_OFN_Buffs_5
		remove_ideas = USA_OFN_Buffs_6
		remove_ideas = USA_OFN_Buffs_7
		remove_ideas = USA_OFN_Buffs_8
		remove_ideas = USA_OFN_Buffs_9
		remove_ideas = USA_OFN_Buffs_10
	}
}

if = { ### Not too bad
	limit = { check_variable = { OFN_unity > 3 } check_variable = { var = OFN_unity value = 6 compare = less_than_or_equals } }

	if = {
		limit = { NOT = { has_idea = USA_OFN_Buffs_2  } }

		add_ideas = USA_OFN_Buffs_2

		remove_ideas = USA_OFN_Buffs_1
		remove_ideas = USA_OFN_Buffs_3
		remove_ideas = USA_OFN_Buffs_4
		remove_ideas = USA_OFN_Buffs_5
		remove_ideas = USA_OFN_Buffs_6
		remove_ideas = USA_OFN_Buffs_7
		remove_ideas = USA_OFN_Buffs_8
		remove_ideas = USA_OFN_Buffs_9
		remove_ideas = USA_OFN_Buffs_10
	}
}

if = { ### Mild at best
	limit = { check_variable = { OFN_unity > 6 } check_variable = { var = OFN_unity value = 9 compare = less_than_or_equals } }

	if = {
		limit = { NOT = { has_idea = USA_OFN_Buffs_3  } }

		add_ideas = USA_OFN_Buffs_3

		remove_ideas = USA_OFN_Buffs_1
		remove_ideas = USA_OFN_Buffs_2
		remove_ideas = USA_OFN_Buffs_4
		remove_ideas = USA_OFN_Buffs_5
		remove_ideas = USA_OFN_Buffs_6
		remove_ideas = USA_OFN_Buffs_7
		remove_ideas = USA_OFN_Buffs_8
		remove_ideas = USA_OFN_Buffs_9
		remove_ideas = USA_OFN_Buffs_10
	}
}

if = { ### Becoming worrying
	limit = { check_variable = { OFN_unity > 9 } check_variable = { var = OFN_unity value = 12 compare = less_than_or_equals } }

	if = {
		limit = { NOT = { has_idea = USA_OFN_Buffs_4 } }

		add_ideas = USA_OFN_Buffs_4

		remove_ideas = USA_OFN_Buffs_1
		remove_ideas = USA_OFN_Buffs_2
		remove_ideas = USA_OFN_Buffs_3
		remove_ideas = USA_OFN_Buffs_5
		remove_ideas = USA_OFN_Buffs_6
		remove_ideas = USA_OFN_Buffs_7
		remove_ideas = USA_OFN_Buffs_8
		remove_ideas = USA_OFN_Buffs_9
		remove_ideas = USA_OFN_Buffs_10
	}

}

if = { ### Minor Protests
	limit = { check_variable = { OFN_unity > 12 } check_variable = { var = OFN_unity value = 15 compare = less_than_or_equals } }

	if = {
		limit = { NOT = { has_idea = USA_OFN_Buffs_5 } }

		add_ideas = USA_OFN_Buffs_5

		remove_ideas = USA_OFN_Buffs_1
		remove_ideas = USA_OFN_Buffs_2
		remove_ideas = USA_OFN_Buffs_3
		remove_ideas = USA_OFN_Buffs_4
		remove_ideas = USA_OFN_Buffs_6
		remove_ideas = USA_OFN_Buffs_7
		remove_ideas = USA_OFN_Buffs_8
		remove_ideas = USA_OFN_Buffs_9
		remove_ideas = USA_OFN_Buffs_10

	}
}

if = { ### Common protests
	limit = { check_variable = { OFN_unity > 15 } check_variable = { var = OFN_unity value = 18 compare = less_than_or_equals } }

	if = {
		limit = { NOT = { has_idea = USA_OFN_Buffs_6 } }

		add_ideas = USA_OFN_Buffs_6

		remove_ideas = USA_OFN_Buffs_1
		remove_ideas = USA_OFN_Buffs_2
		remove_ideas = USA_OFN_Buffs_3
		remove_ideas = USA_OFN_Buffs_4
		remove_ideas = USA_OFN_Buffs_5
		remove_ideas = USA_OFN_Buffs_7
		remove_ideas = USA_OFN_Buffs_8
		remove_ideas = USA_OFN_Buffs_9
		remove_ideas = USA_OFN_Buffs_10
	}
}

if = { ### Huge protests
	limit = { check_variable = { OFN_unity > 18 } check_variable = { var = OFN_unity value = 21 compare = less_than_or_equals } }

	if = {
		limit = { NOT = { has_idea = USA_OFN_Buffs_7 } }

		add_ideas = USA_OFN_Buffs_7

		remove_ideas = USA_OFN_Buffs_1
		remove_ideas = USA_OFN_Buffs_2
		remove_ideas = USA_OFN_Buffs_3
		remove_ideas = USA_OFN_Buffs_4
		remove_ideas = USA_OFN_Buffs_5
		remove_ideas = USA_OFN_Buffs_6
		remove_ideas = USA_OFN_Buffs_8
		remove_ideas = USA_OFN_Buffs_9
		remove_ideas = USA_OFN_Buffs_10
	}

}

if = { ### 1968 Democratic Convention
	limit = { check_variable = { OFN_unity > 21 } check_variable = { var = OFN_unity value = 24 compare = less_than_or_equals } }

	if = {
		limit = { NOT = { has_idea = USA_OFN_Buffs_8 } }

		add_ideas = USA_OFN_Buffs_8

		remove_ideas = USA_OFN_Buffs_1
		remove_ideas = USA_OFN_Buffs_2
		remove_ideas = USA_OFN_Buffs_3
		remove_ideas = USA_OFN_Buffs_4
		remove_ideas = USA_OFN_Buffs_5
		remove_ideas = USA_OFN_Buffs_6
		remove_ideas = USA_OFN_Buffs_7
		remove_ideas = USA_OFN_Buffs_9
		remove_ideas = USA_OFN_Buffs_10
	}
}

if = { ### Cities are being burned out
	limit = { check_variable = { OFN_unity > 24 } check_variable = { var = OFN_unity value = 27 compare = less_than_or_equals } }

	if = {
		limit = { NOT = { has_idea = USA_OFN_Buffs_9 } }

		add_ideas = USA_OFN_Buffs_9

		remove_ideas = USA_OFN_Buffs_1
		remove_ideas = USA_OFN_Buffs_2
		remove_ideas = USA_OFN_Buffs_3
		remove_ideas = USA_OFN_Buffs_4
		remove_ideas = USA_OFN_Buffs_5
		remove_ideas = USA_OFN_Buffs_6
		remove_ideas = USA_OFN_Buffs_7
		remove_ideas = USA_OFN_Buffs_8
		remove_ideas = USA_OFN_Buffs_10
	}
}

	if = { ### MLK assassination riots turned up to a ten
		limit = { check_variable = { OFN_unity > 27 } check_variable = { var = OFN_unity value = 1000 compare = less_than_or_equals } }

		if = {
			limit = { NOT = { has_idea = USA_OFN_Buffs_10 } }

			add_ideas = USA_OFN_Buffs_10

			remove_ideas = USA_OFN_Buffs_1
			remove_ideas = USA_OFN_Buffs_2
			remove_ideas = USA_OFN_Buffs_3
			remove_ideas = USA_OFN_Buffs_4
			remove_ideas = USA_OFN_Buffs_5
			remove_ideas = USA_OFN_Buffs_6
			remove_ideas = USA_OFN_Buffs_7
			remove_ideas = USA_OFN_Buffs_8
			remove_ideas = USA_OFN_Buffs_9
		}
	}
}

###########################################
############## MONTHLY PULSE ##############
###########################################

USA_monthly_pulse_effect = {
	USA_reevaluate_CR_discontent = yes
	USA_calculate_OFN_Unity = yes
	#country_event = { id = USA.124 } #BASICALLY US_pie_adjustment_effect = yes , but it only works that way for some reason
	#US_pie_adjustment_effect = yes

	####ICW
	if = {
		limit = {
				NOT = { has_country_flag = USA_SAF_WAR_Insurgency_Activated }
				check_variable = { USA_IW_Investment > 0 }
				check_variable = { USA_sent_ICW_guys = 1 }
			}
		USA_ICW_scripted_effect = yes
	}

	if = {
		limit = {
			has_country_flag = USA_RFK_Can_Get_Shot_Now
			has_country_flag = USA_64_C_NPP
			NOT = { has_country_flag = USA_presidential_elections }
		}
		USA_RFK_Assassination = yes
	}

	#### SAF WAR

	if = {
		limit = { has_country_flag = USA_In_The_SAF_WAR }
		USA_SAF_WAR_Discontent_Monthly_Effect = yes
	}

	##### Insurgency
	if = {
		limit = { has_country_flag = USA_SAF_WAR_Insurgency_Activated }
		USA_SAF_WAR_Insurgency_Discontent_Monthly_Effect_Calculator = yes
		USA_SAF_WAR_Insurgency_Investment_Monthly_Effect_Calculator = yes

		if = {
			limit = { has_country_flag = USA_SAF_WAR_Insurgency_War_Crime_Timer_On } #If you have the flag, it fires an event that clears it, ensuring you can stack war crimes on top of each other
			country_event = { id = USA.saf.effects.3 days = 29 }
		}
	}

	### Bennett, moved from the pulse flag

	if = { limit = { has_country_flag = USA_64_D_RD }
		USA_WFB_monthly_pulse = yes #updates values
	}

	if = { 
		limit = {
			has_completed_focus = USA_gld_68_dealing_with_the_labor_unions
			has_country_flag = USA_68_D_RD
			NOT = { has_country_flag = GLD_union_busting_over }
			}	
		USA_GLD_discovery_check = yes
	}

	### Glenn shit
	if = { limit = { has_country_flag = USA_68_R_RD }
	
		if = {
			limit = {
				check_variable = { USA_GLN_Public_Support > 60 }
				has_country_flag = USA_GLN_passed_social_security
			}
			country_event = { id = glenn.space.16 days = 5 }
		}
	
		if = {
			limit = {
				check_variable = { USA_GLN_Public_Support > 80 }
			}
			country_event = { id = glenn.space.17 days = 5 }
		}
	
		### Events
	
		if = {
			limit = {
				check_variable = { USA_GLN_Public_Support < 30 }
				check_variable = { USA_GLN_Public_Support_Bad_Events = 0 }
			}
			country_event = { id = glenn.space.11 days = 5 }
			add_to_variable = { USA_GLN_Public_Support_Bad_Events = 1 }
		}

		else_if = {
			limit = {
				check_variable = { USA_GLN_Public_Support < 25 }
				check_variable = { USA_GLN_Public_Support_Bad_Events = 1 }
			}
			country_event = { id = glenn.space.12 days = 5 }
			add_to_variable = { USA_GLN_Public_Support_Bad_Events = 1 }
		}

		else_if = {
			limit = {
				check_variable = { USA_GLN_Public_Support < 20 }
				check_variable = { USA_GLN_Public_Support_Bad_Events = 2 }
			}
			country_event = { id = glenn.space.13 days = 5 }
			add_to_variable = { USA_GLN_Public_Support_Bad_Events = 1 }
		}

		else_if = {
			limit = {
				check_variable = { USA_GLN_Public_Support < 15 }
				check_variable = { USA_GLN_Public_Support_Bad_Events = 3 }
			}
			country_event = { id = glenn.space.14 days = 5 }
			add_to_variable = { USA_GLN_Public_Support_Bad_Events = 1 }
		} 
		
		else_if = {
			limit = {
				check_variable = { USA_GLN_Public_Support < 10 }
				check_variable = { USA_GLN_Public_Support_Bad_Events = 4 }
			}
			country_event = { id = glenn.space.15 days = 5 } #the scandel to end all scandels
			add_to_variable = { USA_GLN_Public_Support_Bad_Events = 1 }
		}

	}

	## Harrington stuff
	if = {
		limit = { has_country_flag = USA_68_C_NPP }
		USA_HAR_fatigue_pulse = yes
		USA_HAR_fading_enthusiaism = yes
	}
	#every_owned_state = {
	#	limit = {
	#		can_have_elections_in_state = yes
	#	}
	#	USA_clamp_state_popularities = yes
	#}
}
USA_ICW_scripted_effect = {
	log = "[GetDateText]: [Root.GetName]: ICW monthly pulse"
			if = {
				limit = {
					OR = {
						check_variable = { USA_INS_CW_Domestic_Support > 80 }
						check_variable = { USA_IW_Investment = 0 } }
					}
				remove_ideas = USA_ICW_Discontent_1
				remove_ideas = USA_ICW_Discontent_2
				remove_ideas = USA_ICW_Discontent_3
				remove_ideas = USA_ICW_Discontent_4
				remove_ideas = USA_ICW_Discontent_5
			}

			if = {
				limit = { check_variable = { USA_INS_CW_Domestic_Support < 50 } }
				add_ideas = USA_ICW_Discontent_1
				remove_ideas = USA_ICW_Discontent_2
				remove_ideas = USA_ICW_Discontent_3
				remove_ideas = USA_ICW_Discontent_4
				remove_ideas = USA_ICW_Discontent_5
				country_event = { id = USA_RD_INS.10 days = 2 }
			}

			if = {
				limit = { check_variable = { USA_INS_CW_Domestic_Support < 40 }  }
				add_ideas = USA_ICW_Discontent_2
				remove_ideas = USA_ICW_Discontent_1
				remove_ideas = USA_ICW_Discontent_3
				remove_ideas = USA_ICW_Discontent_4
				remove_ideas = USA_ICW_Discontent_5
				country_event = { id = USA_RD_INS.11 days = 4 }
			}

			if = {
				limit = { check_variable = { USA_INS_CW_Domestic_Support < 30 }  }
				add_ideas = USA_ICW_Discontent_3
				remove_ideas = USA_ICW_Discontent_1
				remove_ideas = USA_ICW_Discontent_2
				remove_ideas = USA_ICW_Discontent_4
				remove_ideas = USA_ICW_Discontent_5
				country_event = { id = USA_RD_INS.12 days = 5 }
			}

			if = {
				limit = { check_variable = { USA_INS_CW_Domestic_Support < 20 } }
				add_ideas = USA_ICW_Discontent_4
				remove_ideas = USA_ICW_Discontent_1
				remove_ideas = USA_ICW_Discontent_2
				remove_ideas = USA_ICW_Discontent_3
				remove_ideas = USA_ICW_Discontent_5
				country_event = { id = USA_RD_INS.13 days = 8 }
			}

			if = {
				limit = { check_variable = { USA_INS_CW_Domestic_Support < 10 } }
				add_ideas = USA_ICW_Discontent_5
				remove_ideas = USA_ICW_Discontent_1
				remove_ideas = USA_ICW_Discontent_2
				remove_ideas = USA_ICW_Discontent_3
				remove_ideas = USA_ICW_Discontent_4
				country_event = { id = USA_RD_INS.14 days = 10 }
			}

			if = {
				limit = {
					check_variable = { USA_INS_CW_Domestic_Support > 80 }
					OR = {
						has_government = social_democrat
						has_government = authoritarian_democrat
					}
					check_variable = { USA_IW_Investment > 0 }
				}
				every_owned_state = {
					limit = { can_have_elections_in_state = yes }
					add_to_variable = { NPP_popularity = 0.005 }
				}
			}

			if = {
				limit = {
					check_variable = { USA_INS_CW_Domestic_Support > 80 }
					OR = {
						has_government = social_conservative
						has_government = social_liberal
					}
					check_variable = { USA_IW_Investment > 0 }
				}
				every_owned_state = {
					limit = { can_have_elections_in_state = yes }
					add_to_variable = { RD_popularity = 0.005 }
				}
			}

			if = {
				limit = {
					check_variable = { USA_INS_CW_Domestic_Support < 80 }
					check_variable = { USA_INS_CW_RD_Support < USA_INS_CW_NPP_Support }
					check_variable = { USA_INS_CW_RD_Support < 81 }
					check_variable = { USA_INS_CW_NPP_Support < 81 }
					check_variable = { USA_IW_Investment > 0 }
				}
				every_owned_state = {
					limit = { can_have_elections_in_state = yes }
					add_to_variable = { RD_popularity = 0.005 }
				}
			}

			if = {
				limit = {
					check_variable = { USA_INS_CW_Domestic_Support < 80 }
					check_variable = { USA_INS_CW_NPP_Support < USA_INS_CW_RD_Support }
					check_variable = { USA_INS_CW_RD_Support < 81 }
					check_variable = { USA_INS_CW_NPP_Support < 81 }
					check_variable = { USA_IW_Investment > 0 }
				}
				every_owned_state = {
					limit = { can_have_elections_in_state = yes }
					add_to_variable = { NPP_popularity = 0.005 }
				}
			}

			if = {
				limit = {
					check_variable = { USA_INS_CW_Domestic_Support < 80 }
					check_variable = { USA_INS_CW_RD_Support > 80 }
					check_variable = { USA_INS_CW_NPP_Support >  80 }
					check_variable = { USA_IW_Investment > 0 }
				}
				every_owned_state = {
					limit = { can_have_elections_in_state = yes }
					add_to_variable = { NPP_popularity = 0.005 }
					add_to_variable = { NPP_L_bonus_popularity = 0.005 }
					add_to_variable = { NPP_Y_bonus_popularity = 0.005 }
				}
			}
			if = {
				limit = { NOT = { has_country_flag = USA_INS_1_YEAR } }
				subtract_from_variable = { USA_INS_CW_NPP_Support = 1 }
				subtract_from_variable = { USA_INS_CW_RD_Support = 1 }
				subtract_from_variable = { USA_INS_CW_Domestic_Support = 1 }
			}
			if = {
				limit = { has_country_flag = USA_INS_1_YEAR }
				subtract_from_variable = { USA_INS_CW_Domestic_Support = 2 }
				subtract_from_variable = { USA_INS_CW_NPP_Support = 2 }
				subtract_from_variable = { USA_INS_CW_RD_Support = 2}
			}

			clamp_variable = {
				var = USA_INS_CW_Domestic_Support
				min = 0
				max = 100
			}
			USA_Calculate_Total_Support = yes
		}
########################################
USA_1970_ICW_check = {
	if = { #NPP
		limit = {
			OR = {
				has_government = social_democrat
				has_government = authoritarian_democrat
			}
		}
		if = {
			limit = { NOT = { has_country_flag = USA_INS_CW_active } } #WAR IS FINISHED
			set_country_flag = USA_ICW_OVER_1970
			if = { #VICTORY
				limit = {
					OR = {
						NOT = { country_exists = INS }
						INS = { has_capitulated = yes }
					}
				}
				every_owned_state = {
					limit = { can_have_elections_in_state = yes }
					add_to_variable = { NPP_popularity = 0.02 }
				}
			}
			else = {#LOSS
				every_owned_state = {
					limit = { can_have_elections_in_state = yes }
					subtract_from_variable = { NPP_popularity = 0.02 }
					add_to_variable = { NPP_L_bonus_popularity = 0.02 }
					add_to_variable = { NPP_Y_bonus_popularity = 0.02 }
				}
			}
		}

		else = {
			if = { # OFN is winning
				limit = {
					OR = {
						check_variable = { FRI_surrender = INS_surrender }
						check_variable = { INS_surrender > FRI_surrender }
					}
				}
				every_owned_state = {
					limit = { can_have_elections_in_state = yes }
					add_to_variable = { NPP_popularity = 0.025 }
				}
			}
			else = { # OFN is losing
				every_owned_state = {
					limit = { can_have_elections_in_state = yes }
					add_to_variable = { NPP_popularity = -0.05 }
					add_to_variable = { NPP_L_bonus_popularity = 0.05 }
					add_to_variable = { NPP_Y_bonus_popularity = 0.05 }
					if = {
						limit = {
							OR = {
								check_variable = { nationality = 88 }
								check_variable = { nationality = 83 }
								check_variable = { nationality = 84 }
								check_variable = { nationality = 86 }
							}
						}
						add_to_variable = { NPP_popularity = -0.025 }
					}
					if = {
						limit = { check_variable = { NPP_Y_bonus_popularity > 0.15 } }
						add_to_variable = {NPP_Y_bonus_popularity = 0.05 }
					}
					if = {
						limit = { check_variable = { NPP_L_bonus_popularity > 0.15 } }
						add_to_variable = {NPP_L_bonus_popularity = 0.05 }
					}
				}
			}
		}
	}
	if = { #RD
		limit = {
			OR = {
				has_government = social_liberal
				has_government = social_conservative
			}
		}
		if = {
			limit = { NOT = { has_country_flag = USA_INS_CW_active } } #WAR IS FINISHED
			if = { # Victory
				limit = {
					OR = {
						NOT = { country_exists = INS }
						INS = { has_capitulated = yes }
					}
				}
				every_owned_state = {
					limit = { can_have_elections_in_state = yes }
					add_to_variable = { RD_popularity = 0.02 }
				}
			}
			else = { # Defeat
				every_owned_state = {
					limit = { can_have_elections_in_state = yes }
					subtract_from_variable = { RD_popularity = 0.02 }
					add_to_variable = { NPP_L_bonus_popularity = 0.02 }
					add_to_variable = { NPP_Y_bonus_popularity = 0.02 }
				}
			}
		}

		else = {
			if = {
				limit = { # OFN is winning
					OR = {
						check_variable = { FRI_surrender = INS_surrender }
						check_variable = { INS_surrender > FRI_surrender }
					}
				}
				every_owned_state = {
					limit = { can_have_elections_in_state = yes }
					add_to_variable = { RD_popularity = 0.025 }
				}
			}
			else = { # OFN is losing
				every_owned_state = {
					limit = { can_have_elections_in_state = yes }
					subtract_from_variable = { RD_popularity = 0.025 }
					add_to_variable = { NPP_L_bonus_popularity = 0.05 }
					add_to_variable = { NPP_Y_bonus_popularity = 0.05 }
					if = {
						limit = {
							OR = {
								check_variable = { nationality = 88 }
								check_variable = { nationality = 83 }
								check_variable = { nationality = 84 }
								check_variable = { nationality = 86 }
							}
						}
						subtract_from_variable = { RD_popularity = 0.025 }
					}
					if = {
						limit = { check_variable = { NPP_Y_bonus_popularity > 0.15 } }
						add_to_variable = { NPP_Y_bonus_popularity = 0.05 }
					}
					if = {
						limit = { check_variable = { NPP_L_bonus_popularity > 0.15 } }
						add_to_variable = { NPP_L_bonus_popularity = 0.05 }
					}
				}
			}
		}
	}
}

USA_1972_ICW_check = {
	if = {
		limit = { has_country_flag = USA_INS_CW_active }
		if = { #NPP
			limit = {
				OR = {
					has_government = social_democrat
					has_government = authoritarian_democrat
				}
			}
			if = {
				limit = { # OFN is winning
					OR = {
						check_variable = { FRI_surrender = INS_surrender }
						check_variable = { INS_surrender > FRI_surrender }
					}
				}
				every_owned_state = {
					limit = { can_have_elections_in_state = yes }
					add_to_variable = { NPP_popularity = 0.025 }
				}
			}
			else = { # OFN is losing
				every_owned_state = {
					limit = { can_have_elections_in_state = yes }
					subtract_from_variable = { NPP_popularity = 0.05 }
					add_to_variable = { NPP_L_bonus_popularity = 0.05 }
					add_to_variable = { NPP_Y_bonus_popularity = 0.05 }
					if = {
						limit = {
							OR = {
								check_variable = { nationality = 88 }
								check_variable = { nationality = 83 }
								check_variable = { nationality = 84 }
								check_variable = { nationality = 86 }
							}
						}
						subtract_from_variable = { NPP_popularity = 0.025 }
					}
					if = {
						limit = { check_variable = { NPP_Y_bonus_popularity > 0.15 } }
						add_to_variable = {NPP_Y_bonus_popularity = 0.1 }
					}
					if = {
						limit = { check_variable = { NPP_L_bonus_popularity > 0.15 } }
						add_to_variable = {NPP_L_bonus_popularity = 0.1 }
					}
				}
			}
		}
	}
	else_if = { #RD
		limit = {
			OR = {
				has_government = social_liberal
				has_government = social_conservative
			}
		}

		if = {
			limit = { # OFN is winning
				OR = {
					check_variable = { FRI_surrender = INS_surrender }
					check_variable = { INS_surrender > FRI_surrender }
				}
			}
			every_owned_state = {
				limit = { can_have_elections_in_state = yes }
				add_to_variable = { RD_popularity = 0.025 }
			}
		}
		else = { # OFN is losing
			every_owned_state = {
				limit = { can_have_elections_in_state = yes }
				subtract_from_variable = { RD_popularity = 0.05 }
				add_to_variable = { NPP_L_bonus_popularity = 0.05 }
				add_to_variable = { NPP_Y_bonus_popularity = 0.05 }
				if = {
					limit = {
						OR = {
							check_variable = { nationality = 88 }
							check_variable = { nationality = 83 }
							check_variable = { nationality = 84 }
							check_variable = { nationality = 86 }
						}
					}
					subtract_from_variable = { RD_popularity = 0.025 }
				}
				if = {
					limit = { check_variable = { NPP_Y_bonus_popularity > 0.15 } }
					add_to_variable = {NPP_Y_bonus_popularity = 0.1 }
				}
				if = {
					limit = { check_variable = { NPP_L_bonus_popularity > 0.15 } }
					add_to_variable = {NPP_L_bonus_popularity = 0.1 }
				}
			}
		}
	}
}


US_pie_adjustment_effect = {	
	clamp_variable = { #make sure to clamp any support variable that can change!
   		var = USA_NPP_Unity
    	min = @MINIMUM_UNITY
    	max = @MAXIMUM_UNITY
	}
	clamp_variable = { #make sure to clamp any support variable that can change!
   		var = USA_RD_Unity
    	min = @MINIMUM_UNITY
    	max = @MAXIMUM_UNITY
	}

	set_variable = { RD_D_pie_var = 0}
	set_variable = { RD_R_pie_var = 0}
	set_variable = { NPP_R_pie_var = 0}
	set_variable = { NPP_FR_pie_var = 0}
	set_variable = { NPP_C_pie_var = 0}
	set_variable = { NPP_L_pie_var = 0}
	set_variable = { pie_var_total = 0}
	every_owned_state = {
		limit = { can_have_elections_in_state = yes }
		USA_clamp_state_popularities = yes
		US_adjust_pie_state = yes
	}
	add_to_variable = { pie_var_total = RD_D_pie_var }
	add_to_variable = { pie_var_total = RD_R_pie_var }
	add_to_variable = { pie_var_total = NPP_R_pie_var }
	add_to_variable = { pie_var_total = NPP_FR_pie_var }
	add_to_variable = { pie_var_total = NPP_C_pie_var }
	add_to_variable = { pie_var_total = NPP_L_pie_var }

	divide_variable = { RD_D_pie_var = pie_var_total }
	divide_variable = { RD_R_pie_var = pie_var_total }
	divide_variable = { NPP_R_pie_var = pie_var_total }
	divide_variable = { NPP_FR_pie_var = pie_var_total }
	divide_variable = { NPP_C_pie_var = pie_var_total }
	divide_variable = { NPP_L_pie_var = pie_var_total }

	multiply_variable = { RD_D_pie_var = 100 }
	multiply_variable = { RD_R_pie_var = 100 }
	multiply_variable = { NPP_R_pie_var = 100 }
	multiply_variable = { NPP_FR_pie_var = 100 }
	multiply_variable = { NPP_C_pie_var = 100 }
	multiply_variable = { NPP_L_pie_var = 100 }

	round_variable =  RD_D_pie_var
	round_variable =  RD_R_pie_var
	round_variable =  NPP_R_pie_var
	round_variable =  NPP_FR_pie_var
	round_variable =  NPP_C_pie_var
	round_variable =  NPP_L_pie_var

	set_temp_variable = { rounded_total = 0 } #Will store the total rounded %age

	add_to_temp_variable = { rounded_total = RD_D_pie_var }
	add_to_temp_variable = { rounded_total = RD_R_pie_var }
	add_to_temp_variable = { rounded_total = NPP_R_pie_var }
	add_to_temp_variable = { rounded_total = NPP_FR_pie_var }
	add_to_temp_variable = { rounded_total = NPP_C_pie_var }
	add_to_temp_variable = { rounded_total = NPP_L_pie_var }

	set_temp_variable = { rounding_error = rounded_total}
	add_to_temp_variable = { rounding_error = -100 } #Basically, the rounding error for our total of popularities. Commonly equal to 101

	if = {
	limit = { 
		check_variable = {
			var = rounding_error
			value = 0
			compare = not_equals
			}
		}
		if = { #fix the rounding error by changing one party big enough for the rounding not to be seen too much (cant bother to compute the max)
			limit = { 
				check_variable = { RD_D_pie_var > 15 }
				}
			subtract_from_variable = { RD_D_pie_var = rounding_error }
		}
		else_if = { 
			limit = { 
				check_variable = { RD_R_pie_var > 15 }
				}
			subtract_from_variable = { RD_R_pie_var = rounding_error }
		}
		else_if = { 
			limit = { 
				check_variable = { NPP_FR_pie_var > 15 }
				}
			subtract_from_variable = { NPP_FR_pie_var = rounding_error }
		}
		else_if = { 
			limit = { 
				check_variable = { NPP_C_pie_var > 15 }
				}
			subtract_from_variable = { NPP_C_pie_var = rounding_error }
		}
		else_if = { 
			limit = { 
				check_variable = { NPP_R_pie_var > 15 }
				}
			subtract_from_variable = { NPP_R_pie_var = rounding_error }
		}
		else = { 
			subtract_from_variable = { NPP_L_pie_var = rounding_error }
		}
	}
	#log = "[?NPP_L_pie_var] [?NPP_FR_pie_var] [?NPP_C_pie_var] [?NPP_R_pie_var] [?RD_R_pie_var] [?RD_D_pie_var]"
	hidden_effect = {
		set_popularities = {
			communist = NPP_L_pie_var
			ultranational_socialism = 0
			socialist = 0
			social_democrat = NPP_C_pie_var
			social_liberal = RD_R_pie_var
			market_liberal = 0
			social_conservative = RD_D_pie_var
			authoritarian_democrat = NPP_FR_pie_var
			despotism = 0
			fascism = 0
			national_socialism = NPP_R_pie_var
			burgundian_system = 0
		}
	}
}

US_adjust_pie_state = {
	#set temp variables to be used in the election
	set_temp_variable = { RD_R_popularity  = RD_R_bonus_popularity }
	set_temp_variable = { RD_D_popularity  = RD_D_bonus_popularity }
	set_temp_variable = { NPP_L_popularity  = NPP_L_bonus_popularity }
	set_temp_variable = { NPP_C_popularity  = NPP_C_bonus_popularity }
	set_temp_variable = { NPP_R_popularity  = NPP_Y_bonus_popularity }
	set_temp_variable = { NPP_FR_popularity = NPP_FR_bonus_popularity }

	################################################################

	#1
	#make party pop percentages
	#convert temp party pops into percentages
	set_temp_variable = { temp_RD_pop = RD_popularity }
	set_temp_variable = { temp_NPP_pop = NPP_popularity }
	set_temp_variable = { total_party_pop = RD_popularity }
	add_to_temp_variable = { total_party_pop = NPP_popularity }

	divide_temp_variable = { temp_RD_pop = total_party_pop }
	divide_temp_variable = { temp_NPP_pop = total_party_pop }
	################################################################

	#2
	#make faction pops internal percentages within the party
	#convert temp faction pops into percentages based on their importance of the faction
	#add together RD faction pops, to make a total
	set_temp_variable = { RD_total_pop = RD_R_popularity }
	add_to_temp_variable = { RD_total_pop = RD_D_popularity }



	#add together NPP faction pops, to make a total
	set_temp_variable = { NPP_total_pop = NPP_L_popularity }
	add_to_temp_variable = { NPP_total_pop = NPP_C_popularity }
	add_to_temp_variable = { NPP_total_pop = NPP_R_popularity }
	add_to_temp_variable = { NPP_total_pop = NPP_FR_popularity }

	#divide the temporary faction variables with the sum of its party's factions' popularity
	divide_temp_variable = { RD_R_popularity = RD_total_pop }
	divide_temp_variable = { RD_D_popularity = RD_total_pop }
	divide_temp_variable = { NPP_L_popularity = NPP_total_pop }
	divide_temp_variable = { NPP_C_popularity = NPP_total_pop }
	divide_temp_variable = { NPP_R_popularity = NPP_total_pop }
	divide_temp_variable = { NPP_FR_popularity = NPP_total_pop }

	################################################################

	#3
	#multiply party pop and faction pop
	#RD-D
	multiply_temp_variable = { RD_R_popularity = temp_RD_pop }
	#RD-R
	multiply_temp_variable = { RD_D_popularity = temp_RD_pop }
	#NPP-R
	multiply_temp_variable = { NPP_R_popularity = temp_NPP_pop }
	#NPP-FR
	multiply_temp_variable = { NPP_FR_popularity = temp_NPP_pop }
	#NPP-C
	multiply_temp_variable = { NPP_C_popularity = temp_NPP_pop }
	#NPP-L
	multiply_temp_variable = { NPP_L_popularity = temp_NPP_pop }
	################################################################
	#4
	#multiply faction pop' with population
	#RD-D
	multiply_temp_variable = { RD_D_popularity = state_population_k }
	#RD-R
	multiply_temp_variable = { RD_R_popularity = state_population_k }
	#NPP-R
	multiply_temp_variable = { NPP_R_popularity = state_population_k }
	#NPP-FR
	multiply_temp_variable = { NPP_FR_popularity = state_population_k }
	#NPP-C
	multiply_temp_variable = { NPP_C_popularity = state_population_k }
	#NPP-L
	multiply_temp_variable = { NPP_L_popularity = state_population_k }

	#5
	#add to pre-pie vars
	add_to_variable = { USA.RD_D_pie_var = RD_D_popularity }
	add_to_variable = { USA.RD_R_pie_var = RD_R_popularity }
	add_to_variable = { USA.NPP_R_pie_var = NPP_R_popularity }
	add_to_variable = { USA.NPP_FR_pie_var = NPP_FR_popularity }
	add_to_variable = { USA.NPP_C_pie_var = NPP_C_popularity }
	add_to_variable = { USA.NPP_L_pie_var = NPP_L_popularity }
}

#_____________________________
#ECONOMY EXPECTATION EFFECTS
US_set_eco_expectation_1 = {
	set_variable = { US_economy_expectation_1 = GDP }
	set_variable = { US_temp_growth = GDP_growth }
	add_to_variable = { US_temp_growth = 1.001 }
	multiply_variable = {US_economy_expectation_1 = US_temp_growth}
	add_to_variable = { US_temp_growth = 0.001}
	multiply_variable = {US_economy_expectation_1 = US_temp_growth}
	add_to_variable = { US_temp_growth = 0.002}
	multiply_variable = {US_economy_expectation_1 = US_temp_growth}
	add_to_variable = { US_temp_growth = 0.003}
	multiply_variable = {US_economy_expectation_1 = US_temp_growth}
	log = "[GetDateText]: [Root.GetName]: USA eco GDP is [?GDP]. Expectation is [?US_economy_expectation_1]"
}

US_check_eco_expectation_1 = {
	log = "[GetDateText]: [Root.GetName]: USA eco Expectation was [?US_economy_expectation_1]. GDP is [?GDP]."
	if = {
		limit = {
			OR = {
				check_variable = { GDP > US_economy_expectation_1}
				check_variable = { GDP = US_economy_expectation_1}
			}
		}
		US_eco_expectation_win = yes
		log = "[GetDateText]: [Root.GetName]: USA eco Expectation win"
	}
	else_if = {
		limit = { check_variable = {GDP < US_economy_expectation_1}}
		US_eco_expectation_fail = yes
		log = "[GetDateText]: [Root.GetName]: Eco Expectation lose"
	}
}

US_set_eco_expectation_2 = {
	set_variable = { US_economy_expectation_2 = GDP }
	set_variable = { US_temp_growth = GDP_growth }
	add_to_variable = { US_temp_growth = 1.001 }
	multiply_variable = {US_economy_expectation_2 = US_temp_growth}
	add_to_variable = { US_temp_growth = 0.002}
	multiply_variable = {US_economy_expectation_2 = US_temp_growth}
	add_to_variable = { US_temp_growth = 0.003}
	multiply_variable = {US_economy_expectation_2 = US_temp_growth}
	add_to_variable = { US_temp_growth = 0.004}
	multiply_variable = {US_economy_expectation_2 = US_temp_growth}
	log = "[GetDateText]: [Root.GetName]: USA eco GDP is [?GDP]. Expectation is [?US_economy_expectation_2]"
}

US_check_eco_expectation_2 = {
	if = {
		limit = {
			OR = {
				check_variable = { GDP > US_economy_expectation_2}
				check_variable = { GDP = US_economy_expectation_2}
			}
		}
		US_eco_expectation_win = yes
		log = "[GetDateText]: [Root.GetName]: USA eco Expectation win"
	}
	else_if = {
		limit = { check_variable = {GDP < US_economy_expectation_2}}
		US_eco_expectation_fail = yes
		log = "[GetDateText]: [Root.GetName]: Eco Expectation lose"
	}
}
US_eco_expectation_win = {
	if = {
		limit = { check_variable = { ROOT.presidents_party = 1 } } #REP
		every_owned_state = {
			limit  = { can_have_elections_in_state = yes}
			add_to_variable = { RD_D_popularity = 0.03}
			add_to_variable = { RD_popularity = 0.03}
		}
	}
	else_if = {
		limit = { check_variable = { ROOT.presidents_party = 2 } } #DEM
		every_owned_state = {
			limit  = { can_have_elections_in_state = yes}
			add_to_variable = { RD_R_popularity = 0.03}
			add_to_variable = { RD_popularity = 0.03}
		}
	}
	else_if = {
		limit = { check_variable = { ROOT.presidents_party = 3 } } #LEFT
		every_owned_state = {
			limit  = { can_have_elections_in_state = yes}
			add_to_variable = { NPP_L_bonus_popularity = 0.03}
			add_to_variable = { NPP_popularity = 0.03}
		}
	}
	else_if = {
		limit = { check_variable = { ROOT.presidents_party = 4 } } #CENTER
		every_owned_state = {
			limit  = { can_have_elections_in_state = yes}
			add_to_variable = { NPP_C_bonus_popularity = 0.03}
			add_to_variable = { NPP_popularity = 0.03}
		}
	}
	else_if = {
		limit = { check_variable = { ROOT.presidents_party = 5 } } #YOCKEY
		every_owned_state = {
			limit  = { can_have_elections_in_state = yes}
			add_to_variable = { NPP_Y_bonus_popularity = 0.03}
			add_to_variable = { NPP_popularity = 0.03}
		}
	}
	else_if = {
		limit = { check_variable = { ROOT.presidents_party = 6 } } #FAR RIGHT
		every_owned_state = {
			limit  = { can_have_elections_in_state = yes}
			add_to_variable = { NPP_FR_bonus_popularity = 0.03}
			add_to_variable = { NPP_popularity = 0.03}
		}
	}
}
US_eco_expectation_fail = {
	if = {
		limit = { check_variable = { ROOT.presidents_party = 1 } } #REP
		every_owned_state = {
			limit  = { can_have_elections_in_state = yes}
			add_to_variable = { RD_D_popularity = -0.03}
			add_to_variable = { RD_popularity = -0.03}
		}
	}
	else_if = {
		limit = { check_variable = { ROOT.presidents_party = 2 } } #DEM
		every_owned_state = {
			limit  = { can_have_elections_in_state = yes}
			add_to_variable = { RD_R_popularity = -0.03}
			add_to_variable = { RD_popularity = -0.03}
		}
	}
	else_if = {
		limit = { check_variable = { ROOT.presidents_party = 3 } } #LEFT
		every_owned_state = {
			limit  = { can_have_elections_in_state = yes}
			add_to_variable = { NPP_L_bonus_popularity = -0.03}
			add_to_variable = { NPP_popularity = -0.03}
		}
	}
	else_if = {
		limit = { check_variable = { ROOT.presidents_party = 4 } } #CENTER
		every_owned_state = {
			limit  = { can_have_elections_in_state = yes}
			add_to_variable = { NPP_C_bonus_popularity = -0.03}
			add_to_variable = { NPP_popularity = -0.03}
		}
	}
	else_if = {
		limit = { check_variable = { ROOT.presidents_party = 5 } } #YOCKEY
		every_owned_state = {
			limit  = { can_have_elections_in_state = yes}
			add_to_variable = { NPP_Y_bonus_popularity = -0.03}
			add_to_variable = { NPP_popularity = -0.03}
		}
	}
	else_if = {
		limit = { check_variable = { ROOT.presidents_party = 6 } } #FAR RIGHT
		every_owned_state = {
			limit  = { can_have_elections_in_state = yes}
			add_to_variable = { NPP_FR_bonus_popularity = -0.03}
			add_to_variable = { NPP_popularity = -0.03}
		}
	}
}


US_check_debt_expectations = {
	if = {
		limit = {
			OR = {
				check_variable = { debt_ratio < US_debt_expectation}
				check_variable = { debt_ratio = US_debt_expectation}
			}
		}
		log = " USA -WON- -DEBT- Expectation"
		if = {
			limit = { check_variable = { ROOT.presidents_party = 1 } } #REP
			every_owned_state = {
				limit  = { can_have_elections_in_state = yes}
				add_to_variable = { RD_D_popularity = 0.03}
				add_to_variable = { RD_popularity = 0.03}
			}
		}
		else_if = {
			limit = { check_variable = { ROOT.presidents_party = 2 } } #DEM
			every_owned_state = {
				limit  = { can_have_elections_in_state = yes}
				add_to_variable = { RD_R_popularity = 0.03}
				add_to_variable = { RD_popularity = 0.03}
			}
		}
		else_if = {
			limit = { check_variable = { ROOT.presidents_party = 3 } } #LEFT
			every_owned_state = {
				limit  = { can_have_elections_in_state = yes}
				add_to_variable = { NPP_L_bonus_popularity = 0.03}
				add_to_variable = { NPP_popularity = 0.03}
			}
		}
		else_if = {
			limit = { check_variable = { ROOT.presidents_party = 4 } } #CENTER
			every_owned_state = {
				limit  = { can_have_elections_in_state = yes}
				add_to_variable = { NPP_C_bonus_popularity = 0.03}
				add_to_variable = { NPP_popularity = 0.03}
			}
		}
		else_if = {
			limit = { check_variable = { ROOT.presidents_party = 5 } } #YOCKEY
			every_owned_state = {
				limit  = { can_have_elections_in_state = yes}
				add_to_variable = { NPP_Y_bonus_popularity = 0.03}
				add_to_variable = { NPP_popularity = 0.03}
			}
		}
		else_if = {
			limit = { check_variable = { ROOT.presidents_party = 6 } } #FAR RIGHT
			every_owned_state = {
				limit  = { can_have_elections_in_state = yes}
				add_to_variable = { NPP_FR_bonus_popularity = 0.03}
				add_to_variable = { NPP_popularity = 0.03}
			}
		}
		else = {
		log = " USA -LOST- -DEBT- Expectation"
			if = {
				limit = { check_variable = { ROOT.presidents_party = 1 } } #REP
				every_owned_state = {
					limit  = { can_have_elections_in_state = yes}
					add_to_variable = { RD_D_popularity = -0.03}
					add_to_variable = { RD_popularity = -0.03}
				}
			}
			else_if = {
				limit = { check_variable = { ROOT.presidents_party = 2 } } #DEM
				add_to_temp_variable = { RD_D_popularity = 0.03 }
				every_owned_state = {
					limit  = { can_have_elections_in_state = yes}
					add_to_variable = { RD_R_popularity = -0.03}
					add_to_variable = { RD_popularity = -0.03}
				}
			}
			else_if = {
				limit = { check_variable = { ROOT.presidents_party = 3 } } #LEFT
				every_owned_state = {
					limit  = { can_have_elections_in_state = yes}
					add_to_variable = { NPP_L_bonus_popularity = -0.03}
					add_to_variable = { NPP_popularity = -0.03}
				}
			}
			else_if = {
				limit = { check_variable = { ROOT.presidents_party = 4 } } #CENTER
				every_owned_state = {
					limit  = { can_have_elections_in_state = yes}
					add_to_variable = { NPP_C_bonus_popularity = -0.03}
					add_to_variable = { NPP_popularity = -0.03}
				}
			}
			else_if = {
				limit = { check_variable = { ROOT.presidents_party = 5 } } #YOCKEY
				every_owned_state = {
					limit  = { can_have_elections_in_state = yes}
					add_to_variable = { NPP_Y_bonus_popularity = -0.03}
					add_to_variable = { NPP_popularity = -0.03}
				}
			}
			else_if = {
				limit = { check_variable = { ROOT.presidents_party = 6 } } #FAR RIGHT
				every_owned_state = {
					limit  = { can_have_elections_in_state = yes}
					add_to_variable = { NPP_FR_bonus_popularity = -0.03}
					add_to_variable = { NPP_popularity = -0.03}
				}
			}
		}
	}
}
########################################################################################################
#tex honolulu scripted effect
HA_pp_reset = {
	if = {
		limit = { check_variable = { global.JAP_PP_Investment > global.USA_PP_Investment } }
		JAP = { add_political_power = global.PP_Investment_pool }
	}
	if = {
		limit = { check_variable = { global.USA_PP_Investment > global.JAP_PP_Investment } }
		USA = { add_political_power = global.PP_Investment_pool }
	}
		set_variable = { global.JAP_PP_Investment = 0 }
		set_variable = { global.USA_PP_Investment = 0 }
		set_variable = { global.PP_Investment_pool = 0 }
	}

#underdog effects
US_underdog_RD_5_5 = {
	if = { #UNDERDOG BONUS, PRO RD
		limit = { check_variable = { RD_popularity < NPP_popularity }}
		add_to_variable = { RD_popularity = 0.05 }
		else = { add_to_variable = { NPP_popularity = 0.05 }}
	}
}
US_underdog_RD_2_2 = {
	if = { #UNDERDOG BONUS, PRO RD
		limit = { check_variable = { RD_popularity < NPP_popularity }}
		add_to_variable = { RD_popularity = 0.02 }
		else = { add_to_variable = { NPP_popularity = 0.02 }}
	}
}

US_underdog_NPP_5_5 = {
	if = { #UNDERDOG BONUS, PRO RD
		limit = { check_variable = { RD_popularity > NPP_popularity }}
		add_to_variable = { NPP_popularity = 0.05 }
		else = { add_to_variable = { RD_popularity = 0.05 }}
	}
}
US_underdog_NPP_2_2 = {
	if = { #UNDERDOG BONUS, PRO RD
		limit = { check_variable = { RD_popularity > NPP_popularity }}
		add_to_variable = { NPP_popularity = 0.02 }
		else = { add_to_variable = { RD_popularity = 0.02 }}
	}
}
US_underdog_1_1 = {
	if = { #UNDERDOG BONUS
		limit = { check_variable = { RD_popularity > NPP_popularity }}
		add_to_variable = { NPP_popularity = 0.01 }
		else = { add_to_variable = { RD_popularity = 0.01 }}
	}
}
US_underdog_05_05 = {
	if = { #UNDERDOG BONUS
		limit = { check_variable = { RD_popularity > NPP_popularity }}
		add_to_variable = { NPP_popularity = 0.005 }
		else = { add_to_variable = { RD_popularity = 0.005 }}
	}
}

#NPP FP random shit
USA_NPP_rally_effect = {
	custom_effect_tooltip = NPP_rally.tt
	hidden_effect = {
		if = {
			limit = { has_government = authoritarian_democrat }
				every_owned_state = {
					limit = { can_have_elections_in_state = yes }
					add_to_variable = { NPP_FR_bonus_popularity = 0.005 }
					subtract_from_variable = { NPP_L_bonus_popularity = 0.005}
					subtract_from_variable = { NPP_C_bonus_popularity = 0.005}
					subtract_from_variable = { NPP_Y_bonus_popularity = 0.005}
				}
			}
		else_if = {
			limit = { has_government = social_democrat }
				every_owned_state = {
					limit = { can_have_elections_in_state = yes }
					add_to_variable = { NPP_C_bonus_popularity = 0.005}
					subtract_from_variable = { NPP_L_bonus_popularity = 0.005}
					subtract_from_variable = { NPP_FR_bonus_popularity = 0.005}
					subtract_from_variable = { NPP_Y_bonus_popularity = 0.005}
				}
			}
		else_if = {
			limit = { has_government = national_socialism }
				every_owned_state = {
					limit = { can_have_elections_in_state = yes }
					add_to_variable = { NPP_Y_bonus_popularity = 0.005}
					subtract_from_variable = { NPP_L_bonus_popularity = 0.005}
					subtract_from_variable = { NPP_C_bonus_popularity = 0.005}
					subtract_from_variable = { NPP_FR_bonus_popularity = 0.005}
				}
			}
		else_if = {
			limit = { has_government = communist }
				every_owned_state = {
					limit = { can_have_elections_in_state = yes }
					add_to_variable = { NPP_L_bonus_popularity = 0.005}
					subtract_from_variable = { NPP_C_bonus_popularity = 0.005}
					subtract_from_variable = { NPP_FR_bonus_popularity = 0.005}
					subtract_from_variable = { NPP_Y_bonus_popularity = 0.005}
				}
			}

	}
}

USA_societal_unity_pulse = {
	log = "[GetDateText]: [Root.GetName]: USA_societal_unity_pulse; Executing"
	set_temp_variable = { USA_societal_unity_mult = USA_unity } #between around 5 and 15 (extremes)
	subtract_from_temp_variable = { USA_societal_unity_mult = 10 }
	divide_temp_variable = { USA_societal_unity_mult = 100 } #Between around -0.05 and +0.05
	#No need to run only for presidential elections
	every_owned_state = {
		limit = {
			can_have_elections_in_state = yes
		}
		if = {
			limit = {
				OR = {
					check_variable = { USA.presidents_party = 1 }
					check_variable = { USA.presidents_party = 2 }
				}
			}
			add_to_variable = { RD_popularity = USA_societal_unity_mult }
		}
		else_if = {
			limit = {
				OR = {
					check_variable = { USA.presidents_party = 3 }
					check_variable = { USA.presidents_party = 4 }
					check_variable = { USA.presidents_party = 5 }
					check_variable = { USA.presidents_party = 6 }
				}
			}
			add_to_variable = { NPP_popularity = USA_societal_unity_mult }
		}
	}
	#divide_temp_variable = { USA_societal_unity_mult = -4 } #Lol, why?
	divide_temp_variable = { USA_societal_unity_mult = -2 }
	every_owned_state = {
		add_to_variable = { NPP_L_bonus_popularity = USA_societal_unity_mult }
		clamp_variable = {
			var = NPP_L_bonus_popularity
			min = 0
			max = 1000
		}
		add_to_variable = { NPP_Y_bonus_popularity = USA_societal_unity_mult }
		clamp_variable = {
			var = NPP_Y_bonus_popularity
			min = 0
			max = 1000
		}
	}
	log = "[GetDateText]: [Root.GetName]: USA_societal_unity_pulse; Completed execution"
}

########################################OFN Membership Effects
USA_OFN_start_vote_on_candidate = {
	set_country_flag = USA_OFN_new_membership_application
	for_each_scope_loop = {
		array = global.OFN_members
		if = {
			limit = { is_subject = no }
			country_event = { id = OFN.membership.1 }
		}
	}
}
USA_OFN_clear_candidate_vote = {
	for_each_scope_loop = {
		array = global.OFN_members
		if = {
			limit = { is_subject = no }
			if = {
				limit = { has_country_flag = OFN_opposes_new_member }
				clr_country_flag = OFN_opposes_new_member
			}
			else_if = {
				limit = { has_country_flag = OFN_neutral_new_member }
				clr_country_flag = OFN_neutral_new_member
			}
			else_if = {
				limit = { has_country_flag = OFN_supports_new_member }
				clr_country_flag = OFN_supports_new_member
			}
			clear_variable = OFN_convince_cost_political
			clear_variable = OFN_convince_cost_money
		}
	}
	clear_variable = OFN_candidate
	clr_country_flag = USA_OFN_new_membership_application
	if = {
		limit = { has_country_flag = OFN_force_memebership_through }
		clr_country_flag = OFN_force_memebership_through
	}
}

USA_LBJ_expectation_1 = {
	if = { #does not have voting rights
		limit = {
			NOT = {
				has_country_flag = USA_LBJ_voting_rights_act
				has_country_flag = USA_LBJ_education_act_f
			}
		}
		country_event = { id = LBJ.142 days = 7 }
	}
}
